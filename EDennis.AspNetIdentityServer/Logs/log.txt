2020-08-24 09:01:58.691 -04:00 [INF] Starting host...
2020-08-24 09:02:02.646 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-24 09:02:03.531 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-24 09:02:03.739 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-24 09:02:03.817 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-24 09:02:04.365 -04:00 [INF] Loading project configs from Configs ...
2020-08-24 09:02:04.376 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-24 09:02:04.378 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.014 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.027 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.340 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.347 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.373 -04:00 [INF] 		Application record found for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.374 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.399 -04:00 [INF] 		Role Admin record found for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.401 -04:00 [INF] 		Role User record found for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.402 -04:00 [INF] 		Role Readonly record found for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.403 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-24 09:02:05.404 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-24 09:02:05.417 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-24 09:02:05.418 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-24 09:02:05.451 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-24 09:02:05.452 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-24 09:02:05.474 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-24 09:02:05.483 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-24 09:02:05.486 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-24 09:02:05.487 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-24 09:02:05.490 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-24 09:02:05.491 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-24 09:02:05.495 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-24 09:02:05.498 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-24 09:02:05.500 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-24 09:02:05.501 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-24 09:02:05.504 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-24 09:02:05.505 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-24 09:02:05.508 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-24 09:02:05.773 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-24 09:02:05.803 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-24 09:05:18.954 -04:00 [INF] Starting host...
2020-08-24 09:05:20.541 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-24 09:05:20.689 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-24 09:05:20.851 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-24 09:05:21.383 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-24 09:05:21.386 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-24 09:05:21.387 -04:00 [INF] Hosting environment: Development
2020-08-24 09:05:21.388 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 07:53:50.931 -04:00 [INF] Starting host...
2020-08-26 07:53:52.267 -04:00 [INF] Migrating Database...
2020-08-26 07:53:53.243 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 07:53:53.706 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 07:53:53.772 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 07:53:53.803 -04:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 07:54:04.113 -04:00 [INF] Executed DbCommand (272ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 07:54:04.184 -04:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 07:54:04.193 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 07:54:04.336 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 07:54:04.340 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 07:54:04.366 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 07:54:04.376 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 07:54:04.417 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 07:54:04.549 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 07:54:04.555 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 07:54:04.566 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 07:54:04.577 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 07:54:04.585 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.590 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.599 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.607 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.612 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.620 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.627 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.633 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.641 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.649 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.655 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.661 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.670 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.675 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.684 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.694 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.705 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:04.712 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 07:54:04.717 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 07:54:04.721 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 07:54:04.724 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 07:54:04.728 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 07:54:04.734 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 07:54:04.738 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 07:54:04.743 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 07:54:04.746 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 07:54:04.751 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 07:54:04.754 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 07:54:04.757 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 07:54:04.764 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 07:54:04.770 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 07:54:04.775 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 07:54:04.781 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 07:54:04.786 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 07:54:04.791 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 07:54:04.794 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 07:54:04.798 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 07:54:04.802 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 07:54:04.807 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 07:54:04.850 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 07:54:04.855 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 07:54:04.858 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 07:54:04.863 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 07:54:04.866 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 07:54:04.888 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 07:54:04.905 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 07:54:04.927 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 07:54:04.947 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 07:54:04.967 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 07:54:04.977 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 07:54:04.991 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 07:54:05.000 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 07:54:05.004 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 07:54:05.007 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 07:54:05.178 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 07:54:05.183 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 07:54:05.187 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 07:54:05.191 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 07:54:05.194 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 07:54:05.201 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 07:54:05.204 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 07:54:05.300 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 07:54:05.304 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 07:54:05.308 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 07:54:05.318 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 07:54:05.325 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 07:54:05.335 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 07:54:05.347 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:05.353 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:05.361 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:05.370 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:05.378 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 07:54:05.387 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 07:54:05.391 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 07:54:05.395 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 07:54:05.400 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 07:54:05.403 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 07:54:05.409 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 07:54:05.412 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 07:54:05.419 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 07:54:05.425 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 07:54:05.440 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 07:54:05.448 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 07:54:05.454 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 07:54:05.459 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 07:54:05.470 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 07:54:05.475 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 07:54:05.482 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 07:54:05.488 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 07:54:05.494 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 07:54:05.497 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 07:54:05.502 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 07:54:05.505 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 07:54:05.512 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
				INNER JOIN dbo.AspNetUserRoles ur
					ON ur.UserId = u.Id
				INNER JOIN dbo.AspNetRoles r
					ON ur.RoleId = r.Id
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 07:54:05.529 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 07:54:05.548 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 07:54:05.601 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 07:54:05.729 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 07:54:05.795 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 07:54:06.143 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 07:54:06.572 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 07:54:06.580 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 07:54:06.747 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 07:54:06.752 -04:00 [INF] 	Loading Apis for DbView ...
2020-08-26 07:54:06.755 -04:00 [INF] 		Loading  ...
2020-08-26 07:54:06.867 -04:00 [INF] 		Loading  ...
2020-08-26 07:54:06.929 -04:00 [FTL] Host terminated unexpectedly.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'Name', table 'AspNetIdentityServer.dbo.ApiResources'; column does not allow nulls. INSERT fails.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
ClientConnectionId:c55747da-2986-476a-9399-a23e61aba1f0
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(DbContext _, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at EDennis.AspNetIdentityServer.Program.LoadConfigs(IEnumerable`1 projects, ConfigurationDbContext cContext, DomainIdentityDbContext diContext) in C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 242
   at EDennis.AspNetIdentityServer.Program.RunWithConfigs(IHost host, IEnumerable`1 projects, Boolean dump, Boolean commit) in C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 88
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 65
2020-08-26 08:01:17.895 -04:00 [INF] Starting host...
2020-08-26 08:01:19.264 -04:00 [INF] Migrating Database...
2020-08-26 08:01:20.250 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:01:20.722 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:01:20.788 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 08:01:20.820 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 08:01:31.147 -04:00 [INF] Executed DbCommand (284ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 08:01:31.229 -04:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 08:01:31.242 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:01:31.386 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 08:01:31.391 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:01:31.420 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:01:31.433 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:01:31.478 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 08:01:31.616 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 08:01:31.623 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 08:01:31.635 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 08:01:31.647 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 08:01:31.658 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.666 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.675 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.686 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.694 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.704 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.716 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.725 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.733 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.740 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.753 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.762 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.772 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.778 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.787 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.797 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.808 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:31.817 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 08:01:31.821 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 08:01:31.827 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 08:01:31.831 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 08:01:31.838 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 08:01:31.841 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 08:01:31.847 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 08:01:31.851 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 08:01:31.856 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 08:01:31.860 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 08:01:31.863 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 08:01:31.871 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 08:01:31.877 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 08:01:31.884 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 08:01:31.893 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 08:01:31.901 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 08:01:31.940 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 08:01:31.953 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 08:01:31.966 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 08:01:31.977 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 08:01:31.990 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 08:01:32.008 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 08:01:32.055 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:01:32.058 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:01:32.061 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:01:32.067 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:01:32.070 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:01:32.076 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:01:32.087 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 08:01:32.104 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 08:01:32.111 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 08:01:32.118 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 08:01:32.125 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 08:01:32.128 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 08:01:32.134 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 08:01:32.138 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 08:01:32.141 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 08:01:32.307 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:01:32.312 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:01:32.317 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:01:32.324 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:01:32.327 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:01:32.340 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:01:32.345 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 08:01:32.444 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:01:32.449 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:01:32.454 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 08:01:32.462 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 08:01:32.470 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 08:01:32.476 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 08:01:32.486 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:32.497 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:32.507 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:32.515 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:32.522 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:01:32.533 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 08:01:32.536 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 08:01:32.544 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 08:01:32.549 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 08:01:32.554 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 08:01:32.559 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 08:01:32.565 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 08:01:32.574 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 08:01:32.584 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 08:01:32.605 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 08:01:32.619 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 08:01:32.630 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 08:01:32.643 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 08:01:32.653 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 08:01:32.658 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 08:01:32.666 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 08:01:32.673 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 08:01:32.678 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 08:01:32.682 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 08:01:32.687 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 08:01:32.691 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 08:01:32.699 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
				INNER JOIN dbo.AspNetUserRoles ur
					ON ur.UserId = u.Id
				INNER JOIN dbo.AspNetRoles r
					ON ur.RoleId = r.Id
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 08:01:32.714 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 08:01:32.732 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 08:01:32.784 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 08:01:32.897 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 08:01:32.968 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 08:01:33.331 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 08:01:33.790 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 08:01:33.801 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 08:01:33.961 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 08:01:33.966 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 08:05:07.008 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:05:20.817 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 08:05:27.651 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:05:27.966 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 08:05:27.972 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 08:05:27.990 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 08:05:28.022 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 08:05:28.036 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 08:05:28.064 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 08:05:28.069 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 08:05:28.072 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 08:05:28.073 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:05:28.087 -04:00 [INF] 			Adding Organization a.test record for admin1@.test ...
2020-08-26 08:05:28.100 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:05:28.117 -04:00 [INF] 			Adding user record for admin1@.test ...
2020-08-26 08:05:28.164 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:05:28.203 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:05:28.234 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:05:28.235 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 08:05:28.238 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:05:28.240 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 08:05:28.245 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:05:28.249 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:05:28.253 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:05:28.255 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 08:05:28.257 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:05:28.259 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 08:05:28.265 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:05:28.271 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:05:28.283 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.341 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.407 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.410 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.435 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.436 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.439 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.442 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.445 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.456 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.462 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.467 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:05:34.471 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:05:34.477 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:05:34.481 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:05:34.490 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:05:34.493 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:05:34.515 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:05:34.519 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:05:34.521 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:05:34.522 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:05:34.523 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:05:34.526 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:05:34.530 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:05:34.532 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:05:34.533 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:05:34.534 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:05:34.537 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:05:34.538 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:05:34.544 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:05:34.550 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.552 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.618 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.620 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.657 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.659 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.662 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.667 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.675 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.689 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.702 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.710 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:05:34.711 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:05:34.715 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:05:34.716 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:05:34.719 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:05:34.721 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:05:34.748 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:05:34.752 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:05:34.754 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:05:34.755 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:05:34.758 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:05:34.760 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:05:34.766 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:05:34.768 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:05:34.771 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:05:34.772 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:05:34.774 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:05:34.775 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:05:34.781 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:05:34.825 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 08:05:35.070 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 08:05:35.094 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 08:05:36.117 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 08:05:36.120 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 08:05:36.121 -04:00 [INF] Hosting environment: Development
2020-08-26 08:05:36.122 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 08:20:00.728 -04:00 [INF] Starting host...
2020-08-26 08:20:02.318 -04:00 [INF] Migrating Database...
2020-08-26 08:20:03.339 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:20:03.761 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:20:06.834 -04:00 [INF] Executed DbCommand (3,006ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 08:20:06.872 -04:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 08:20:17.173 -04:00 [INF] Executed DbCommand (263ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 08:20:17.242 -04:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 08:20:17.251 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:20:17.397 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 08:20:17.403 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:20:17.429 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:20:17.441 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:20:17.479 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 08:20:17.613 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 08:20:17.619 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 08:20:17.631 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 08:20:17.644 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 08:20:17.654 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.659 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.670 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.679 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.688 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.693 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.702 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.710 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.716 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.723 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.733 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.738 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.745 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.754 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.765 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.771 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.781 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:17.788 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 08:20:17.792 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 08:20:17.799 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 08:20:17.803 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 08:20:17.809 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 08:20:17.814 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 08:20:17.818 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 08:20:17.823 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 08:20:17.828 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 08:20:17.836 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 08:20:17.843 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 08:20:17.846 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 08:20:17.853 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 08:20:17.856 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 08:20:17.861 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 08:20:17.865 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 08:20:17.868 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 08:20:17.874 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 08:20:17.877 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 08:20:17.881 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 08:20:17.886 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 08:20:17.890 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 08:20:17.929 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:20:17.938 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:20:17.964 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:20:17.977 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:20:17.988 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:20:18.004 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:20:18.018 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 08:20:18.040 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 08:20:18.061 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 08:20:18.083 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 08:20:18.087 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 08:20:18.091 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 08:20:18.096 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 08:20:18.100 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 08:20:18.104 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 08:20:18.270 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:20:18.275 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:20:18.278 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:20:18.285 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:20:18.288 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:20:18.298 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:20:18.301 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 08:20:18.399 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:20:18.404 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:20:18.408 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 08:20:18.418 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 08:20:18.427 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 08:20:18.439 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 08:20:18.453 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:18.459 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:18.472 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:18.479 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:18.488 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:20:18.502 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 08:20:18.506 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 08:20:18.512 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 08:20:18.515 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 08:20:18.520 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 08:20:18.525 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 08:20:18.530 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 08:20:18.535 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 08:20:18.544 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 08:20:18.558 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 08:20:18.571 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 08:20:18.578 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 08:20:18.588 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 08:20:18.596 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 08:20:18.605 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 08:20:18.612 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 08:20:18.622 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 08:20:18.627 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 08:20:18.632 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 08:20:18.636 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 08:20:18.642 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 08:20:18.650 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
				INNER JOIN dbo.AspNetUserRoles ur
					ON ur.UserId = u.Id
				INNER JOIN dbo.AspNetRoles r
					ON ur.RoleId = r.Id
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 08:20:18.674 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 08:20:18.696 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 08:20:18.752 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 08:20:18.883 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 08:20:18.952 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 08:20:19.317 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 08:20:19.760 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 08:20:19.769 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 08:20:19.929 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 08:20:19.937 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 08:20:19.939 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.118 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.131 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.432 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.439 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.449 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.484 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.495 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.524 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.528 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.529 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 08:20:20.531 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:20:20.538 -04:00 [INF] 			Adding Organization a.test record for admin1@.test ...
2020-08-26 08:20:20.552 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:20:20.564 -04:00 [INF] 			Adding user record for admin1@.test ...
2020-08-26 08:20:20.616 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:20:20.657 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:20:20.686 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:20:20.688 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 08:20:20.690 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:20:20.691 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 08:20:20.697 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:20:20.701 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:20:20.705 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:20:20.708 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 08:20:20.710 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:20:20.712 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 08:20:20.718 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:20:20.722 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:20:20.728 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.730 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.762 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.764 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.773 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.774 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.775 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.778 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.779 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.783 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.786 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.788 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:20:20.789 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:20:20.793 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:20:20.794 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:20:20.798 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:20:20.799 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:20:20.803 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:20:20.806 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:20:20.807 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:20:20.808 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:20:20.811 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:20:20.812 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:20:20.818 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:20:20.821 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:20:20.822 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:20:20.823 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:20:20.826 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:20:20.827 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:20:20.832 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:20:20.835 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.838 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.869 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.871 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.879 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.881 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.886 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.889 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.891 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.894 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.897 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.902 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:20:20.903 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:20:20.905 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:20:20.907 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:20:20.908 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:20:20.911 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:20:20.920 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:20:20.928 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:20:20.933 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:20:20.934 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:20:20.936 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:20:20.936 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:20:20.942 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:20:20.943 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:20:20.944 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:20:20.945 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:20:20.947 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:20:20.948 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:20:20.955 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:20:20.988 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 08:20:21.119 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 08:20:21.143 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 08:20:21.642 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 08:20:21.645 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 08:20:21.646 -04:00 [INF] Hosting environment: Development
2020-08-26 08:20:21.647 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 08:32:20.351 -04:00 [INF] Starting host...
2020-08-26 08:32:21.797 -04:00 [INF] Migrating Database...
2020-08-26 08:32:22.853 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:32:23.260 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:32:26.333 -04:00 [INF] Executed DbCommand (3,006ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 08:32:26.367 -04:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 08:32:36.623 -04:00 [INF] Executed DbCommand (217ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 08:32:36.700 -04:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 08:32:36.709 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:32:36.880 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 08:32:36.886 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:32:36.918 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:32:36.929 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:32:36.977 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 08:32:37.115 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 08:32:37.121 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 08:32:37.134 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 08:32:37.148 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 08:32:37.159 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.170 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.177 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.190 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.195 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.205 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.213 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.222 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.227 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.237 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.246 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.253 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.259 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.274 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.283 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.293 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.303 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.310 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 08:32:37.314 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 08:32:37.320 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 08:32:37.324 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 08:32:37.328 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 08:32:37.334 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 08:32:37.343 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 08:32:37.346 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 08:32:37.354 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 08:32:37.357 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 08:32:37.362 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 08:32:37.368 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 08:32:37.375 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 08:32:37.379 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 08:32:37.388 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 08:32:37.392 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 08:32:37.395 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 08:32:37.404 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 08:32:37.407 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 08:32:37.411 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 08:32:37.416 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 08:32:37.424 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 08:32:37.493 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:32:37.497 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:32:37.510 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:32:37.521 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:32:37.532 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:32:37.544 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:32:37.558 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 08:32:37.576 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 08:32:37.584 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 08:32:37.593 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 08:32:37.596 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 08:32:37.602 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 08:32:37.606 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 08:32:37.611 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 08:32:37.615 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 08:32:37.788 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:32:37.793 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:32:37.797 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:32:37.804 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:32:37.808 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:32:37.817 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:32:37.825 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 08:32:37.924 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:32:37.929 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:32:37.935 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 08:32:37.942 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 08:32:37.954 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 08:32:37.963 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 08:32:37.975 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.983 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:37.990 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:38.003 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:38.015 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:32:38.027 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 08:32:38.034 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 08:32:38.037 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 08:32:38.043 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 08:32:38.047 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 08:32:38.054 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 08:32:38.057 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 08:32:38.062 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 08:32:38.069 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 08:32:38.081 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 08:32:38.095 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 08:32:38.103 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 08:32:38.110 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 08:32:38.118 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 08:32:38.125 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 08:32:38.129 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 08:32:38.139 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 08:32:38.146 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 08:32:38.152 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 08:32:38.155 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 08:32:38.159 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 08:32:38.169 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
				INNER JOIN dbo.AspNetUserRoles ur
					ON ur.UserId = u.Id
				INNER JOIN dbo.AspNetRoles r
					ON ur.RoleId = r.Id
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 08:32:38.188 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 08:32:38.204 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 08:32:38.265 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 08:32:38.384 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 08:32:38.452 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 08:32:38.819 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 08:32:39.295 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 08:32:39.304 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 08:32:39.477 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 08:32:39.484 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 08:32:39.487 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:32:39.662 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 08:32:39.675 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:32:39.980 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 08:32:39.990 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 08:32:40.003 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 08:32:40.044 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 08:32:40.057 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 08:32:40.086 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 08:32:40.089 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 08:32:40.091 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 08:32:40.092 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:32:40.099 -04:00 [INF] 			Adding Organization a.test record for admin1@.test ...
2020-08-26 08:32:40.112 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:32:40.126 -04:00 [INF] 			Adding user record for admin1@.test ...
2020-08-26 08:32:40.173 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:32:40.213 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:32:40.245 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:32:40.247 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 08:32:40.252 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:32:40.254 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 08:32:40.259 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:32:40.263 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:32:40.269 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:32:40.270 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 08:32:40.273 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:32:40.274 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 08:32:40.279 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:32:40.284 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:32:40.290 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.292 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.325 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.327 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.337 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.338 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.340 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.342 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.344 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.350 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.362 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.369 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:32:40.370 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:32:40.375 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:32:40.377 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:32:40.380 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:32:40.382 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:32:40.388 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:32:40.390 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:32:40.392 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:32:40.392 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:32:40.394 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:32:40.395 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:32:40.404 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:32:40.406 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:32:40.409 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:32:40.410 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:32:40.412 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:32:40.413 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:32:40.420 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:32:40.425 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.427 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.458 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.460 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.471 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.472 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.474 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.477 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.480 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.483 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.487 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.491 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:32:40.492 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:32:40.494 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:32:40.495 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:32:40.500 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:32:40.500 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:32:40.505 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:32:40.506 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:32:40.509 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:32:40.511 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:32:40.512 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:32:40.513 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:32:40.517 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:32:40.520 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:32:40.522 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:32:40.522 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:32:40.524 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:32:40.525 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:32:40.531 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:32:40.566 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 08:32:40.697 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 08:32:40.723 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 08:32:41.266 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 08:32:41.269 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 08:32:41.270 -04:00 [INF] Hosting environment: Development
2020-08-26 08:32:41.272 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 08:34:07.902 -04:00 [INF] Starting host...
2020-08-26 08:34:09.543 -04:00 [INF] Migrating Database...
2020-08-26 08:34:10.608 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:34:11.109 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:34:11.183 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 08:34:11.220 -04:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 08:34:21.518 -04:00 [INF] Executed DbCommand (261ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 08:34:21.606 -04:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 08:34:21.698 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:34:21.849 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 08:34:21.855 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:34:21.883 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:34:21.894 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:34:21.941 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 08:34:22.094 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 08:34:22.101 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 08:34:22.115 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 08:34:22.141 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 08:34:22.163 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.173 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.178 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.195 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.209 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.227 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.234 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.245 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.256 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.270 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.283 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.340 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.381 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.403 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.430 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.453 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.459 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:22.466 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 08:34:22.472 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 08:34:22.476 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 08:34:22.479 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 08:34:22.484 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 08:34:22.488 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 08:34:22.494 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 08:34:22.498 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 08:34:22.504 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 08:34:22.507 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 08:34:22.510 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 08:34:22.516 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 08:34:22.524 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 08:34:22.528 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 08:34:22.532 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 08:34:22.537 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 08:34:22.542 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 08:34:22.547 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 08:34:22.551 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 08:34:22.557 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 08:34:22.561 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 08:34:22.569 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 08:34:22.617 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:34:22.621 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:34:22.623 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:34:22.626 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:34:22.631 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:34:22.638 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:34:22.643 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 08:34:22.659 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 08:34:22.666 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 08:34:22.675 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 08:34:22.678 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 08:34:22.685 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 08:34:22.688 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 08:34:22.693 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 08:34:22.697 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 08:34:22.872 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:34:22.876 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:34:22.879 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:34:22.885 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:34:22.888 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:34:22.893 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:34:22.899 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 08:34:22.990 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:34:22.995 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:34:23.000 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 08:34:23.009 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 08:34:23.017 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 08:34:23.024 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 08:34:23.033 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:23.041 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:23.053 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:23.065 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:23.074 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:34:23.082 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 08:34:23.088 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 08:34:23.092 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 08:34:23.098 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 08:34:23.103 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 08:34:23.108 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 08:34:23.112 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 08:34:23.119 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 08:34:23.127 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 08:34:23.141 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 08:34:23.150 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 08:34:23.158 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 08:34:23.168 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 08:34:23.186 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 08:34:23.193 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 08:34:23.209 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 08:34:23.228 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 08:34:23.239 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 08:34:23.244 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 08:34:23.247 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 08:34:23.256 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 08:34:23.267 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
				INNER JOIN dbo.AspNetUserRoles ur
					ON ur.UserId = u.Id
				INNER JOIN dbo.AspNetRoles r
					ON ur.RoleId = r.Id
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 08:34:23.291 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 08:34:23.307 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 08:34:23.362 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 08:34:23.484 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 08:34:23.552 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 08:34:23.933 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 08:34:24.378 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 08:34:24.388 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 08:34:24.574 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 08:34:24.578 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 08:34:24.580 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:34:24.763 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 08:34:24.778 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.078 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.086 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.099 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.137 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.149 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.183 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.187 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.189 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 08:34:25.190 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:34:25.198 -04:00 [INF] 			Adding Organization a.test record for admin1@.test ...
2020-08-26 08:34:25.213 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:34:25.229 -04:00 [INF] 			Adding user record for admin1@.test ...
2020-08-26 08:34:25.277 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:34:25.317 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:34:25.347 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:34:25.349 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 08:34:25.351 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:34:25.353 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 08:34:25.359 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:34:25.362 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:34:25.368 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:34:25.371 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 08:34:25.373 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:34:25.375 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 08:34:25.380 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:34:25.385 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:34:25.393 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.394 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.429 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.431 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.441 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.442 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.444 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.446 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.448 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.454 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.456 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.459 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:34:25.461 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:34:25.466 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:34:25.467 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:34:25.471 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:34:25.472 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:34:25.475 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:34:25.478 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:34:25.479 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:34:25.482 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:34:25.483 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:34:25.485 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:34:25.489 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:34:25.493 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:34:25.494 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:34:25.495 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:34:25.498 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:34:25.501 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:34:25.505 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:34:25.508 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.511 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.541 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.543 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.553 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.554 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.556 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.558 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.559 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.565 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.569 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.572 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:34:25.573 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:34:25.575 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:34:25.576 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:34:25.578 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:34:25.578 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:34:25.583 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:34:25.586 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:34:25.588 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:34:25.589 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:34:25.590 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:34:25.591 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:34:25.598 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:34:25.600 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:34:25.601 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:34:25.604 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:34:25.608 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:34:25.609 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:34:25.612 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:34:25.618 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-08-26 08:34:32.507 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 08:34:32.641 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 08:34:32.665 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 08:34:33.196 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 08:34:33.200 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 08:34:33.202 -04:00 [INF] Hosting environment: Development
2020-08-26 08:34:33.203 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 08:39:40.086 -04:00 [INF] Starting host...
2020-08-26 08:39:41.601 -04:00 [INF] Migrating Database...
2020-08-26 08:39:42.649 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:39:43.126 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:39:43.195 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 08:39:43.227 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 08:39:53.543 -04:00 [INF] Executed DbCommand (277ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 08:39:53.614 -04:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 08:39:53.624 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:39:53.774 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 08:39:53.779 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:39:53.807 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:39:53.817 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:39:53.855 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 08:39:53.988 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 08:39:53.994 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 08:39:54.006 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 08:39:54.022 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 08:39:54.032 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.042 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.051 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.059 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.065 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.075 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.090 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.099 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.110 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.121 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.129 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.139 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.145 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.151 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.161 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.172 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.178 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.188 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 08:39:54.192 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 08:39:54.196 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 08:39:54.203 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 08:39:54.208 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 08:39:54.213 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 08:39:54.222 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 08:39:54.226 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 08:39:54.231 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 08:39:54.235 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 08:39:54.240 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 08:39:54.243 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 08:39:54.247 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 08:39:54.253 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 08:39:54.256 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 08:39:54.262 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 08:39:54.266 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 08:39:54.272 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 08:39:54.275 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 08:39:54.282 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 08:39:54.286 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 08:39:54.294 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 08:39:54.361 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:39:54.365 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:39:54.377 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:39:54.388 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:39:54.400 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:39:54.413 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:39:54.428 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 08:39:54.445 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 08:39:54.454 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 08:39:54.460 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 08:39:54.464 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 08:39:54.471 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 08:39:54.475 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 08:39:54.481 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 08:39:54.484 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 08:39:54.648 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:39:54.652 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:39:54.657 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:39:54.663 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:39:54.668 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:39:54.676 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:39:54.680 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 08:39:54.793 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:39:54.797 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:39:54.803 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 08:39:54.812 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 08:39:54.820 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 08:39:54.826 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 08:39:54.838 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.849 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.860 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.873 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.885 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:39:54.893 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 08:39:54.897 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 08:39:54.904 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 08:39:54.907 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 08:39:54.912 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 08:39:54.919 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 08:39:54.928 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 08:39:54.940 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 08:39:54.952 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 08:39:54.975 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 08:39:54.991 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 08:39:54.999 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 08:39:55.004 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 08:39:55.015 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 08:39:55.024 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 08:39:55.030 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 08:39:55.039 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 08:39:55.045 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 08:39:55.053 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 08:39:55.057 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 08:39:55.061 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 08:39:55.072 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 08:39:55.095 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 08:39:55.119 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 08:39:55.190 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 08:39:55.333 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 08:39:55.403 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 08:39:55.784 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 08:39:56.218 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 08:39:56.227 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 08:39:56.386 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 08:39:56.390 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.393 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.560 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.573 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.860 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.869 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.879 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.916 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.928 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.954 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.957 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.959 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 08:39:56.960 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:39:56.969 -04:00 [INF] 			Adding Organization a.test record for admin1@.test ...
2020-08-26 08:39:56.983 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:39:56.995 -04:00 [INF] 			Adding user record for admin1@.test ...
2020-08-26 08:39:57.040 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:39:57.077 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:39:57.124 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:39:57.125 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 08:39:57.128 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:39:57.129 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 08:39:57.134 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:39:57.139 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:39:57.144 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:39:57.147 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 08:39:57.152 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:39:57.154 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 08:39:57.160 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:39:57.164 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:39:57.170 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.172 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.206 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.208 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.217 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.218 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.220 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.222 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.223 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.228 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.230 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.233 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:39:57.234 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:39:57.239 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:39:57.240 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:39:57.244 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:39:57.248 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:39:57.253 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:39:57.255 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:39:57.258 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:39:57.259 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:39:57.262 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:39:57.263 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:39:57.268 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:39:57.270 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:39:57.271 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:39:57.273 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:39:57.275 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:39:57.276 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:39:57.285 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:39:57.288 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.291 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.323 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.325 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.334 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.335 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.337 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.339 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.341 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.346 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.349 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.352 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:39:57.353 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:39:57.355 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:39:57.356 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:39:57.357 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:39:57.358 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:39:57.362 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:39:57.365 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:39:57.366 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:39:57.370 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:39:57.371 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:39:57.374 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:39:57.378 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:39:57.380 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:39:57.382 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:39:57.382 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:39:57.387 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:39:57.387 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:39:57.392 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:39:57.394 -04:00 [INF] **Finished Loading Configurations.
2020-08-26 08:39:57.398 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-08-26 08:40:03.644 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 08:40:03.773 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 08:40:03.797 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 08:40:04.324 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 08:40:04.327 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 08:40:04.328 -04:00 [INF] Hosting environment: Development
2020-08-26 08:40:04.329 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 08:50:40.633 -04:00 [INF] Starting host...
2020-08-26 08:50:42.278 -04:00 [INF] Migrating Database...
2020-08-26 08:50:43.455 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:50:43.962 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:50:44.032 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 08:50:44.064 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 08:50:54.351 -04:00 [INF] Executed DbCommand (251ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 08:50:54.426 -04:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 08:50:54.436 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:50:54.583 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 08:50:54.588 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:50:54.615 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:50:54.628 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:50:54.668 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 08:50:54.804 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 08:50:54.813 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 08:50:54.824 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 08:50:54.835 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 08:50:54.845 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.850 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.858 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.869 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.877 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.884 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.890 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.895 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.907 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.913 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.924 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.935 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.941 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.949 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.958 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.966 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.972 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:54.980 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 08:50:54.984 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 08:50:54.988 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 08:50:54.993 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 08:50:54.996 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 08:50:55.002 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 08:50:55.006 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 08:50:55.016 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 08:50:55.023 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 08:50:55.028 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 08:50:55.034 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 08:50:55.039 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 08:50:55.044 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 08:50:55.048 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 08:50:55.054 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 08:50:55.059 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 08:50:55.066 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 08:50:55.074 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 08:50:55.078 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 08:50:55.085 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 08:50:55.091 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 08:50:55.097 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 08:50:55.140 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:50:55.168 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:50:55.183 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:50:55.192 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:50:55.205 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:50:55.219 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:50:55.230 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 08:50:55.252 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 08:50:55.263 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 08:50:55.272 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 08:50:55.275 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 08:50:55.282 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 08:50:55.286 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 08:50:55.291 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 08:50:55.295 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 08:50:55.470 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:50:55.474 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:50:55.478 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:50:55.486 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:50:55.490 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:50:55.497 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:50:55.501 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 08:50:55.595 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:50:55.600 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:50:55.613 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 08:50:55.622 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 08:50:55.628 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 08:50:55.638 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 08:50:55.647 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:55.658 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:55.665 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:55.674 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:55.685 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:50:55.692 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 08:50:55.696 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 08:50:55.703 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 08:50:55.707 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 08:50:55.715 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 08:50:55.719 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 08:50:55.726 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 08:50:55.730 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 08:50:55.738 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 08:50:55.751 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 08:50:55.758 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 08:50:55.764 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 08:50:55.771 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 08:50:55.779 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 08:50:55.787 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 08:50:55.796 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 08:50:55.806 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 08:50:55.812 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 08:50:55.822 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 08:50:55.828 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 08:50:55.831 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 08:50:55.842 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 08:50:55.860 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 08:50:55.881 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 08:50:55.940 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 08:50:56.058 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 08:50:56.126 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 08:50:56.487 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 08:50:56.950 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 08:50:56.960 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 08:50:57.122 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 08:50:57.129 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.132 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.305 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.320 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.614 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.622 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.631 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.672 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.684 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.709 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.712 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.716 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 08:50:57.717 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:50:57.728 -04:00 [INF] 			Adding Organization a.test record for admin1@.test ...
2020-08-26 08:50:57.740 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:50:57.754 -04:00 [INF] 			Adding user record for admin1@.test ...
2020-08-26 08:50:57.799 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:50:57.837 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:50:57.866 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:50:57.868 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 08:50:57.870 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:50:57.871 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 08:50:57.876 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:50:57.880 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:50:57.885 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:50:57.888 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 08:50:57.893 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:50:57.894 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 08:50:57.902 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:50:57.905 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:50:57.914 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:57.916 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:57.951 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:57.953 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.007 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.008 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.010 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.013 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.014 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.017 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.021 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.023 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:50:58.025 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:50:58.029 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:50:58.030 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:50:58.033 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:50:58.034 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:50:58.038 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:50:58.041 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:50:58.042 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:50:58.043 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:50:58.046 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:50:58.047 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:50:58.051 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:50:58.053 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:50:58.055 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:50:58.055 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:50:58.057 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:50:58.062 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:50:58.065 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:50:58.071 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.072 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.104 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.106 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.120 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.122 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.123 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.128 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.129 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.134 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.138 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.140 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:50:58.141 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:50:58.143 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:50:58.145 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:50:58.147 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:50:58.148 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:50:58.153 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:50:58.158 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:50:58.159 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:50:58.160 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:50:58.162 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:50:58.162 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:50:58.169 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:50:58.172 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:50:58.173 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:50:58.174 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:50:58.176 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:50:58.179 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:50:58.185 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:50:58.188 -04:00 [INF] **Finished Loading Configurations.
2020-08-26 08:50:58.193 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-08-26 08:50:58.287 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 08:50:58.418 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 08:50:58.440 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 08:50:58.942 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 08:50:58.945 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 08:50:58.946 -04:00 [INF] Hosting environment: Development
2020-08-26 08:50:58.947 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 08:56:08.666 -04:00 [INF] Starting host...
2020-08-26 08:56:10.546 -04:00 [INF] Migrating Database...
2020-08-26 08:56:11.593 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:56:12.085 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:56:12.155 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 08:56:12.188 -04:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 08:56:22.425 -04:00 [INF] Executed DbCommand (199ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 08:56:22.505 -04:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 08:56:22.514 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:56:22.645 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 08:56:22.649 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:56:22.676 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:56:22.687 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:56:22.725 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 08:56:22.859 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 08:56:22.865 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 08:56:22.876 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 08:56:22.891 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 08:56:22.902 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.907 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.913 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.925 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.938 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.947 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.954 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.960 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.972 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.980 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.987 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:22.995 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.002 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.008 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.016 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.026 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.040 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.047 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 08:56:23.053 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 08:56:23.059 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 08:56:23.066 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 08:56:23.070 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 08:56:23.077 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 08:56:23.082 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 08:56:23.091 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 08:56:23.100 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 08:56:23.107 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 08:56:23.112 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 08:56:23.117 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 08:56:23.122 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 08:56:23.126 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 08:56:23.133 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 08:56:23.136 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 08:56:23.143 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 08:56:23.147 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 08:56:23.154 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 08:56:23.158 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 08:56:23.161 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 08:56:23.170 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 08:56:23.209 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:56:23.218 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:56:23.223 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:56:23.225 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:56:23.232 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:56:23.241 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:56:23.248 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 08:56:23.282 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 08:56:23.302 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 08:56:23.324 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 08:56:23.336 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 08:56:23.347 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 08:56:23.358 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 08:56:23.371 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 08:56:23.380 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 08:56:23.555 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 08:56:23.559 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:56:23.562 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:56:23.568 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 08:56:23.570 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 08:56:23.575 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 08:56:23.581 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 08:56:23.672 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:56:23.676 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 08:56:23.682 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 08:56:23.690 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 08:56:23.699 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 08:56:23.705 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 08:56:23.714 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.723 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.730 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.739 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.748 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 08:56:23.755 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 08:56:23.758 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 08:56:23.765 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 08:56:23.769 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 08:56:23.774 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 08:56:23.778 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 08:56:23.783 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 08:56:23.789 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 08:56:23.800 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 08:56:23.811 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 08:56:23.819 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 08:56:23.826 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 08:56:23.834 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 08:56:23.840 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 08:56:23.847 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 08:56:23.852 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 08:56:23.859 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 08:56:23.867 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 08:56:23.873 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 08:56:23.880 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 08:56:23.885 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 08:56:23.895 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 08:56:23.920 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 08:56:23.939 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 08:56:23.995 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 08:56:24.136 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 08:56:24.208 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 08:56:24.579 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 08:56:25.025 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 08:56:25.035 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 08:56:25.210 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 08:56:25.215 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.219 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.395 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.409 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.704 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.710 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.718 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.750 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.762 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.788 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.791 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.793 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 08:56:25.794 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:56:25.801 -04:00 [INF] 			Adding Organization a.test record for admin1@.test ...
2020-08-26 08:56:25.813 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:56:25.825 -04:00 [INF] 			Adding user record for admin1@.test ...
2020-08-26 08:56:25.869 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:56:25.908 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:56:25.936 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:56:25.938 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 08:56:25.940 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:56:25.941 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 08:56:25.946 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:56:25.951 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:56:25.955 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:56:25.958 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 08:56:25.960 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:56:25.961 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 08:56:25.965 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:56:25.970 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:56:25.983 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:25.984 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.019 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.021 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.076 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.079 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.082 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.085 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.089 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.094 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.097 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.102 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 08:56:26.103 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:56:26.108 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:56:26.111 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:56:26.117 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:56:26.117 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:56:26.124 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:56:26.126 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:56:26.127 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:56:26.128 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:56:26.130 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:56:26.133 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:56:26.138 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:56:26.139 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:56:26.140 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:56:26.143 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:56:26.145 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:56:26.146 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:56:26.150 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:56:26.162 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.164 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.194 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.196 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.212 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.213 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.217 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.220 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.221 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.227 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.230 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.233 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 08:56:26.236 -04:00 [INF] 			Checking organization record for admin1@.test ...
2020-08-26 08:56:26.238 -04:00 [INF] 			Organization a.test record found for admin1@.test ...
2020-08-26 08:56:26.238 -04:00 [INF] 			Checking user record for admin1@.test ...
2020-08-26 08:56:26.241 -04:00 [INF] 			User record found for admin1@.test ...
2020-08-26 08:56:26.241 -04:00 [INF] 			Checking user role records for admin1@.test ...
2020-08-26 08:56:26.250 -04:00 [INF] 			Checking claim records for admin1@.test ...
2020-08-26 08:56:26.252 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 08:56:26.253 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 08:56:26.254 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 08:56:26.261 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 08:56:26.262 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 08:56:26.267 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 08:56:26.271 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 08:56:26.273 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 08:56:26.275 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 08:56:26.278 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 08:56:26.283 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 08:56:26.290 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 08:56:26.303 -04:00 [INF] **Finished Loading Configurations.
2020-08-26 08:56:26.306 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-08-26 08:56:26.397 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 08:56:26.527 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 08:56:26.552 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 08:56:27.059 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 08:56:27.064 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 08:56:27.088 -04:00 [INF] Hosting environment: Development
2020-08-26 08:56:27.091 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 12:40:16.412 -04:00 [INF] Starting host...
2020-08-26 12:40:18.479 -04:00 [INF] Migrating Database...
2020-08-26 12:40:19.532 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 12:40:19.958 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 12:40:23.030 -04:00 [INF] Executed DbCommand (3,006ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 12:40:23.062 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 12:40:33.294 -04:00 [INF] Executed DbCommand (192ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 12:40:33.364 -04:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 12:40:33.373 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 12:40:33.515 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 12:40:33.521 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 12:40:33.549 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 12:40:33.560 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 12:40:33.598 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 12:40:33.730 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 12:40:33.737 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 12:40:33.748 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 12:40:33.758 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 12:40:33.767 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.773 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.780 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.793 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.799 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.805 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.813 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.821 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.829 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.834 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.842 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.850 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.858 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.864 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.875 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.882 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.888 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:33.894 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 12:40:33.897 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 12:40:33.905 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 12:40:33.911 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 12:40:33.914 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 12:40:33.917 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 12:40:33.927 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 12:40:33.932 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 12:40:33.937 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 12:40:33.943 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 12:40:33.946 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 12:40:33.952 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 12:40:33.956 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 12:40:33.959 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 12:40:33.965 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 12:40:33.971 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 12:40:33.978 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 12:40:33.985 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 12:40:33.990 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 12:40:33.995 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 12:40:33.998 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 12:40:34.003 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 12:40:34.040 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 12:40:34.047 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 12:40:34.051 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 12:40:34.056 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 12:40:34.059 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 12:40:34.066 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 12:40:34.072 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 12:40:34.089 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 12:40:34.095 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 12:40:34.102 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 12:40:34.107 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 12:40:34.115 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 12:40:34.124 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 12:40:34.128 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 12:40:34.136 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 12:40:34.355 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 12:40:34.363 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 12:40:34.372 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 12:40:34.378 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 12:40:34.382 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 12:40:34.392 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 12:40:34.397 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 12:40:34.556 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 12:40:34.561 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 12:40:34.566 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 12:40:34.575 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 12:40:34.583 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 12:40:34.596 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 12:40:34.610 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:34.620 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:34.627 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:34.634 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:34.644 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 12:40:34.654 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 12:40:34.658 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 12:40:34.666 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 12:40:34.672 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 12:40:34.676 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 12:40:34.679 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 12:40:34.684 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 12:40:34.689 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 12:40:34.697 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 12:40:34.709 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 12:40:34.720 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 12:40:34.727 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 12:40:34.731 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 12:40:34.739 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 12:40:34.746 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 12:40:34.752 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 12:40:34.759 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 12:40:34.765 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 12:40:34.770 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 12:40:34.774 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 12:40:34.777 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 12:40:34.784 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 12:40:34.800 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 12:40:34.824 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 12:40:34.889 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 12:40:35.023 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 12:40:35.093 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 12:40:35.449 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 12:40:35.911 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 12:40:35.919 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 12:40:36.075 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 12:40:36.085 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.090 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.259 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.273 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.556 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.564 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.574 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.612 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.625 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.649 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.652 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.654 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 12:40:36.655 -04:00 [INF] 			Checking organization record for maria@a.test ...
2020-08-26 12:40:36.662 -04:00 [INF] 			Adding Organization a.test record for maria@a.test ...
2020-08-26 12:40:36.674 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-08-26 12:40:36.685 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-08-26 12:40:36.728 -04:00 [INF] 			Checking user role records for maria@a.test ...
2020-08-26 12:40:36.765 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-08-26 12:40:36.795 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 12:40:36.797 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 12:40:36.800 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 12:40:36.802 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 12:40:36.809 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 12:40:36.813 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 12:40:36.817 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 12:40:36.819 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 12:40:36.822 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 12:40:36.823 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 12:40:36.828 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 12:40:36.831 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 12:40:36.843 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.845 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.877 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.879 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.933 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.935 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.937 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.940 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.942 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.944 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.947 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.949 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 12:40:36.950 -04:00 [INF] 			Checking organization record for maria@a.test ...
2020-08-26 12:40:36.954 -04:00 [INF] 			Organization a.test record found for maria@a.test ...
2020-08-26 12:40:36.955 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-08-26 12:40:36.959 -04:00 [INF] 			User record found for maria@a.test ...
2020-08-26 12:40:36.960 -04:00 [INF] 			Checking user role records for maria@a.test ...
2020-08-26 12:40:36.964 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-08-26 12:40:36.966 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 12:40:36.968 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 12:40:36.969 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 12:40:36.971 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 12:40:36.972 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 12:40:36.977 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 12:40:36.978 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 12:40:36.980 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 12:40:36.981 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 12:40:36.986 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 12:40:36.987 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 12:40:36.994 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 12:40:37.000 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.002 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.043 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.046 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.061 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.062 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.065 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.067 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.069 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.072 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.075 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.077 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 12:40:37.078 -04:00 [INF] 			Checking organization record for maria@a.test ...
2020-08-26 12:40:37.080 -04:00 [INF] 			Organization a.test record found for maria@a.test ...
2020-08-26 12:40:37.081 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-08-26 12:40:37.084 -04:00 [INF] 			User record found for maria@a.test ...
2020-08-26 12:40:37.084 -04:00 [INF] 			Checking user role records for maria@a.test ...
2020-08-26 12:40:37.090 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-08-26 12:40:37.094 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 12:40:37.095 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 12:40:37.097 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 12:40:37.099 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 12:40:37.103 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 12:40:37.108 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 12:40:37.110 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 12:40:37.113 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 12:40:37.114 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 12:40:37.115 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 12:40:37.116 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 12:40:37.120 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 12:40:37.122 -04:00 [INF] **Finished Loading Configurations.
2020-08-26 12:40:37.125 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-08-26 12:40:37.204 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 12:40:37.364 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 12:40:37.387 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 12:40:37.982 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 12:40:37.984 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 12:40:37.986 -04:00 [INF] Hosting environment: Development
2020-08-26 12:40:37.987 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 12:40:42.978 -04:00 [INF] Application is shutting down...
2020-08-26 15:58:03.377 -04:00 [INF] Starting host...
2020-08-26 15:58:04.986 -04:00 [INF] Migrating Database...
2020-08-26 15:58:06.000 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 15:58:06.411 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 15:58:09.476 -04:00 [INF] Executed DbCommand (3,006ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-08-26 15:58:09.507 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-08-26 15:58:19.786 -04:00 [INF] Executed DbCommand (241ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-08-26 15:58:19.861 -04:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-08-26 15:58:19.870 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 15:58:20.012 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-08-26 15:58:20.017 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 15:58:20.046 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 15:58:20.057 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 15:58:20.101 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-08-26 15:58:20.239 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-08-26 15:58:20.244 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-08-26 15:58:20.251 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-08-26 15:58:20.260 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-08-26 15:58:20.266 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.273 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.280 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.287 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.292 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.298 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.305 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.311 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.317 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.327 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.334 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.340 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.347 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.354 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.360 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.366 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.372 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.377 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-08-26 15:58:20.380 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-08-26 15:58:20.383 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-08-26 15:58:20.386 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-08-26 15:58:20.389 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-08-26 15:58:20.393 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-08-26 15:58:20.397 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-08-26 15:58:20.400 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-08-26 15:58:20.404 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-08-26 15:58:20.407 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-08-26 15:58:20.410 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-08-26 15:58:20.413 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-08-26 15:58:20.416 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-08-26 15:58:20.421 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-08-26 15:58:20.424 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-08-26 15:58:20.429 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-08-26 15:58:20.434 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-08-26 15:58:20.439 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-08-26 15:58:20.444 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-08-26 15:58:20.447 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-08-26 15:58:20.452 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-08-26 15:58:20.457 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-08-26 15:58:20.501 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 15:58:20.505 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 15:58:20.509 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 15:58:20.512 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 15:58:20.518 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 15:58:20.533 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 15:58:20.543 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-08-26 15:58:20.561 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-08-26 15:58:20.567 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-08-26 15:58:20.584 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-08-26 15:58:20.595 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-08-26 15:58:20.605 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-08-26 15:58:20.613 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-08-26 15:58:20.618 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-08-26 15:58:20.624 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-08-26 15:58:20.812 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-08-26 15:58:20.817 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 15:58:20.821 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 15:58:20.825 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-08-26 15:58:20.829 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-08-26 15:58:20.835 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-08-26 15:58:20.839 -04:00 [INF] Applying migration '20200818165611_Initial'.
2020-08-26 15:58:20.928 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetApplications] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 15:58:20.942 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetOrganizations] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-08-26 15:58:20.947 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetApplications),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-08-26 15:58:20.956 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(200) NOT NULL DEFAULT (next value for seqAspNetOrganizations),
    [SysUser] nvarchar(150) NULL,
    [SysStatus] tinyint NOT NULL DEFAULT CAST(0 AS tinyint),
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-08-26 15:58:20.968 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [Application] varchar(200) NOT NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-08-26 15:58:20.982 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL IDENTITY,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    [LockoutEnabled] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] varchar(200) NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-08-26 15:58:20.994 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:20.999 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:21.006 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:21.015 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:21.023 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-08-26 15:58:21.031 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-08-26 15:58:21.037 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_AspNetRoles_Application_Name] ON [AspNetRoles] ([Application], [Name]) WHERE [Application] IS NOT NULL AND [Name] IS NOT NULL;
2020-08-26 15:58:21.042 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-08-26 15:58:21.047 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-08-26 15:58:21.054 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-08-26 15:58:21.061 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-08-26 15:58:21.068 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-08-26 15:58:21.081 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetApplicationsView as
	select a.Name Application,

	JSON_QUERY('[' +
		STUFF((
			SELECT ',' + char(34) + r.Name + char(34) 
				FROM dbo.AspNetRoles r
				WHERE r.[Application] = a.Name
				FOR XML PATH('')),1,1,'') + ']' ) as Roles

	from dbo.AspNetApplications a
2020-08-26 15:58:21.089 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view AspNetUsersView as
	select u.Id, u.UserName, u.NormalizedUserName, u.Email NormalizedEmail, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
	u.TwoFactorEnabled, u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.AccessFailedCount,
	u.Organization,

	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ApplicationName + char(34) + ':[' + RoleNames + ']' 
				FROM (
					SELECT a.Name ApplicationName,
						STUFF((
							SELECT ',' + char(34) + r.Name + char(34) 
								FROM dbo.AspNetRoles r
								INNER JOIN dbo.AspNetUserRoles ur
									ON ur.RoleId = r.Id
								WHERE u.Id = ur.UserId
									AND r.[Application] = a.Name
								FOR XML PATH('')),1,1,'') as RoleNames
						FROM dbo.AspNetApplications a
						GROUP BY a.Name
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as RolesDictionary,
	JSON_QUERY('{' 
		+ STUFF((
			SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
				FROM (
					SELECT uc2.ClaimType,
						STUFF((
							SELECT ',' + char(34) + uc.ClaimValue + char(34) 
								FROM dbo.AspNetUserClaims uc
								WHERE u.Id = uc.UserId
									and uc.ClaimType = uc2.ClaimType
								FOR XML PATH('')),1,1,'') as ClaimValues
						FROM dbo.AspNetUserClaims uc2
						GROUP BY uc2.ClaimType
						) stf
				FOR XML PATH('')),1,1,'') + '}' ) as ClaimsDictionary

	
	from dbo.AspNetUsers u
2020-08-26 15:58:21.097 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view ClientApplications
	with schemabinding as 
	select c.ClientId, ar.Name [Application] 
		from dbo.ApiResources ar
        inner join dbo.ClientScopes cs
            on cs.Scope = ar.Name
        inner join dbo.Clients c
            on cs.ClientId = c.Id;
2020-08-26 15:58:21.106 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_ClientApplications
		on ClientApplications(ClientId,[Application]);
2020-08-26 15:58:21.111 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_ClientApplications_AppName
		on ClientApplications([Application]);
2020-08-26 15:58:21.116 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserApplicationRoles
	with schemabinding as 
	select u.Id UserId, r.[Application], r.Name [Role] 
		from dbo.AspNetUsers u
        inner join dbo.AspNetUserRoles ur
			on ur.UserId = u.Id
		inner join dbo.AspNetRoles r
			on ur.RoleId = r.Id
2020-08-26 15:58:21.126 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create unique clustered index 
	ucidx_UserApplicationRoles
		on UserApplicationRoles(UserId,[Application],[Role]);
2020-08-26 15:58:21.131 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create nonclustered index
	idx_UserApplicationRoles_AppName
		on UserApplicationRoles([Application]);
2020-08-26 15:58:21.135 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
create view UserClientApplicationRoles
	as
	select uar.UserId, ca.ClientId, uar.[Application], uar.[Role]
		from UserApplicationRoles uar
		inner join ClientApplications ca
			on uar.[Application] = ca.[Application]
2020-08-26 15:58:21.140 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetRoles
	ADD CONSTRAINT fk_RolesApplications
		FOREIGN KEY ([Application])
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-08-26 15:58:21.144 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL
2020-08-26 15:58:21.147 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-08-26 15:58:21.152 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-08-26 15:58:21.156 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-08-26 15:58:21.165 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, 
				u.LockoutBegin, u.LockoutEnd, u.LockoutEnabled, u.Organization,  
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + [Application] + char(34) + ':[' + RoleNames + ']' 
							FROM (
								SELECT a.Name [Application],
									STUFF((
										SELECT ',' + char(34) + r.Name + char(34) 
											FROM dbo.AspNetRoles r
											INNER JOIN dbo.AspNetUserRoles ur
												ON ur.RoleId = r.Id
											WHERE u.Id = ur.UserId
												AND r.Application = a.Name
											FOR XML PATH('')),1,1,'') as RoleNames
									FROM dbo.AspNetApplications a
									GROUP BY a.Name
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Roles,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-08-26 15:58:21.189 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818165611_Initial', N'3.1.7');
2020-08-26 15:58:21.206 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-08-26 15:58:21.266 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-08-26 15:58:21.386 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-08-26 15:58:21.453 -04:00 [INF] Loading Configs\IdentityResources.json ...
2020-08-26 15:58:21.816 -04:00 [INF] 	Adding IdentityResource openid
2020-08-26 15:58:22.287 -04:00 [INF] 	Adding IdentityResource profile
2020-08-26 15:58:22.297 -04:00 [INF] 	Adding IdentityResource role
2020-08-26 15:58:22.460 -04:00 [INF] Loading project configs from Configs ...
2020-08-26 15:58:22.464 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-08-26 15:58:22.468 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 15:58:22.654 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-08-26 15:58:22.671 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-08-26 15:58:22.969 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-08-26 15:58:22.974 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-08-26 15:58:22.983 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-08-26 15:58:23.015 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApi ...
2020-08-26 15:58:23.026 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApi ...
2020-08-26 15:58:23.052 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApi ...
2020-08-26 15:58:23.054 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApi ...
2020-08-26 15:58:23.056 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-08-26 15:58:23.057 -04:00 [INF] 			Checking organization record for maria@a.test ...
2020-08-26 15:58:23.063 -04:00 [INF] 			Adding Organization a.test record for maria@a.test ...
2020-08-26 15:58:23.080 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-08-26 15:58:23.094 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-08-26 15:58:23.134 -04:00 [INF] 			Checking user role records for maria@a.test ...
2020-08-26 15:58:23.166 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-08-26 15:58:23.195 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 15:58:23.197 -04:00 [INF] 			Adding Organization b.test record for darius@b.test ...
2020-08-26 15:58:23.198 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 15:58:23.200 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-08-26 15:58:23.205 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 15:58:23.207 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 15:58:23.212 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 15:58:23.213 -04:00 [INF] 			Adding Organization c.test record for pat@c.test ...
2020-08-26 15:58:23.216 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 15:58:23.217 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-08-26 15:58:23.222 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 15:58:23.225 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 15:58:23.237 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.239 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.283 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.287 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.354 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.355 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.360 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.364 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.370 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.380 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.389 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.394 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-08-26 15:58:23.395 -04:00 [INF] 			Checking organization record for maria@a.test ...
2020-08-26 15:58:23.400 -04:00 [INF] 			Organization a.test record found for maria@a.test ...
2020-08-26 15:58:23.402 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-08-26 15:58:23.412 -04:00 [INF] 			User record found for maria@a.test ...
2020-08-26 15:58:23.414 -04:00 [INF] 			Checking user role records for maria@a.test ...
2020-08-26 15:58:23.424 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-08-26 15:58:23.428 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 15:58:23.430 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 15:58:23.431 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 15:58:23.433 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 15:58:23.434 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 15:58:23.442 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 15:58:23.444 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 15:58:23.446 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 15:58:23.447 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 15:58:23.448 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 15:58:23.449 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 15:58:23.454 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 15:58:23.458 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.459 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.493 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.495 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.536 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.537 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.542 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.546 -04:00 [INF] 		Checking role records for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.550 -04:00 [INF] 		Adding role Admin record for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.560 -04:00 [INF] 		Adding role User record for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.570 -04:00 [INF] 		Adding role Readonly record for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.576 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-08-26 15:58:23.577 -04:00 [INF] 			Checking organization record for maria@a.test ...
2020-08-26 15:58:23.579 -04:00 [INF] 			Organization a.test record found for maria@a.test ...
2020-08-26 15:58:23.580 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-08-26 15:58:23.582 -04:00 [INF] 			User record found for maria@a.test ...
2020-08-26 15:58:23.583 -04:00 [INF] 			Checking user role records for maria@a.test ...
2020-08-26 15:58:23.594 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-08-26 15:58:23.599 -04:00 [INF] 			Checking organization record for darius@b.test ...
2020-08-26 15:58:23.601 -04:00 [INF] 			Organization b.test record found for darius@b.test ...
2020-08-26 15:58:23.603 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-08-26 15:58:23.606 -04:00 [INF] 			User record found for darius@b.test ...
2020-08-26 15:58:23.607 -04:00 [INF] 			Checking user role records for darius@b.test ...
2020-08-26 15:58:23.627 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-08-26 15:58:23.636 -04:00 [INF] 			Checking organization record for pat@c.test ...
2020-08-26 15:58:23.638 -04:00 [INF] 			Organization c.test record found for pat@c.test ...
2020-08-26 15:58:23.639 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-08-26 15:58:23.642 -04:00 [INF] 			User record found for pat@c.test ...
2020-08-26 15:58:23.643 -04:00 [INF] 			Checking user role records for pat@c.test ...
2020-08-26 15:58:23.655 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-08-26 15:58:23.662 -04:00 [INF] **Finished Loading Configurations.
2020-08-26 15:58:23.664 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-08-26 15:58:23.757 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 15:58:23.888 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 15:58:23.913 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 15:58:24.431 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 15:58:24.435 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 15:58:24.436 -04:00 [INF] Hosting environment: Development
2020-08-26 15:58:24.437 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-08-26 16:08:15.689 -04:00 [INF] Starting host...
2020-08-26 16:08:17.429 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-08-26 16:08:17.582 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-08-26 16:08:17.747 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-08-26 16:08:18.289 -04:00 [INF] Now listening on: https://localhost:5000
2020-08-26 16:08:18.292 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-08-26 16:08:18.293 -04:00 [INF] Hosting environment: Development
2020-08-26 16:08:18.295 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 09:51:25.368 -04:00 [INF] Starting host...
2020-09-01 09:51:28.869 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 09:51:29.769 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 09:51:29.963 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 09:51:30.030 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 09:51:30.396 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 09:51:30.823 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 09:51:30.829 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 09:51:30.989 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 09:51:30.990 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 09:51:31.030 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 09:51:31.220 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 09:51:31.248 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 09:56:07.649 -04:00 [INF] Starting host...
2020-09-01 09:56:09.326 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 09:56:10.161 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 09:56:10.350 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 09:56:10.418 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 09:56:10.761 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 09:56:11.101 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 09:56:11.108 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 09:56:11.275 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 09:56:11.276 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 09:56:11.316 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 09:56:11.423 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 09:56:11.455 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 09:56:11.999 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 09:56:12.002 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 09:56:12.003 -04:00 [INF] Hosting environment: Development
2020-09-01 09:56:12.004 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 09:57:41.134 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 09:57:41.279 -04:00 [INF] Authorization failed.
2020-09-01 09:57:41.296 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-09-01 09:57:41.306 -04:00 [INF] Request finished in 175.6835ms 302 
2020-09-01 09:57:41.309 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 09:57:41.325 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
</REQUEST>

2020-09-01 09:57:41.391 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 09:57:41.452 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 09:57:41.497 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 09:57:41.514 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 09:57:41.517 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 09:57:41.523 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 09:57:41.524 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 09:57:41.679 -04:00 [INF] Executed page /Account/Login in 220.3318ms
2020-09-01 09:57:41.682 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 09:57:41.687 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No service for type 'Microsoft.AspNetCore.Identity.UserManager`1[Microsoft.AspNetCore.Identity.IdentityUser]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.<>c__DisplayClass8_0.<CreateActivateInfo>b__1(ViewContext context)
   at Microsoft.Extensions.Internal.PropertyActivator`1.Activate(Object instance, TContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper.RenderPartialCoreAsync(String partialViewName, Object model, ViewDataDictionary viewData, TextWriter writer)
   at Microsoft.AspNetCore.Identity.UI.V4.Pages.Internal.Areas_Identity_Pages__Layout.<ExecuteAsync>b__42_1()
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at Microsoft.AspNetCore.Identity.UI.V4.Pages.Internal.Areas_Identity_Pages__Layout.ExecuteAsync()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-09-01 09:57:41.826 -04:00 [INF] 
<RESPONSE statusCode='500'>
     <URL>
          /Identity/Account/Login
     </URL>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 09:57:41.841 -04:00 [INF] Request finished in 531.2948ms 500 text/html; charset=utf-8
2020-09-01 09:57:41.984 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/favicon.ico  
2020-09-01 09:57:42.007 -04:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\favicon.ico'
2020-09-01 09:57:42.012 -04:00 [INF] Request finished in 27.9669ms 200 image/x-icon
2020-09-01 09:59:37.492 -04:00 [INF] Starting host...
2020-09-01 09:59:39.218 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 09:59:40.097 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 09:59:40.292 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 09:59:40.361 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 09:59:40.714 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 09:59:41.071 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 09:59:41.077 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 09:59:41.231 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 09:59:41.232 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 09:59:41.275 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 09:59:41.401 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 09:59:41.430 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 09:59:41.828 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 09:59:41.831 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 09:59:41.831 -04:00 [INF] Hosting environment: Development
2020-09-01 09:59:41.832 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 09:59:47.483 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 09:59:47.518 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
</REQUEST>

2020-09-01 09:59:47.634 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 09:59:47.690 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 09:59:47.734 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 09:59:47.751 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 09:59:47.754 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 09:59:47.759 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 09:59:47.760 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 09:59:47.925 -04:00 [INF] Executed page /Account/Login in 227.868ms
2020-09-01 09:59:47.929 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 09:59:47.936 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No service for type 'Microsoft.AspNetCore.Identity.UserManager`1[Microsoft.AspNetCore.Identity.IdentityUser]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.<>c__DisplayClass8_0.<CreateActivateInfo>b__1(ViewContext context)
   at Microsoft.Extensions.Internal.PropertyActivator`1.Activate(Object instance, TContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper.RenderPartialCoreAsync(String partialViewName, Object model, ViewDataDictionary viewData, TextWriter writer)
   at Microsoft.AspNetCore.Identity.UI.V4.Pages.Internal.Areas_Identity_Pages__Layout.<ExecuteAsync>b__42_1()
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at Microsoft.AspNetCore.Identity.UI.V4.Pages.Internal.Areas_Identity_Pages__Layout.ExecuteAsync()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-09-01 09:59:48.083 -04:00 [INF] 
<RESPONSE statusCode='500'>
     <URL>
          /Identity/Account/Login
     </URL>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 09:59:48.107 -04:00 [INF] Request finished in 627.5963ms 500 text/html; charset=utf-8
2020-09-01 09:59:48.175 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/favicon.ico  
2020-09-01 09:59:48.191 -04:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\favicon.ico'
2020-09-01 09:59:48.197 -04:00 [INF] Request finished in 22.0688ms 200 image/x-icon
2020-09-01 10:00:26.327 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 10:00:26.330 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
</REQUEST>

2020-09-01 10:00:26.346 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 10:00:26.352 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 10:00:26.356 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 10:00:26.359 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 10:00:26.360 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 10:00:26.362 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 10:00:26.364 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 10:00:26.382 -04:00 [INF] Executed page /Account/Login in 27.5405ms
2020-09-01 10:00:26.385 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 10:00:26.389 -04:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No service for type 'Microsoft.AspNetCore.Identity.UserManager`1[Microsoft.AspNetCore.Identity.IdentityUser]' has been registered.
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.<>c__DisplayClass8_0.<CreateActivateInfo>b__1(ViewContext context)
   at Microsoft.Extensions.Internal.PropertyActivator`1.Activate(Object instance, TContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPagePropertyActivator.Activate(Object page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorPageActivator.Activate(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.HtmlHelper.RenderPartialCoreAsync(String partialViewName, Object model, ViewDataDictionary viewData, TextWriter writer)
   at Microsoft.AspNetCore.Identity.UI.V4.Pages.Internal.Areas_Identity_Pages__Layout.<ExecuteAsync>b__42_1()
   at Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext.SetOutputContentAsync()
   at Microsoft.AspNetCore.Identity.UI.V4.Pages.Internal.Areas_Identity_Pages__Layout.ExecuteAsync()
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageCoreAsync(IRazorPage page, ViewContext context)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderPageAsync(IRazorPage page, ViewContext context, Boolean invokeViewStarts)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderLayoutAsync(ViewContext context, ViewBufferTextWriter bodyWriter)
   at Microsoft.AspNetCore.Mvc.Razor.RazorView.RenderAsync(ViewContext context)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.ViewFeatures.ViewExecutor.ExecuteAsync(ViewContext viewContext, String contentType, Nullable`1 statusCode)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events, IBackChannelLogoutService backChannelLogoutService)
   at IdentityServer4.Hosting.MutualTlsEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2020-09-01 10:00:26.442 -04:00 [INF] 
<RESPONSE statusCode='500'>
     <URL>
          /Identity/Account/Login
     </URL>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 10:00:26.445 -04:00 [INF] Request finished in 118.1312ms 500 text/html; charset=utf-8
2020-09-01 10:00:26.488 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/favicon.ico  
2020-09-01 10:00:26.494 -04:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\favicon.ico'
2020-09-01 10:00:26.496 -04:00 [INF] Request finished in 7.974ms 200 image/x-icon
2020-09-01 12:54:48.959 -04:00 [INF] Starting host...
2020-09-01 12:54:52.049 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 12:54:52.900 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 12:54:53.089 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 12:54:53.155 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 12:54:53.500 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 12:54:53.892 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 12:54:53.899 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 12:54:54.055 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 12:54:54.056 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 12:54:54.094 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 12:54:54.239 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 12:54:54.267 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 12:54:54.753 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 12:54:54.756 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 12:54:54.756 -04:00 [INF] Hosting environment: Development
2020-09-01 12:54:54.757 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 12:55:26.938 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Admin/Index  
2020-09-01 12:55:27.070 -04:00 [INF] Request finished in 134.3099ms 404 
2020-09-01 12:55:35.120 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 12:55:35.161 -04:00 [INF] Authorization failed.
2020-09-01 12:55:35.179 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-09-01 12:55:35.181 -04:00 [INF] Request finished in 61.7168ms 302 
2020-09-01 12:55:35.200 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 12:55:35.209 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
</REQUEST>

2020-09-01 12:55:35.241 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 12:55:35.297 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 12:55:35.340 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 12:55:35.355 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 12:55:35.357 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 12:55:35.363 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 12:55:35.365 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 12:55:35.554 -04:00 [INF] Executed page /Account/Login in 249.7ms
2020-09-01 12:55:35.556 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 12:55:35.562 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_
          SxDjKUazXtbkv9Lm_DPdlhHXYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T
          _oMOVE1tjaoL6cNtKpgeW-YXZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk; path=/; samesite
          =strict; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1
          970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv8KDl0NCr3JwDHSOImDj3v8z0vU2ZW
          SSl6Wown-Q0N-QG-VyM-A3ivjm2VQ0wENaA-tAwO-nCTx4ytagDQZB5GX3DQd3RT7g7m5f20MGisafPz
          _IThsCeltKx86LzjVkvg</__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 12:55:35.583 -04:00 [INF] Request finished in 383.1388ms 200 text/html; charset=utf-8
2020-09-01 12:55:35.600 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/lib/bootstrap/dist/css/bootstrap.css  
2020-09-01 12:55:35.601 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/css/site.css  
2020-09-01 12:55:35.601 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/lib/jquery/dist/jquery.js  
2020-09-01 12:55:35.601 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/js/site.js?v=4q1jwFhaPaZgr8WAUSrux6hAuh0XDg9kPS3xIVq36I0  
2020-09-01 12:55:35.601 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/lib/jquery-validation/dist/jquery.validate.js  
2020-09-01 12:55:35.603 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js  
2020-09-01 12:55:35.601 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/lib/bootstrap/dist/js/bootstrap.bundle.js  
2020-09-01 12:55:35.617 -04:00 [INF] Sending file. Request path: '/Identity/js/site.js'. Physical path: 'C:\Users\denmi\.nuget\packages\microsoft.aspnetcore.identity.ui\3.1.7\staticwebassets\V4\js\site.js'
2020-09-01 12:55:35.639 -04:00 [INF] Request finished in 37.6938ms 200 application/javascript
2020-09-01 12:55:35.646 -04:00 [INF] Sending file. Request path: '/Identity/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js'. Physical path: 'C:\Users\denmi\.nuget\packages\microsoft.aspnetcore.identity.ui\3.1.7\staticwebassets\V4\lib\jquery-validation-unobtrusive\jquery.validate.unobtrusive.js'
2020-09-01 12:55:35.648 -04:00 [INF] Sending file. Request path: '/Identity/css/site.css'. Physical path: 'C:\Users\denmi\.nuget\packages\microsoft.aspnetcore.identity.ui\3.1.7\staticwebassets\V4\css\site.css'
2020-09-01 12:55:35.662 -04:00 [INF] Sending file. Request path: '/Identity/lib/jquery-validation/dist/jquery.validate.js'. Physical path: 'C:\Users\denmi\.nuget\packages\microsoft.aspnetcore.identity.ui\3.1.7\staticwebassets\V4\lib\jquery-validation\dist\jquery.validate.js'
2020-09-01 12:55:35.662 -04:00 [INF] Sending file. Request path: '/Identity/lib/bootstrap/dist/css/bootstrap.css'. Physical path: 'C:\Users\denmi\.nuget\packages\microsoft.aspnetcore.identity.ui\3.1.7\staticwebassets\V4\lib\bootstrap\dist\css\bootstrap.css'
2020-09-01 12:55:35.664 -04:00 [INF] Request finished in 63.7462ms 200 text/css
2020-09-01 12:55:35.665 -04:00 [INF] Request finished in 63.057ms 200 application/javascript
2020-09-01 12:55:35.671 -04:00 [INF] Request finished in 69.875ms 200 application/javascript
2020-09-01 12:55:35.674 -04:00 [INF] Request finished in 73.8829ms 200 text/css
2020-09-01 12:55:35.699 -04:00 [INF] Sending file. Request path: '/Identity/lib/bootstrap/dist/js/bootstrap.bundle.js'. Physical path: 'C:\Users\denmi\.nuget\packages\microsoft.aspnetcore.identity.ui\3.1.7\staticwebassets\V4\lib\bootstrap\dist\js\bootstrap.bundle.js'
2020-09-01 12:55:35.701 -04:00 [INF] Request finished in 100.6775ms 200 application/javascript
2020-09-01 12:55:35.709 -04:00 [INF] Sending file. Request path: '/Identity/lib/jquery/dist/jquery.js'. Physical path: 'C:\Users\denmi\.nuget\packages\microsoft.aspnetcore.identity.ui\3.1.7\staticwebassets\V4\lib\jquery\dist\jquery.js'
2020-09-01 12:55:35.711 -04:00 [INF] Request finished in 110.4923ms 200 application/javascript
2020-09-01 12:55:50.110 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 258
2020-09-01 12:55:50.114 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv8KDl0NCr3JwDHSOImDj3v8z0vU2ZWSSl6Wown-Q0N-QG-VyM-A3ivj
          m2VQ0wENaA-tAwO-nCTx4ytagDQZB5GX3DQd3RT7g7m5f20MGisafPz_IThsCeltKx86LzjVkvg&Inpu
          t.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 12:55:50.122 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 12:55:50.124 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 12:55:50.126 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 12:55:50.157 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 12:55:50.244 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 12:55:50.357 -04:00 [ERR] Failed executing DbCommand (21ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 12:55:50.418 -04:00 [ERR] An exception occurred while iterating over the results of a query for context type 'EDennis.NetStandard.Base.DomainIdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'SuperAdmin'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:54a6ed7d-6b97-4053-a269-dad55c143da9
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'SuperAdmin'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:54a6ed7d-6b97-4053-a269-dad55c143da9
Error Number:207,State:1,Class:16
2020-09-01 12:55:50.525 -04:00 [INF] Executed page /Account/Login in 397.1083ms
2020-09-01 12:55:50.527 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 12:55:50.556 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-01 12:55:50.602 -04:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2020-09-01 12:55:50.805 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-01 12:55:50.812 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-01 12:55:50.823 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-01 12:55:50.849 -04:00 [INF] 
<RESPONSE statusCode='500'>
     <URL>
          /Identity/Account/Login
     </URL>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 12:55:50.855 -04:00 [INF] Request finished in 746.1452ms 500 text/html; charset=utf-8
2020-09-01 13:30:13.978 -04:00 [INF] Starting host...
2020-09-01 13:30:16.096 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:30:17.031 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:30:17.224 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:30:17.292 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:30:17.672 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:30:18.082 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:30:18.090 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:30:18.261 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:30:18.262 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:30:18.307 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:30:18.471 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:30:18.502 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:30:19.042 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:30:19.044 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:30:19.045 -04:00 [INF] Hosting environment: Development
2020-09-01 13:30:19.046 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:30:27.876 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 13:30:27.913 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk     
     </HEADERS>
</REQUEST>

2020-09-01 13:30:28.034 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:30:28.094 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:30:28.139 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:30:28.158 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 13:30:28.160 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 13:30:28.166 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 13:30:28.171 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:30:28.364 -04:00 [INF] Executed page /Account/Login in 262.9053ms
2020-09-01 13:30:28.367 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:30:28.374 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=
          Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv80FrJ3OsfSOQGvLxlb4iR40MAvbiY
          KBQyQldnzqO9MI0zZMtI0ijbPacMc1dH9fdTHm7MMNFnqn1BBYp2dVmyrP_TNAWvGa-HKUpBvuyx9IW6
          XpQ4-HqkoGT5euoGVs_c</__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:30:28.397 -04:00 [INF] Request finished in 525.0222ms 200 text/html; charset=utf-8
2020-09-01 13:30:34.072 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 258
2020-09-01 13:30:34.077 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv80FrJ3OsfSOQGvLxlb4iR40MAvbiYKBQyQldnzqO9MI0zZMtI0ijbP
          acMc1dH9fdTHm7MMNFnqn1BBYp2dVmyrP_TNAWvGa-HKUpBvuyx9IW6XpQ4-HqkoGT5euoGVs_c&Inpu
          t.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 13:30:34.094 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 13:30:34.103 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:30:34.106 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:30:34.138 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 13:30:34.225 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:30:34.337 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 13:30:34.462 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 13:30:34.531 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@p18='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p19='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = DateTimeOffset), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 128) (DbType = AnsiString), @p9='?' (DbType = Boolean), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (DbType = Boolean), @p17='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutBegin] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [Organization] = @p8, [OrganizationAdmin] = @p9, [OrganizationConfirmed] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [SuperAdmin] = @p15, [TwoFactorEnabled] = @p16, [UserName] = @p17
WHERE [Id] = @p18 AND [ConcurrencyStamp] = @p19;
SELECT @@ROWCOUNT;
2020-09-01 13:30:34.589 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 13:30:34.612 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 13:30:34.615 -04:00 [INF] User logged in.
2020-09-01 13:30:34.618 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 13:30:34.623 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 13:30:34.625 -04:00 [INF] Executed page /Account/Login in 517.7826ms
2020-09-01 13:30:34.627 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:30:34.632 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=9978136BD178B55FB5DB8FA17A9B8CCF; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv9jNw4Yjpiei
          auUoblsPJXbL8S12C84XnHe5_xShM5nnJRgI6MlTpJjsALy2MW3TfBh03PU_aTt6wl6_LAeN7jFwQQIN
          vRS0SEpt1MEi0LiBxVHfvAEc3UDodLf5v9aAYhz1U4FELmc5OrtslYbxxPF8CtnADvifRQuEdcf8OYfK
          EWTH26dS2l46kfIEnypjzrsjMfWAh3Tk2128JbDvJ0JU99OVxxshjXK-h2sRfkrb0hbQiKIMclM8grBd
          4g74OdFjFoK6Bw_aFHTtAjNYGc7JznqUib2voUQKgV_VCFEQZw78djxrUOAayNQOUjsdqd970PN9uIOQ
          ueDX7IudkqOToX-Ki50rfvHjGg4_2LB3-LN3HyxqiM_dv6rGuXBZm-SV-5VQ38-gtjKb9964bnE6SCIG
          gTbNU2xukbv5FFMbBpLmEVXOgHdehCO9j0BnzOGSansjVnWNHuSjm1q1d1c-V81SHsaDUQmc2f80DgKE
          s3duNtAT5HeEgYJuPEkD5k3YGqi4peea9w6kFCFtD71AoJGhYifWu0EI6xMDIqXyAAxza8n9EW5DBcSG
          Ywy9mUUxEiLHt5Cc04G-lusLy68DIY9LzrirfBBjhLbT5LvN-dyqNA2BEeSeSCXm6_29VsfFhhfZbW4o
          Qt0vWvxl43fjIGb8zqVnFplrHuNtbCqGYHJGcq66nCAzzpDD4cmoYLTMvxTTQ7o-YmyNai7uMI_WjqC9
          nZiLbqeR8eEENsc9-ot42wVRucYe35Umt0z4SYwrkwkAyEuTT9ykMnT0hDTMD2MPJ-GiDzZtth_ZbjiM
          3j-r-aGh6upxqxq1m6Yba0y4TYUqZIlHKYMnMpx6X_WJBeq_tXZMRLboobM0EyBWWq71BWJ0q87GH3fM
          -vMUcz8fQlei226f-VVI5E8ryoJTnVaAisza1H2MGEEjxz83eVPjUe3aOGv6vroh79O1hYIDD7Pu82l5
          TRMWSeYpQDw3TWnN8UvaOXnzU8zUyJpKpG3oBKiuO7hDvHVcrk-TJQE0SrE6stDEyWY_LfwZFwKV5uh0
          g5W_WehrLXcSDwD9eEWzQm8NsD71FIUGPTTOKDl9OOvtZIsENCv25yDZakxGoAbbKXV6rUl2jA38cMdJ
          A; path=/; secure; samesite=none; httponly,.AspNetCore.Mvc.CookieTempDataProvide
          r=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:30:34.643 -04:00 [INF] Request finished in 570.6782ms 302 
2020-09-01 13:30:34.645 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 13:30:34.677 -04:00 [INF] Authorization was successful.
2020-09-01 13:30:34.678 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:30:34.694 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:30:34.732 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:30:34.742 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:30:34.754 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:30:34.760 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:30:35.126 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 13:30:35.151 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 13:30:35.158 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:30:35.252 -04:00 [INF] Executed page /Account/Admin/Index in 554.9544ms
2020-09-01 13:30:35.254 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:30:35.256 -04:00 [INF] Request finished in 611.0266ms 200 text/html; charset=utf-8
2020-09-01 13:30:35.274 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/lib/bootstrap/dist/css/bootstrap.min.css  
2020-09-01 13:30:35.275 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/lib/bootstrap/dist/js/bootstrap.bundle.min.js  
2020-09-01 13:30:35.275 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/js/site.js?v=4q1jwFhaPaZgr8WAUSrux6hAuh0XDg9kPS3xIVq36I0  
2020-09-01 13:30:35.275 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 13:30:35.275 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/lib/jquery/dist/jquery.min.js  
2020-09-01 13:30:35.287 -04:00 [INF] Sending file. Request path: '/js/site.js'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\js\site.js'
2020-09-01 13:30:35.290 -04:00 [INF] Request finished in 14.5816ms 200 application/javascript
2020-09-01 13:30:35.297 -04:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\css\site.css'
2020-09-01 13:30:35.302 -04:00 [INF] Request finished in 26.4635ms 200 text/css
2020-09-01 13:30:35.306 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.min.css'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\lib\bootstrap\dist\css\bootstrap.min.css'
2020-09-01 13:30:35.308 -04:00 [INF] Request finished in 33.3137ms 200 text/css
2020-09-01 13:30:35.341 -04:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js'
2020-09-01 13:30:35.343 -04:00 [INF] Request finished in 67.8473ms 200 application/javascript
2020-09-01 13:30:35.354 -04:00 [INF] Sending file. Request path: '/lib/jquery/dist/jquery.min.js'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\lib\jquery\dist\jquery.min.js'
2020-09-01 13:30:35.356 -04:00 [INF] Request finished in 81.2741ms 200 application/javascript
2020-09-01 13:31:00.103 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?fld0=UserName&usrop=8&usr=jan&fld1=Organization&op1=Equals&fld2=Application&op2=Contains&pageNumber=1  
2020-09-01 13:31:00.113 -04:00 [INF] Authorization was successful.
2020-09-01 13:31:00.115 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:31:00.122 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:31:00.132 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:31:00.139 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:31:00.144 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:31:00.149 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:31:00.177 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE [s].[UserName] LIKE N'jan%'
2020-09-01 13:31:00.192 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE [s].[UserName] LIKE N'jan%'
ORDER BY [s].[UserName]
2020-09-01 13:31:00.196 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:31:00.209 -04:00 [INF] Executed page /Account/Admin/Index in 83.7471ms
2020-09-01 13:31:00.210 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:31:00.212 -04:00 [INF] Request finished in 110.3983ms 200 text/html; charset=utf-8
2020-09-01 13:31:13.306 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?fld0=UserName&usrop=8&usr=&fld1=Organization&op1=Equals&fld2=Application&op2=Contains&pageNumber=1  
2020-09-01 13:31:13.318 -04:00 [INF] Authorization was successful.
2020-09-01 13:31:13.320 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:31:13.323 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:31:13.326 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:31:13.330 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:31:13.337 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:31:13.345 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:31:13.357 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 13:31:13.364 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 13:31:13.370 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:31:13.392 -04:00 [INF] Executed page /Account/Admin/Index in 67.397ms
2020-09-01 13:31:13.394 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:31:13.396 -04:00 [INF] Request finished in 92.1272ms 200 text/html; charset=utf-8
2020-09-01 13:31:15.759 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?usrop=StartsWith&pageNumber=2&totalRecords=11  
2020-09-01 13:31:15.764 -04:00 [INF] Authorization was successful.
2020-09-01 13:31:15.766 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:31:15.768 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:31:15.773 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:31:15.777 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:31:15.784 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:31:15.791 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:31:15.811 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
2020-09-01 13:31:15.815 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:31:15.827 -04:00 [INF] Executed page /Account/Admin/Index in 54.9442ms
2020-09-01 13:31:15.829 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:31:15.831 -04:00 [INF] Request finished in 71.4977ms 200 text/html; charset=utf-8
2020-09-01 13:31:17.711 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?usrop=StartsWith&pageNumber=1&totalRecords=11  
2020-09-01 13:31:17.717 -04:00 [INF] Authorization was successful.
2020-09-01 13:31:17.720 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:31:17.724 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:31:17.727 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:31:17.731 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:31:17.738 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:31:17.744 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:31:17.751 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 13:31:17.763 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:31:17.791 -04:00 [INF] Executed page /Account/Admin/Index in 65.3694ms
2020-09-01 13:31:17.793 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:31:17.795 -04:00 [INF] Request finished in 84.5388ms 200 text/html; charset=utf-8
2020-09-01 13:37:04.514 -04:00 [INF] Starting host...
2020-09-01 13:37:07.457 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:37:08.392 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:37:08.599 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:37:08.674 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:37:09.047 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:37:09.415 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:37:09.422 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:37:09.589 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:37:09.590 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:37:09.632 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:37:09.756 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:37:09.790 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:37:10.231 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:37:10.234 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:37:10.235 -04:00 [INF] Hosting environment: Development
2020-09-01 13:37:10.236 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:37:38.804 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?usrop=StartsWith&pageNumber=2&totalRecords=11  
2020-09-01 13:37:38.971 -04:00 [INF] Authorization was successful.
2020-09-01 13:37:38.973 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:37:39.035 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:37:39.132 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:37:39.160 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:37:39.182 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:37:39.213 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:42:12.000 -04:00 [INF] Starting host...
2020-09-01 13:42:13.849 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:42:14.748 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:42:14.945 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:42:15.018 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:42:15.396 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:42:15.776 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:42:15.784 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:42:15.949 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:42:15.950 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:42:15.991 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:42:16.114 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:42:16.145 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:42:16.561 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:42:16.563 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:42:16.564 -04:00 [INF] Hosting environment: Development
2020-09-01 13:42:16.565 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:42:21.167 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?fld0=UserName&usrop=8&usr=&fld1=Organization&op1=Equals&fld2=Application&op2=Contains&pageNumber=1  
2020-09-01 13:42:21.327 -04:00 [INF] Authorization was successful.
2020-09-01 13:42:21.329 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:42:21.397 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:42:21.484 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:42:21.512 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:42:21.536 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:42:21.572 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:47:15.672 -04:00 [INF] Starting host...
2020-09-01 13:47:17.628 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:47:18.527 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:47:18.742 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:47:18.808 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:47:19.173 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:47:19.557 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:47:19.564 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:47:19.730 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:47:19.731 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:47:19.791 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:47:19.937 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:47:19.977 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:47:20.404 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:47:20.406 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:47:20.407 -04:00 [INF] Hosting environment: Development
2020-09-01 13:47:20.408 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:47:34.093 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?fld0=UserName&usrop=8&usr=jan&fld1=Organization&op1=Equals&fld2=Application&op2=Contains&pageNumber=1  
2020-09-01 13:47:34.258 -04:00 [INF] Authorization was successful.
2020-09-01 13:47:34.259 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:47:34.332 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:47:34.424 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:47:34.450 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:47:34.472 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:47:34.501 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:47:44.694 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE [s].[UserName] LIKE N'jan%'
2020-09-01 13:47:44.719 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE [s].[UserName] LIKE N'jan%'
ORDER BY [s].[UserName]
2020-09-01 13:47:44.729 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:47:44.936 -04:00 [INF] Executed page /Account/Admin/Index in 10597.9314ms
2020-09-01 13:47:44.942 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:47:44.960 -04:00 [INF] Request finished in 10871.796ms 200 text/html; charset=utf-8
2020-09-01 13:47:48.229 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Logout?returnUrl=%2F application/x-www-form-urlencoded 225
2020-09-01 13:47:48.240 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 13:47:48.244 -04:00 [INF] Executing endpoint '/Account/Logout'
2020-09-01 13:47:48.255 -04:00 [INF] Route matched with {page = "/Account/Logout", area = "Identity", action = "", controller = ""}. Executing page /Account/Logout
2020-09-01 13:47:48.266 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LogoutModel.OnPost - ModelState is "Valid"
2020-09-01 13:47:48.282 -04:00 [INF] AuthenticationScheme: Identity.Application signed out.
2020-09-01 13:47:48.285 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 13:47:48.286 -04:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2020-09-01 13:47:48.288 -04:00 [INF] User logged out.
2020-09-01 13:47:48.289 -04:00 [INF] Executed handler method OnPost, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 13:47:48.291 -04:00 [INF] Executing LocalRedirectResult, redirecting to /.
2020-09-01 13:47:48.292 -04:00 [INF] Executed page /Account/Logout in 35.8534ms
2020-09-01 13:47:48.294 -04:00 [INF] Executed endpoint '/Account/Logout'
2020-09-01 13:47:48.300 -04:00 [INF] Request finished in 71.473ms 302 
2020-09-01 13:47:48.304 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/  
2020-09-01 13:47:48.327 -04:00 [INF] Request finished in 23.6863ms 404 
2020-09-01 13:47:51.219 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/  
2020-09-01 13:47:51.226 -04:00 [INF] Request finished in 7.547ms 404 
2020-09-01 13:47:57.560 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 13:47:57.577 -04:00 [INF] Authorization failed.
2020-09-01 13:47:57.582 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-09-01 13:47:57.583 -04:00 [INF] Request finished in 24.6286ms 302 
2020-09-01 13:47:57.587 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 13:47:57.595 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk     
     </HEADERS>
</REQUEST>

2020-09-01 13:47:57.623 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:47:57.632 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:47:57.645 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:47:57.650 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 13:47:57.652 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 13:47:57.658 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 13:47:57.659 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:47:57.765 -04:00 [INF] Executed page /Account/Login in 130.9154ms
2020-09-01 13:47:57.766 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:47:57.773 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=
          Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv8r5CDc4MQUzioze9yy1MFsHM10E3H
          H9iynG__uzWrP109PKmlUJP2D50AzhqgPYssqTCemETiznuJFSRHS0uDbjAmnDrpuhVjJtst4ynjIhkI
          pWC7Wd93AiYCpnMd-USM</__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:47:57.780 -04:00 [INF] Request finished in 193.0733ms 200 text/html; charset=utf-8
2020-09-01 13:48:06.275 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 258
2020-09-01 13:48:06.279 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv8r5CDc4MQUzioze9yy1MFsHM10E3HH9iynG__uzWrP109PKmlUJP2D
          50AzhqgPYssqTCemETiznuJFSRHS0uDbjAmnDrpuhVjJtst4ynjIhkIpWC7Wd93AiYCpnMd-USM&Inpu
          t.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 13:48:06.283 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 13:48:06.285 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:48:06.288 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:48:06.307 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 13:48:06.351 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:48:06.402 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 13:48:11.284 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 13:50:05.111 -04:00 [INF] Starting host...
2020-09-01 13:50:06.813 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:50:07.703 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:50:07.898 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:50:07.965 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:50:08.316 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:50:08.665 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:50:08.671 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:50:08.831 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:50:08.832 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:50:08.871 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:50:08.991 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:50:09.019 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:50:09.426 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:50:09.428 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:50:09.429 -04:00 [INF] Hosting environment: Development
2020-09-01 13:50:09.430 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:50:12.847 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 13:50:12.879 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk     
     </HEADERS>
</REQUEST>

2020-09-01 13:50:12.985 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:50:13.046 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:50:13.092 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:50:13.109 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 13:50:13.111 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 13:50:13.117 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 13:50:13.118 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:50:13.311 -04:00 [INF] Executed page /Account/Login in 257.0252ms
2020-09-01 13:50:13.313 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:50:13.319 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=
          Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv80aDEC3Re91FPcvSmHgYn7TGO-MCX
          boaggDWuWUbntdEZmbFkF3y-nKmQJREiZLAggWkv79g0JqIKu7DAU6UEjcQcJJPVZLcZNq38nZYHhZq9
          PM1baSJDjLNacBKYmmU8</__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:50:13.337 -04:00 [INF] Request finished in 494.2338ms 200 text/html; charset=utf-8
2020-09-01 13:50:18.376 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 258
2020-09-01 13:50:18.380 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv80aDEC3Re91FPcvSmHgYn7TGO-MCXboaggDWuWUbntdEZmbFkF3y-n
          KmQJREiZLAggWkv79g0JqIKu7DAU6UEjcQcJJPVZLcZNq38nZYHhZq9PM1baSJDjLNacBKYmmU8&Inpu
          t.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 13:50:18.394 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 13:50:18.402 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:50:18.404 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:50:18.433 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 13:50:18.517 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:50:18.603 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 13:50:22.522 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 13:50:33.922 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 13:50:33.925 -04:00 [INF] User logged in.
2020-09-01 13:50:33.928 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 13:50:33.932 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 13:50:33.935 -04:00 [INF] Executed page /Account/Login in 15528.8731ms
2020-09-01 13:50:33.937 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:50:33.942 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=77ADABD06BEAB416DBEB36C4E642CAFD; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv9eXnnlJ8Bzt
          M2agbirVgDs-o2rDQqw5bp3gOjvjQIulWag-hSNsp4Jjspem2KiIORlLsrZw3OCytoTgBFfHGVxukNw1
          pil_UHS2HhF6jBdYqU-0Z675EaPlS8KFpa1UEDhtb5Xq9kfrM58uQzghXmpFHss6jW3CLzMcry360-k6
          GMIfu9RQFwplb06u1wj39M6ZRVLmVDYo1f4mm6WP21Ticblvu4z--cy406QoABWWJUyhoVCdpggWqMQq
          aOGWiwF7U19jPjxtGzMHDjsh8mcygpBbVsYDQjx9pYjOLEVDMe9ylPrfLRy2ZW5gpya2pS31Uj2-SLIN
          TQmw9GRwmA_dpdYuoVcP0r8TfG-bBJtGPnYJN3T7aF-4N1JjnmGMJfftuqiEfxbme4zeuA4iCxg9whig
          5sTiZe1lnndSHaOF9wPVDjEsVt5JRwoa8fO1_uHCANJGPa4XBTKR0YKS4vg9mSUSt0klDWj73bB3s8fg
          66EIhKCREzHdboXfra4Gj036Bwm_TfhP90Rc1_xDydk_MWqqrI-FO3DA_iDtYNm5Oh7GstKAPyDUj5HD
          1Tvtx2SWpJRcQP6abXUjjTZ8zEyCYIC4KQ1Ov9SZ5SiNtPrbjbWGukutOp3PJltp8iLnaP3Gi7bzSD-i
          L2zwS-OTTfEWOpsk36Z7L6HGs-GuKJk9rYU_HWXzCUc9C75ON2CQ1u1-vO5KlLZAnQHG4LwJbwH7YnoT
          5i1NKqLGFCseFNYE9ntW4pfELPkCHO6FiJoc6yZ_UxqsBcQzt-1z6BBnzoHtYadpn-ExeuTb7feNv4-6
          ssTzDUiue3HcsAC65Of8a_uLbO2wb_AZVuRG4e5UPDqWhcxy1uCb454ZkCBpFURo4AJMvTa5AjpxhM0z
          ohhztU9douUqOUYgOrF8WY3llVUD18S-XMej7taYTZLbwy5XKjZ9m1wPZBBxUW4wq8IPit8MSBxwe9Fr
          ymKBWc6hQOf1PAkTVuBNwqA4lEEuE-8r9sttdwMlJxYo4uvrIKCnlPTnQqzD-LH-gGGzXQe4_EUPNcxV
          jwerrXbNfXgOF_RWgWvP5p6aAFbyPxHroT1a2OeSoB7J8ot7g05zzu38wMiRcqT77_rq8Dls4FggaHii
          dVycN675LDbpYywZL3xCfL0MT0pcCeL6TZqrkIBB2lO; path=/; secure; samesite=none; http
          only,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1970 00:00:00 
          GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:50:33.950 -04:00 [INF] Request finished in 15574.3267ms 302 
2020-09-01 13:50:33.952 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 13:50:33.988 -04:00 [INF] Authorization was successful.
2020-09-01 13:50:33.989 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:50:34.002 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:50:34.035 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:50:34.047 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:50:34.058 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:50:34.063 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:50:52.241 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 13:50:52.260 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 13:50:52.265 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:50:52.359 -04:00 [INF] Executed page /Account/Admin/Index in 18355.3956ms
2020-09-01 13:50:52.361 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:50:52.363 -04:00 [INF] Request finished in 18410.944ms 200 text/html; charset=utf-8
2020-09-01 13:52:04.404 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 13:52:04.407 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk,idsrv.session=77ADABD06BEAB416DBEB36C4E6
          42CAFD,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv9eXnnlJ8BztM2a
          gbirVgDs-o2rDQqw5bp3gOjvjQIulWag-hSNsp4Jjspem2KiIORlLsrZw3OCytoTgBFfHGVxukNw1pil
          _UHS2HhF6jBdYqU-0Z675EaPlS8KFpa1UEDhtb5Xq9kfrM58uQzghXmpFHss6jW3CLzMcry360-k6GMI
          fu9RQFwplb06u1wj39M6ZRVLmVDYo1f4mm6WP21Ticblvu4z--cy406QoABWWJUyhoVCdpggWqMQqaOG
          WiwF7U19jPjxtGzMHDjsh8mcygpBbVsYDQjx9pYjOLEVDMe9ylPrfLRy2ZW5gpya2pS31Uj2-SLINTQm
          w9GRwmA_dpdYuoVcP0r8TfG-bBJtGPnYJN3T7aF-4N1JjnmGMJfftuqiEfxbme4zeuA4iCxg9whig5sT
          iZe1lnndSHaOF9wPVDjEsVt5JRwoa8fO1_uHCANJGPa4XBTKR0YKS4vg9mSUSt0klDWj73bB3s8fg66E
          IhKCREzHdboXfra4Gj036Bwm_TfhP90Rc1_xDydk_MWqqrI-FO3DA_iDtYNm5Oh7GstKAPyDUj5HD1Tv
          tx2SWpJRcQP6abXUjjTZ8zEyCYIC4KQ1Ov9SZ5SiNtPrbjbWGukutOp3PJltp8iLnaP3Gi7bzSD-iL2z
          wS-OTTfEWOpsk36Z7L6HGs-GuKJk9rYU_HWXzCUc9C75ON2CQ1u1-vO5KlLZAnQHG4LwJbwH7YnoT5i1
          NKqLGFCseFNYE9ntW4pfELPkCHO6FiJoc6yZ_UxqsBcQzt-1z6BBnzoHtYadpn-ExeuTb7feNv4-6ssT
          zDUiue3HcsAC65Of8a_uLbO2wb_AZVuRG4e5UPDqWhcxy1uCb454ZkCBpFURo4AJMvTa5AjpxhM0zohh
          ztU9douUqOUYgOrF8WY3llVUD18S-XMej7taYTZLbwy5XKjZ9m1wPZBBxUW4wq8IPit8MSBxwe9FrymK
          BWc6hQOf1PAkTVuBNwqA4lEEuE-8r9sttdwMlJxYo4uvrIKCnlPTnQqzD-LH-gGGzXQe4_EUPNcxVjwe
          rrXbNfXgOF_RWgWvP5p6aAFbyPxHroT1a2OeSoB7J8ot7g05zzu38wMiRcqT77_rq8Dls4FggaHiidVy
          cN675LDbpYywZL3xCfL0MT0pcCeL6TZqrkIBB2lO     
     </HEADERS>
</REQUEST>

2020-09-01 13:52:04.414 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:52:04.417 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:52:04.420 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:52:04.423 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 13:52:04.424 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 13:52:04.426 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 13:52:04.427 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:52:04.435 -04:00 [INF] Executed page /Account/Login in 16.0785ms
2020-09-01 13:52:04.438 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:52:04.441 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=
          Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv9g9HNZ95mzSKoc3EvI7PxvFrB8Cax
          nFAudZc3Oo_oOIaP1bg41z2VhxiT5tWBtNfEdbMiIUzT8JpCCJx1Sk2sxAcHiywszrVKkxfqLDDYQFbX
          RtGaljeb6_iYNHv_0WkIm-dTDqulB2Xip_pbTJIeLGCxe3m38jruo6He2B9Od1Q</__RequestVerifi
          cationToken
     </BODY>
</RESPONSE>
2020-09-01 13:52:04.445 -04:00 [INF] Request finished in 40.9222ms 200 text/html; charset=utf-8
2020-09-01 13:52:09.828 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 301
2020-09-01 13:52:09.832 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk,idsrv.session=77ADABD06BEAB416DBEB36C4E6
          42CAFD,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv9eXnnlJ8BztM2a
          gbirVgDs-o2rDQqw5bp3gOjvjQIulWag-hSNsp4Jjspem2KiIORlLsrZw3OCytoTgBFfHGVxukNw1pil
          _UHS2HhF6jBdYqU-0Z675EaPlS8KFpa1UEDhtb5Xq9kfrM58uQzghXmpFHss6jW3CLzMcry360-k6GMI
          fu9RQFwplb06u1wj39M6ZRVLmVDYo1f4mm6WP21Ticblvu4z--cy406QoABWWJUyhoVCdpggWqMQqaOG
          WiwF7U19jPjxtGzMHDjsh8mcygpBbVsYDQjx9pYjOLEVDMe9ylPrfLRy2ZW5gpya2pS31Uj2-SLINTQm
          w9GRwmA_dpdYuoVcP0r8TfG-bBJtGPnYJN3T7aF-4N1JjnmGMJfftuqiEfxbme4zeuA4iCxg9whig5sT
          iZe1lnndSHaOF9wPVDjEsVt5JRwoa8fO1_uHCANJGPa4XBTKR0YKS4vg9mSUSt0klDWj73bB3s8fg66E
          IhKCREzHdboXfra4Gj036Bwm_TfhP90Rc1_xDydk_MWqqrI-FO3DA_iDtYNm5Oh7GstKAPyDUj5HD1Tv
          tx2SWpJRcQP6abXUjjTZ8zEyCYIC4KQ1Ov9SZ5SiNtPrbjbWGukutOp3PJltp8iLnaP3Gi7bzSD-iL2z
          wS-OTTfEWOpsk36Z7L6HGs-GuKJk9rYU_HWXzCUc9C75ON2CQ1u1-vO5KlLZAnQHG4LwJbwH7YnoT5i1
          NKqLGFCseFNYE9ntW4pfELPkCHO6FiJoc6yZ_UxqsBcQzt-1z6BBnzoHtYadpn-ExeuTb7feNv4-6ssT
          zDUiue3HcsAC65Of8a_uLbO2wb_AZVuRG4e5UPDqWhcxy1uCb454ZkCBpFURo4AJMvTa5AjpxhM0zohh
          ztU9douUqOUYgOrF8WY3llVUD18S-XMej7taYTZLbwy5XKjZ9m1wPZBBxUW4wq8IPit8MSBxwe9FrymK
          BWc6hQOf1PAkTVuBNwqA4lEEuE-8r9sttdwMlJxYo4uvrIKCnlPTnQqzD-LH-gGGzXQe4_EUPNcxVjwe
          rrXbNfXgOF_RWgWvP5p6aAFbyPxHroT1a2OeSoB7J8ot7g05zzu38wMiRcqT77_rq8Dls4FggaHiidVy
          cN675LDbpYywZL3xCfL0MT0pcCeL6TZqrkIBB2lO
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv9g9HNZ95mzSKoc3EvI7PxvFrB8CaxnFAudZc3Oo_oOIaP1bg41z2Vh
          xiT5tWBtNfEdbMiIUzT8JpCCJx1Sk2sxAcHiywszrVKkxfqLDDYQFbXRtGaljeb6_iYNHv_0WkIm-dTD
          qulB2Xip_pbTJIeLGCxe3m38jruo6He2B9Od1Q&Input.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 13:52:09.838 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 13:52:09.844 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:52:09.845 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:52:09.850 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 13:52:09.860 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:52:09.867 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 13:52:12.656 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 13:52:12.664 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 13:52:12.665 -04:00 [INF] User logged in.
2020-09-01 13:52:12.666 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 13:52:12.668 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 13:52:12.673 -04:00 [INF] Executed page /Account/Login in 2825.4325ms
2020-09-01 13:52:12.674 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:52:12.676 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=CF61AE17372190F11757BC72FC9B9DDD; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv-iyYKm8PG31
          TBQxDJ4vM2eYPJyGgt7I0UVJxv9HXYWYm6uslRr0FvKxtn3CBGHOdrVdm4eEQNftULaNzjI8K0Nhw_7b
          xAxs_c6wDODQk1e8xud-AlfHgxcPffm-hDEXUq0gboeN_n08oxt6Ro3CHdJLTMgMyVjv9VMJZl6-c9OF
          4dYCIzBfl3cAMP1mo9_NTJXTvpk4XP5apmQmjFWSuRKudK-94VCzE_tQNcERV74Wt4lPS-a6TS1TorLQ
          bHvBmbhdBbf7T-qyDgn505xjkMoPo3b5Fu2zrP3W0WBb4nocLMFBMvAgEMxHJ7gREg8kwvJ4L5zklrZs
          k8tZHgOGipTAG08Hj2p1dNgiiR6K8dEzpabA54tt1OJheJRq6a3_HgX_dAcyHM47vFc00Rg7-mIcyVLZ
          UxtC8NbKCPbqPOHF9VcVtmQTvtCqSfP1O4JIsWrXqr7YMrNVX4qmqOeIpzJ6ro_Sbwro1GwDJHpCm5bd
          qS1Nkj2OHipYumhSB52tJu82JaxI750-UOghsD9WTyhHWOFtUT_g3Xv90K-LucQvn4SCJCSBhjo12XoF
          qPOFpp_iABOFH55LyKCtIuM51-Ow7eJjKpEW_nH_DRRclRzfSgETgP5_gYZaSeZ8KEWPnhqqAC4wwdTf
          Pk0f_Sv8alVX9EIA8B_qTbLZ0jSBu4DGk-2S3YEYOdUIvBPZw-fA77ClccfzxL_JiPXxQ4ra36oBdbIs
          PbEBz0H36itREg2rCdZiGgAX7oDGWc4ZuTdfII0Iq7niCpqVxXEPfVgHxtsou_NglKwSRkFJAWN3DfOq
          oWh8N4kVZ9CtlBtTK_a-EJa1sHTxDdlo4x_GQnBJPpkhtbx-Wd7fSzkIDKGGpwlzQErFdNipGDP5_kmS
          DFUDCpiYA1Qzouu2Oe6QgpuXx03gWKF50Mlg9G8cqEVH4ADqi1RTUR8KoSpgy-XFwqkPe2aqOSoM8xyC
          lpyFlDz-2aR3rGLhLZAD6M8RdUCJX12gHZnmHjoDD87hUQK4samdhl6EzVKoO2Ibfl14jOcmQGN39KmK
          ux20TKi4PcfJdGawXm2wjWLsgC23qDA3Pnb2zV3Xm82gRf2TTmYZ4A0LlKStaELqAp85BXm4ezmyqiuR
          quXoOicEaXYipqq21Ktb8IGjEzsWwrRX6vCgt2ZH0zE; path=/; secure; samesite=none; http
          only,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1970 00:00:00 
          GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:52:12.680 -04:00 [INF] Request finished in 2852.558ms 302 
2020-09-01 13:52:12.684 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 13:52:12.689 -04:00 [INF] Authorization was successful.
2020-09-01 13:52:12.690 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:52:12.691 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:52:12.693 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:52:12.696 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:52:12.699 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:52:12.702 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:53:08.210 -04:00 [INF] Starting host...
2020-09-01 13:53:10.003 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:53:10.875 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:53:11.070 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:53:11.144 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:53:11.506 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:53:11.882 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:53:11.888 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:53:12.040 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:53:12.041 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:53:12.084 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:53:12.211 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:53:12.243 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:53:12.662 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:53:12.665 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:53:12.665 -04:00 [INF] Hosting environment: Development
2020-09-01 13:53:12.666 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:53:21.546 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 13:53:21.708 -04:00 [INF] Authorization was successful.
2020-09-01 13:53:21.710 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:53:21.773 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:53:21.859 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:53:21.906 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:53:21.928 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:53:21.955 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:54:27.622 -04:00 [INF] Starting host...
2020-09-01 13:54:29.433 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:54:30.298 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:54:30.494 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:54:30.563 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:54:30.920 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:54:31.266 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:54:31.274 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:54:31.428 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:54:31.429 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:54:31.468 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:54:31.592 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:54:31.621 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:54:32.021 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:54:32.024 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:54:32.024 -04:00 [INF] Hosting environment: Development
2020-09-01 13:54:32.025 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:54:48.503 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 13:54:48.538 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk,idsrv.session=CF61AE17372190F11757BC72FC
          9B9DDD,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv-iyYKm8PG31TBQ
          xDJ4vM2eYPJyGgt7I0UVJxv9HXYWYm6uslRr0FvKxtn3CBGHOdrVdm4eEQNftULaNzjI8K0Nhw_7bxAx
          s_c6wDODQk1e8xud-AlfHgxcPffm-hDEXUq0gboeN_n08oxt6Ro3CHdJLTMgMyVjv9VMJZl6-c9OF4dY
          CIzBfl3cAMP1mo9_NTJXTvpk4XP5apmQmjFWSuRKudK-94VCzE_tQNcERV74Wt4lPS-a6TS1TorLQbHv
          BmbhdBbf7T-qyDgn505xjkMoPo3b5Fu2zrP3W0WBb4nocLMFBMvAgEMxHJ7gREg8kwvJ4L5zklrZsk8t
          ZHgOGipTAG08Hj2p1dNgiiR6K8dEzpabA54tt1OJheJRq6a3_HgX_dAcyHM47vFc00Rg7-mIcyVLZUxt
          C8NbKCPbqPOHF9VcVtmQTvtCqSfP1O4JIsWrXqr7YMrNVX4qmqOeIpzJ6ro_Sbwro1GwDJHpCm5bdqS1
          Nkj2OHipYumhSB52tJu82JaxI750-UOghsD9WTyhHWOFtUT_g3Xv90K-LucQvn4SCJCSBhjo12XoFqPO
          Fpp_iABOFH55LyKCtIuM51-Ow7eJjKpEW_nH_DRRclRzfSgETgP5_gYZaSeZ8KEWPnhqqAC4wwdTfPk0
          f_Sv8alVX9EIA8B_qTbLZ0jSBu4DGk-2S3YEYOdUIvBPZw-fA77ClccfzxL_JiPXxQ4ra36oBdbIsPbE
          Bz0H36itREg2rCdZiGgAX7oDGWc4ZuTdfII0Iq7niCpqVxXEPfVgHxtsou_NglKwSRkFJAWN3DfOqoWh
          8N4kVZ9CtlBtTK_a-EJa1sHTxDdlo4x_GQnBJPpkhtbx-Wd7fSzkIDKGGpwlzQErFdNipGDP5_kmSDFU
          DCpiYA1Qzouu2Oe6QgpuXx03gWKF50Mlg9G8cqEVH4ADqi1RTUR8KoSpgy-XFwqkPe2aqOSoM8xyClpy
          FlDz-2aR3rGLhLZAD6M8RdUCJX12gHZnmHjoDD87hUQK4samdhl6EzVKoO2Ibfl14jOcmQGN39KmKux2
          0TKi4PcfJdGawXm2wjWLsgC23qDA3Pnb2zV3Xm82gRf2TTmYZ4A0LlKStaELqAp85BXm4ezmyqiuRquX
          oOicEaXYipqq21Ktb8IGjEzsWwrRX6vCgt2ZH0zE     
     </HEADERS>
</REQUEST>

2020-09-01 13:54:48.667 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:54:48.722 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:54:48.753 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:54:48.767 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 13:54:48.770 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 13:54:48.775 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 13:54:48.777 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:54:48.961 -04:00 [INF] Executed page /Account/Login in 232.5489ms
2020-09-01 13:54:48.964 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:54:48.968 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=
          Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv-VwPTt-gWSqqHGtTw7dTu7GXS9evF
          _E5X7iLtkzrUbVL-E5PmecRZznQx_oz7xJ0l-GpaI4KBZVfwlpg198qewsArINqsNR9RW8Cnv5gzjIrw
          cedughWDb_DNul4nZpNFcWyLPLRXBvyiin2yw90UbzlqCrb1_XTRzNwEmCmw5Ew</__RequestVerifi
          cationToken
     </BODY>
</RESPONSE>
2020-09-01 13:54:48.993 -04:00 [INF] Request finished in 493.5354ms 200 text/html; charset=utf-8
2020-09-01 13:54:53.631 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 301
2020-09-01 13:54:53.636 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk,idsrv.session=CF61AE17372190F11757BC72FC
          9B9DDD,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv-iyYKm8PG31TBQ
          xDJ4vM2eYPJyGgt7I0UVJxv9HXYWYm6uslRr0FvKxtn3CBGHOdrVdm4eEQNftULaNzjI8K0Nhw_7bxAx
          s_c6wDODQk1e8xud-AlfHgxcPffm-hDEXUq0gboeN_n08oxt6Ro3CHdJLTMgMyVjv9VMJZl6-c9OF4dY
          CIzBfl3cAMP1mo9_NTJXTvpk4XP5apmQmjFWSuRKudK-94VCzE_tQNcERV74Wt4lPS-a6TS1TorLQbHv
          BmbhdBbf7T-qyDgn505xjkMoPo3b5Fu2zrP3W0WBb4nocLMFBMvAgEMxHJ7gREg8kwvJ4L5zklrZsk8t
          ZHgOGipTAG08Hj2p1dNgiiR6K8dEzpabA54tt1OJheJRq6a3_HgX_dAcyHM47vFc00Rg7-mIcyVLZUxt
          C8NbKCPbqPOHF9VcVtmQTvtCqSfP1O4JIsWrXqr7YMrNVX4qmqOeIpzJ6ro_Sbwro1GwDJHpCm5bdqS1
          Nkj2OHipYumhSB52tJu82JaxI750-UOghsD9WTyhHWOFtUT_g3Xv90K-LucQvn4SCJCSBhjo12XoFqPO
          Fpp_iABOFH55LyKCtIuM51-Ow7eJjKpEW_nH_DRRclRzfSgETgP5_gYZaSeZ8KEWPnhqqAC4wwdTfPk0
          f_Sv8alVX9EIA8B_qTbLZ0jSBu4DGk-2S3YEYOdUIvBPZw-fA77ClccfzxL_JiPXxQ4ra36oBdbIsPbE
          Bz0H36itREg2rCdZiGgAX7oDGWc4ZuTdfII0Iq7niCpqVxXEPfVgHxtsou_NglKwSRkFJAWN3DfOqoWh
          8N4kVZ9CtlBtTK_a-EJa1sHTxDdlo4x_GQnBJPpkhtbx-Wd7fSzkIDKGGpwlzQErFdNipGDP5_kmSDFU
          DCpiYA1Qzouu2Oe6QgpuXx03gWKF50Mlg9G8cqEVH4ADqi1RTUR8KoSpgy-XFwqkPe2aqOSoM8xyClpy
          FlDz-2aR3rGLhLZAD6M8RdUCJX12gHZnmHjoDD87hUQK4samdhl6EzVKoO2Ibfl14jOcmQGN39KmKux2
          0TKi4PcfJdGawXm2wjWLsgC23qDA3Pnb2zV3Xm82gRf2TTmYZ4A0LlKStaELqAp85BXm4ezmyqiuRquX
          oOicEaXYipqq21Ktb8IGjEzsWwrRX6vCgt2ZH0zE
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv-VwPTt-gWSqqHGtTw7dTu7GXS9evF_E5X7iLtkzrUbVL-E5PmecRZz
          nQx_oz7xJ0l-GpaI4KBZVfwlpg198qewsArINqsNR9RW8Cnv5gzjIrwcedughWDb_DNul4nZpNFcWyLP
          LRXBvyiin2yw90UbzlqCrb1_XTRzNwEmCmw5Ew&Input.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 13:54:53.652 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 13:54:53.661 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:54:53.663 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:54:53.685 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 13:54:53.818 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:54:53.938 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 13:54:56.848 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 13:54:56.868 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 13:54:56.872 -04:00 [INF] User logged in.
2020-09-01 13:54:56.875 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 13:54:56.880 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 13:54:56.882 -04:00 [INF] Executed page /Account/Login in 3217.8523ms
2020-09-01 13:54:56.884 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:54:56.890 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=85DACCB8EE42DB6DF00AC61EE4352A0B; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv9hk5GKhac2I
          BVlx0tTU8cTyvdsqfu9MkpGIR5xBA-ViSYeJOTdqva26oywslkfCMfN8rkXSdTX9HAfY7bC98f5QGhuU
          5tma8p5Ysu_OsFQSfcuUYKxvbmejZNckEdaUGTqCROiH-8DAW-OiqrHYKYE8wjTKy6g1diBqf7VAgCSH
          pdpzVGY-y32VTaletXpXfoALwZScKuMIpYB_fNSPXzWRddsi0NF8b2BnqQCdbmnZFmBkT8QZuFgN_8kT
          u_RQmN2Ckc4vQ0yBDpyul3dK8JGSfItsi_sEpIrrolLMbXU1_6a7eilF76n5_vPBkTPap1ife5L4i80X
          7FtzA_03rfA37HMW8IBKIGart8zgJYCHeYut9_5ukjCBY3_XwMbNuh7uBoBeGkaTHjqCPL8y8wocQDBX
          5CNDHk1bIvTqlRKVkehbm2U6fU0Y1gOvm5jy6oWtvKvk1mlys_AN7NXKmDsnKx2wF0SpLrRBBHBm8deS
          zjo4TEf7YKpDjNb5OQGn0DMffew9y-jsmVpLRANat0PSYLMnqaUaYLciBIg6CgcrQrgIlQwXDRDxBcbl
          IWZmTRN3-gqo7pJWMSO-hJ_C2epM5be9SE1n-Xhuzfuf1ErJcToH-6SgkpzdaEhP5GPM4tu-IVH0vgbP
          Q6SlnC7MoiqH57qk2WKz-Rhhwz_UBa6KJFskyLHWDkgJ9H4Gn_gEK_PPKe2kJmkk-0VKr3KP3r9O3kjZ
          6zM_zGkzpWpZbBFSvj8gi9TyDY9YvaN-qZ5H9vOd4DPyHpzLthfesJzPg0dKzDChJswDQQHVTSutxQvb
          Va3WDGmJlC5jd5EI80aoq4ZG6gBRsHUhqlMvlDwHbWnaHGlAxw4jwqVOwxut6a59fRPLIlqSVoBxJYty
          NOI4PakZDLr7ew8IJDN52Mvk61nvKEkhHvaJLL2u_UyV3z51Ycu29NuQ4Fe7Yk4vwWZPR93yhoGTUYt2
          ubiF5S1uyt4C9yceCaw4pcl3ShyziXnY4m0RlNV3KjxoZ-mIOGkWgjZ6hkpFEZ8WtjoMr-jGOwXMC_bL
          lPeiTHvqi7g7TEMhDcnIPY9FQNbQssiLN2muoKUajn_h3UZO-303ihFtBmYvQm0rl4yh-lAYwLEDYMXc
          nhyR9UGVInMIsOOeyIZbr6rnLvkV5rqr7zjAUsShdUq; path=/; secure; samesite=none; http
          only,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1970 00:00:00 
          GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:54:56.897 -04:00 [INF] Request finished in 3266.1785ms 302 
2020-09-01 13:54:56.899 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 13:54:56.933 -04:00 [INF] Authorization was successful.
2020-09-01 13:54:56.934 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:54:56.947 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:54:56.980 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:54:56.989 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:54:56.999 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:54:57.004 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:56:54.532 -04:00 [INF] Starting host...
2020-09-01 13:56:56.298 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:56:57.163 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:56:57.354 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:56:57.424 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:56:57.777 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:56:58.138 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:56:58.145 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:56:58.297 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:56:58.298 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:56:58.340 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:56:58.462 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:56:58.494 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:56:58.895 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:56:58.897 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:56:58.898 -04:00 [INF] Hosting environment: Development
2020-09-01 13:56:58.899 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:56:59.567 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 13:56:59.602 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk,idsrv.session=85DACCB8EE42DB6DF00AC61EE4
          352A0B,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv9hk5GKhac2IBVl
          x0tTU8cTyvdsqfu9MkpGIR5xBA-ViSYeJOTdqva26oywslkfCMfN8rkXSdTX9HAfY7bC98f5QGhuU5tm
          a8p5Ysu_OsFQSfcuUYKxvbmejZNckEdaUGTqCROiH-8DAW-OiqrHYKYE8wjTKy6g1diBqf7VAgCSHpdp
          zVGY-y32VTaletXpXfoALwZScKuMIpYB_fNSPXzWRddsi0NF8b2BnqQCdbmnZFmBkT8QZuFgN_8kTu_R
          QmN2Ckc4vQ0yBDpyul3dK8JGSfItsi_sEpIrrolLMbXU1_6a7eilF76n5_vPBkTPap1ife5L4i80X7Ft
          zA_03rfA37HMW8IBKIGart8zgJYCHeYut9_5ukjCBY3_XwMbNuh7uBoBeGkaTHjqCPL8y8wocQDBX5CN
          DHk1bIvTqlRKVkehbm2U6fU0Y1gOvm5jy6oWtvKvk1mlys_AN7NXKmDsnKx2wF0SpLrRBBHBm8deSzjo
          4TEf7YKpDjNb5OQGn0DMffew9y-jsmVpLRANat0PSYLMnqaUaYLciBIg6CgcrQrgIlQwXDRDxBcblIWZ
          mTRN3-gqo7pJWMSO-hJ_C2epM5be9SE1n-Xhuzfuf1ErJcToH-6SgkpzdaEhP5GPM4tu-IVH0vgbPQ6S
          lnC7MoiqH57qk2WKz-Rhhwz_UBa6KJFskyLHWDkgJ9H4Gn_gEK_PPKe2kJmkk-0VKr3KP3r9O3kjZ6zM
          _zGkzpWpZbBFSvj8gi9TyDY9YvaN-qZ5H9vOd4DPyHpzLthfesJzPg0dKzDChJswDQQHVTSutxQvbVa3
          WDGmJlC5jd5EI80aoq4ZG6gBRsHUhqlMvlDwHbWnaHGlAxw4jwqVOwxut6a59fRPLIlqSVoBxJYtyNOI
          4PakZDLr7ew8IJDN52Mvk61nvKEkhHvaJLL2u_UyV3z51Ycu29NuQ4Fe7Yk4vwWZPR93yhoGTUYt2ubi
          F5S1uyt4C9yceCaw4pcl3ShyziXnY4m0RlNV3KjxoZ-mIOGkWgjZ6hkpFEZ8WtjoMr-jGOwXMC_bLlPe
          iTHvqi7g7TEMhDcnIPY9FQNbQssiLN2muoKUajn_h3UZO-303ihFtBmYvQm0rl4yh-lAYwLEDYMXcnhy
          R9UGVInMIsOOeyIZbr6rnLvkV5rqr7zjAUsShdUq     
     </HEADERS>
</REQUEST>

2020-09-01 13:56:59.740 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:56:59.797 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:56:59.827 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:56:59.842 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 13:56:59.844 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 13:56:59.850 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 13:56:59.851 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:57:00.050 -04:00 [INF] Executed page /Account/Login in 246.4681ms
2020-09-01 13:57:00.053 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:57:00.057 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=
          Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv8RKJSkpkGl_x7FGfejfvx4WuYQ_Wm
          l4KfQLFjDYZJZy0dt611g_DOxTZ2dIBOpMgTcnAzSnsYp8JTuP-mU_x_fWDdgGcL7ghZWLzgAjhgZCDo
          YVmIpuQszqOfqnWCxb22Qu8aqvlk8TOHoAMbXARgD-r72HfsCLlmSEns4c6c9eg</__RequestVerifi
          cationToken
     </BODY>
</RESPONSE>
2020-09-01 13:57:00.077 -04:00 [INF] Request finished in 513.548ms 200 text/html; charset=utf-8
2020-09-01 13:57:05.478 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 301
2020-09-01 13:57:05.482 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk,idsrv.session=85DACCB8EE42DB6DF00AC61EE4
          352A0B,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv9hk5GKhac2IBVl
          x0tTU8cTyvdsqfu9MkpGIR5xBA-ViSYeJOTdqva26oywslkfCMfN8rkXSdTX9HAfY7bC98f5QGhuU5tm
          a8p5Ysu_OsFQSfcuUYKxvbmejZNckEdaUGTqCROiH-8DAW-OiqrHYKYE8wjTKy6g1diBqf7VAgCSHpdp
          zVGY-y32VTaletXpXfoALwZScKuMIpYB_fNSPXzWRddsi0NF8b2BnqQCdbmnZFmBkT8QZuFgN_8kTu_R
          QmN2Ckc4vQ0yBDpyul3dK8JGSfItsi_sEpIrrolLMbXU1_6a7eilF76n5_vPBkTPap1ife5L4i80X7Ft
          zA_03rfA37HMW8IBKIGart8zgJYCHeYut9_5ukjCBY3_XwMbNuh7uBoBeGkaTHjqCPL8y8wocQDBX5CN
          DHk1bIvTqlRKVkehbm2U6fU0Y1gOvm5jy6oWtvKvk1mlys_AN7NXKmDsnKx2wF0SpLrRBBHBm8deSzjo
          4TEf7YKpDjNb5OQGn0DMffew9y-jsmVpLRANat0PSYLMnqaUaYLciBIg6CgcrQrgIlQwXDRDxBcblIWZ
          mTRN3-gqo7pJWMSO-hJ_C2epM5be9SE1n-Xhuzfuf1ErJcToH-6SgkpzdaEhP5GPM4tu-IVH0vgbPQ6S
          lnC7MoiqH57qk2WKz-Rhhwz_UBa6KJFskyLHWDkgJ9H4Gn_gEK_PPKe2kJmkk-0VKr3KP3r9O3kjZ6zM
          _zGkzpWpZbBFSvj8gi9TyDY9YvaN-qZ5H9vOd4DPyHpzLthfesJzPg0dKzDChJswDQQHVTSutxQvbVa3
          WDGmJlC5jd5EI80aoq4ZG6gBRsHUhqlMvlDwHbWnaHGlAxw4jwqVOwxut6a59fRPLIlqSVoBxJYtyNOI
          4PakZDLr7ew8IJDN52Mvk61nvKEkhHvaJLL2u_UyV3z51Ycu29NuQ4Fe7Yk4vwWZPR93yhoGTUYt2ubi
          F5S1uyt4C9yceCaw4pcl3ShyziXnY4m0RlNV3KjxoZ-mIOGkWgjZ6hkpFEZ8WtjoMr-jGOwXMC_bLlPe
          iTHvqi7g7TEMhDcnIPY9FQNbQssiLN2muoKUajn_h3UZO-303ihFtBmYvQm0rl4yh-lAYwLEDYMXcnhy
          R9UGVInMIsOOeyIZbr6rnLvkV5rqr7zjAUsShdUq
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv8RKJSkpkGl_x7FGfejfvx4WuYQ_Wml4KfQLFjDYZJZy0dt611g_DOx
          TZ2dIBOpMgTcnAzSnsYp8JTuP-mU_x_fWDdgGcL7ghZWLzgAjhgZCDoYVmIpuQszqOfqnWCxb22Qu8aq
          vlk8TOHoAMbXARgD-r72HfsCLlmSEns4c6c9eg&Input.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 13:57:05.499 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 13:57:05.508 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:57:05.510 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:57:05.532 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 13:57:05.637 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:57:05.723 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 13:57:11.103 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 13:57:11.124 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 13:57:11.128 -04:00 [INF] User logged in.
2020-09-01 13:57:11.131 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 13:57:11.135 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 13:57:11.138 -04:00 [INF] Executed page /Account/Login in 5626.1234ms
2020-09-01 13:57:11.140 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:57:11.145 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=4F416A894838FD204681A13B39A3201E; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv-8v0feLT07Q
          1aV52wzJR8kuOqU8C3bl2QdzMvtrrQk3ZzfHz3hH5--8LY_P_mYIVqF8SXWvgEQYUc6FBw_knn54FYg6
          oZKHVrbS8lV_gnshw5mM29DYqCyh4_G6okwlE05RyiE01rcR38i2DlUm23KeSUrgfYQHclgH9kWNiO63
          KfZkoGA5H0r9NfXWWhflkX8OtWiEzJznbCMAyA3boYVYsH8cDDxdH2f3sqojpX7EGrhp2Nd9lZ41sb-x
          jj8yAeWr40L0TxJUX4P_FBKDYf6IMnpj3HMELSwS-7ByEGYeGTbDM_wgD9WGiP-um_UuUYAKgkmJQwey
          qcPBmLxl6DtJPWei-RHWYNDsrIJZHfqIb31CBPC603opC_wmaq4cVczNh68YeTJj-D9DMxox7_5e1XQP
          yNx8t6gkuQLb3wKjxgTfYI0Nb-PIg4B3iGKlrK3J0r6-S_PGTJwCsFUacoepcuRIajKnXnkeCLSCsmLz
          3TIUcNvXXo5lL28G-kPDEbyB3jk8esrK6mdAsJf7rSHLwZuMZsQmcjqJvSNktK3_B18XGaL3LQjSuicN
          sLtCe0iLin9mNLXmNZ-2yKi-3nDXxPwKtUZRmdBqx9PSV56TASYw3-gkse1BJJUja-_U2PUSUWvEMuHb
          -KiINqZekX7hpr-7lM8zdPnwI8p9tTlUS8bghYOESwZtzIZfX8SNNXfvGn2UVyjuBsCKGrBAQV7BKPH8
          jp938XBuMleqj1hiBQSnCxSCg0pMhbZ1o0BwstxoBj44uLHBF9kCBLS-j828mOPRJv69bGF9cvQGU-KE
          gE0JbjHhs_bQytorDZ1mQ67w583qDbhIuqlA1dKZJkva50An4DHDgUNiV20-VE28NsvcLdHuh5npWnPB
          KgYgCcmDNpiYCFp-SQU4QS8N7-4xQhaL0lbbWSRiQGL-dGEhWzNG07MEpJcfwVIIT4hV1_uTjMA3_uzw
          uRVxbpmIDfhY7w2b7trHRrf3QXOy3Gc21c4SL7thgwUZdyeFMqj6j2dhJA6E_CjBZw8srbmP-zPB_nie
          KOWYgkHBHPgULrLHhDKhAPh90hYtxlRbVS4EwilzUlr89IxnkEUomfUZlxuxYqH-fdQK8ilW93lOe1UM
          PC6w3aCvR_21z4PeaBHb9jJgjKQA2s3hcERrGXxBATs; path=/; secure; samesite=none; http
          only,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1970 00:00:00 
          GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:57:11.152 -04:00 [INF] Request finished in 5675.3854ms 302 
2020-09-01 13:57:11.154 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 13:57:11.191 -04:00 [INF] Authorization was successful.
2020-09-01 13:57:11.192 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:57:11.204 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:57:11.238 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:57:11.247 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:57:11.257 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:57:11.262 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:57:16.665 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 13:57:16.684 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 13:57:16.690 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:57:16.768 -04:00 [INF] Executed page /Account/Admin/Index in 5562.1338ms
2020-09-01 13:57:16.770 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:57:16.772 -04:00 [INF] Request finished in 5618.0499ms 200 text/html; charset=utf-8
2020-09-01 13:58:35.766 -04:00 [INF] Starting host...
2020-09-01 13:58:37.614 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 13:58:38.528 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 13:58:38.726 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 13:58:38.796 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 13:58:39.148 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 13:58:39.495 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 13:58:39.502 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 13:58:39.653 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 13:58:39.654 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 13:58:39.699 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 13:58:39.812 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 13:58:39.844 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 13:58:40.242 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 13:58:40.244 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 13:58:40.245 -04:00 [INF] Hosting environment: Development
2020-09-01 13:58:40.246 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 13:58:41.865 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 13:58:41.902 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk,idsrv.session=4F416A894838FD204681A13B39
          A3201E,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv-8v0feLT07Q1aV
          52wzJR8kuOqU8C3bl2QdzMvtrrQk3ZzfHz3hH5--8LY_P_mYIVqF8SXWvgEQYUc6FBw_knn54FYg6oZK
          HVrbS8lV_gnshw5mM29DYqCyh4_G6okwlE05RyiE01rcR38i2DlUm23KeSUrgfYQHclgH9kWNiO63KfZ
          koGA5H0r9NfXWWhflkX8OtWiEzJznbCMAyA3boYVYsH8cDDxdH2f3sqojpX7EGrhp2Nd9lZ41sb-xjj8
          yAeWr40L0TxJUX4P_FBKDYf6IMnpj3HMELSwS-7ByEGYeGTbDM_wgD9WGiP-um_UuUYAKgkmJQweyqcP
          BmLxl6DtJPWei-RHWYNDsrIJZHfqIb31CBPC603opC_wmaq4cVczNh68YeTJj-D9DMxox7_5e1XQPyNx
          8t6gkuQLb3wKjxgTfYI0Nb-PIg4B3iGKlrK3J0r6-S_PGTJwCsFUacoepcuRIajKnXnkeCLSCsmLz3TI
          UcNvXXo5lL28G-kPDEbyB3jk8esrK6mdAsJf7rSHLwZuMZsQmcjqJvSNktK3_B18XGaL3LQjSuicNsLt
          Ce0iLin9mNLXmNZ-2yKi-3nDXxPwKtUZRmdBqx9PSV56TASYw3-gkse1BJJUja-_U2PUSUWvEMuHb-Ki
          INqZekX7hpr-7lM8zdPnwI8p9tTlUS8bghYOESwZtzIZfX8SNNXfvGn2UVyjuBsCKGrBAQV7BKPH8jp9
          38XBuMleqj1hiBQSnCxSCg0pMhbZ1o0BwstxoBj44uLHBF9kCBLS-j828mOPRJv69bGF9cvQGU-KEgE0
          JbjHhs_bQytorDZ1mQ67w583qDbhIuqlA1dKZJkva50An4DHDgUNiV20-VE28NsvcLdHuh5npWnPBKgY
          gCcmDNpiYCFp-SQU4QS8N7-4xQhaL0lbbWSRiQGL-dGEhWzNG07MEpJcfwVIIT4hV1_uTjMA3_uzwuRV
          xbpmIDfhY7w2b7trHRrf3QXOy3Gc21c4SL7thgwUZdyeFMqj6j2dhJA6E_CjBZw8srbmP-zPB_nieKOW
          YgkHBHPgULrLHhDKhAPh90hYtxlRbVS4EwilzUlr89IxnkEUomfUZlxuxYqH-fdQK8ilW93lOe1UMPC6
          w3aCvR_21z4PeaBHb9jJgjKQA2s3hcERrGXxBATs     
     </HEADERS>
</REQUEST>

2020-09-01 13:58:42.030 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:58:42.087 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:58:42.120 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:58:42.136 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 13:58:42.138 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 13:58:42.144 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 13:58:42.146 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:58:42.334 -04:00 [INF] Executed page /Account/Login in 238.7712ms
2020-09-01 13:58:42.337 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:58:42.342 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=
          Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv9G740NUJQeydfNqQ9cIyw8MeAuKEA
          MfPwyvMrx-areHFxAm3ew6BWBBuZkIN21-OfjYk19qzoMlwH-iL_hZWSbDHSGTJlHbxFReLOxbbhs9i0
          -PD7O3QlfnJbD0N1OzAu8ipDbUj-PXbIPgTxxPhED3nXxoowmiDe3Qkybs7sAGA</__RequestVerifi
          cationToken
     </BODY>
</RESPONSE>
2020-09-01 13:58:42.361 -04:00 [INF] Request finished in 500.5426ms 200 text/html; charset=utf-8
2020-09-01 13:58:47.050 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 301
2020-09-01 13:58:47.057 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9Lm_DPdlhH
          XYMdKIJFYp_kIqw8H6CBOjk2i74fYziRvio0vu4Z4BrAQB5FD1ODegv7T_oMOVE1tjaoL6cNtKpgeW-Y
          XZb1fAjUgwM8BonUJLRQI4iKrmdU-g7UqSvQdnk,idsrv.session=4F416A894838FD204681A13B39
          A3201E,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv-8v0feLT07Q1aV
          52wzJR8kuOqU8C3bl2QdzMvtrrQk3ZzfHz3hH5--8LY_P_mYIVqF8SXWvgEQYUc6FBw_knn54FYg6oZK
          HVrbS8lV_gnshw5mM29DYqCyh4_G6okwlE05RyiE01rcR38i2DlUm23KeSUrgfYQHclgH9kWNiO63KfZ
          koGA5H0r9NfXWWhflkX8OtWiEzJznbCMAyA3boYVYsH8cDDxdH2f3sqojpX7EGrhp2Nd9lZ41sb-xjj8
          yAeWr40L0TxJUX4P_FBKDYf6IMnpj3HMELSwS-7ByEGYeGTbDM_wgD9WGiP-um_UuUYAKgkmJQweyqcP
          BmLxl6DtJPWei-RHWYNDsrIJZHfqIb31CBPC603opC_wmaq4cVczNh68YeTJj-D9DMxox7_5e1XQPyNx
          8t6gkuQLb3wKjxgTfYI0Nb-PIg4B3iGKlrK3J0r6-S_PGTJwCsFUacoepcuRIajKnXnkeCLSCsmLz3TI
          UcNvXXo5lL28G-kPDEbyB3jk8esrK6mdAsJf7rSHLwZuMZsQmcjqJvSNktK3_B18XGaL3LQjSuicNsLt
          Ce0iLin9mNLXmNZ-2yKi-3nDXxPwKtUZRmdBqx9PSV56TASYw3-gkse1BJJUja-_U2PUSUWvEMuHb-Ki
          INqZekX7hpr-7lM8zdPnwI8p9tTlUS8bghYOESwZtzIZfX8SNNXfvGn2UVyjuBsCKGrBAQV7BKPH8jp9
          38XBuMleqj1hiBQSnCxSCg0pMhbZ1o0BwstxoBj44uLHBF9kCBLS-j828mOPRJv69bGF9cvQGU-KEgE0
          JbjHhs_bQytorDZ1mQ67w583qDbhIuqlA1dKZJkva50An4DHDgUNiV20-VE28NsvcLdHuh5npWnPBKgY
          gCcmDNpiYCFp-SQU4QS8N7-4xQhaL0lbbWSRiQGL-dGEhWzNG07MEpJcfwVIIT4hV1_uTjMA3_uzwuRV
          xbpmIDfhY7w2b7trHRrf3QXOy3Gc21c4SL7thgwUZdyeFMqj6j2dhJA6E_CjBZw8srbmP-zPB_nieKOW
          YgkHBHPgULrLHhDKhAPh90hYtxlRbVS4EwilzUlr89IxnkEUomfUZlxuxYqH-fdQK8ilW93lOe1UMPC6
          w3aCvR_21z4PeaBHb9jJgjKQA2s3hcERrGXxBATs
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv9G740NUJQeydfNqQ9cIyw8MeAuKEAMfPwyvMrx-areHFxAm3ew6BWB
          BuZkIN21-OfjYk19qzoMlwH-iL_hZWSbDHSGTJlHbxFReLOxbbhs9i0-PD7O3QlfnJbD0N1OzAu8ipDb
          Uj-PXbIPgTxxPhED3nXxoowmiDe3Qkybs7sAGA&Input.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 13:58:47.077 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 13:58:47.086 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 13:58:47.089 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 13:58:47.111 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 13:58:47.200 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:58:47.290 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 13:58:47.400 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 13:58:47.423 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 13:58:47.426 -04:00 [INF] User logged in.
2020-09-01 13:58:47.428 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 13:58:47.433 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 13:58:47.435 -04:00 [INF] Executed page /Account/Login in 344.6079ms
2020-09-01 13:58:47.437 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 13:58:47.442 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=4BD042A5B5815BA3391F5556995267CD; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv87SKA7irx3K
          W6lGUoTGM9beWXTpahrHiKz7KUPEwqG40xARXeY4PYa4sPwmXcsjLTXzmtJtynaklfQaIFzPrD-26QwF
          Q7NWkEkYGQ6Ws0h1xl5tHO9GLUDRobewz2kOWJOeb0M9TqK0i2jw2wILLJLbjOiwkMehkPmfe2c1yR4w
          lr7aIqC6lt6Dd1DI1ZY7yfLhqfN3pS12j46WV84I6ZeVjw5LEP63Cc4JHzIDhaNgib6G_igByNkQWOqn
          P_13uJISzaJa_CZev6DidAKd_Sbk5lk11H8pEVmP9N0eokPXu8ABVG2l5L_w07lj6d--xtOx0iazHLhg
          XDJGL3s3F-nl6GrqI54Kk1MDm8M5hgFuFgZB_uUjOhuPxpv1NHZ-wsl6PwHhtE0thALmINF3ZWunSUgK
          4Anp0ckkr-FjcDvVQJMBg47P_eZ1IDa27oAbxActEAUvmfJqONIh05TlLQePLO-Mu9xiZWiyI8KUJmaC
          Td8S99ZdehoCe0JxjXfcXYHdA62vfZ7N0GadrnbsVqwnJFx_LM_9nLG2YDVXgXMaWiB1vnFuRigIl91q
          OYMfYwVjRGhnleruF2KNrdgFrMzGoG-pQfvqvkhzXQxMiZJMitGy_UUxlSmBlImkffRjkQwfpFLMxJvC
          wCSDaxeZmSnMowlatB5zm2UMzfBmNe3WqHmGM2hCZY4hTFcdlIcPAr47lBEEZRcapajZH15TxLGcAji4
          hM82p2OcB0xB3Nrs6g-v3BQ788p8fbByiFXpYRJO6nfbhbWClZpNeXw3w0EHDV0g_ljTGu8BW3LTEsky
          2_A1HIrRSeftT7XOzCw3Qyi_hOIBoxI7A6nxUEDpl05uuEHCtioJKRV6Mymv630x6Q1Eku6h-uMw_Av9
          pzdL35G_eBl6mWCEqkNWcTFHRh9STWFR9dh5SsH_LdfWeSx4hXjBqvWXajU2vMkVjLS7afza2Kbnwc19
          w-O1L78MZkVzj5gw3HGuk3SLuZPnCdIIkMCbMOv2CegI49H7BhpueMxB69lfedQZF_92ftTMzaW81WNz
          pjcYMjiEz1KUpqOwk6d_8WVhPsUh14e17KbU0Kd2vTrPL9ekthcwJSSxOBw63kj1zJGqz66J_lYWQblj
          ybOdgzI5qQfyR-3fg2xGAdu5yIhZ-T4p0yLvlo1ckj4; path=/; secure; samesite=none; http
          only,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1970 00:00:00 
          GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 13:58:47.451 -04:00 [INF] Request finished in 401.5539ms 302 
2020-09-01 13:58:47.452 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 13:58:47.496 -04:00 [INF] Authorization was successful.
2020-09-01 13:58:47.499 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 13:58:47.511 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 13:58:47.515 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 13:58:47.548 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 13:58:47.557 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 13:58:47.568 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 13:58:57.117 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 13:58:57.135 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 13:58:57.140 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 13:58:57.220 -04:00 [INF] Executed page /Account/Admin/Index in 9707.3261ms
2020-09-01 13:58:57.222 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 13:58:57.226 -04:00 [INF] Request finished in 9773.6869ms 200 text/html; charset=utf-8
2020-09-01 14:03:01.362 -04:00 [INF] Starting host...
2020-09-01 14:03:03.274 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:03:04.187 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:03:04.390 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:03:04.464 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:03:04.842 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:03:05.228 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:03:05.234 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:03:05.422 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:03:05.423 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:03:05.463 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:03:05.592 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:03:05.625 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:03:06.114 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:03:06.117 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:03:06.117 -04:00 [INF] Hosting environment: Development
2020-09-01 14:03:06.118 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:04:02.277 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 14:04:02.465 -04:00 [INF] Authorization was successful.
2020-09-01 14:04:02.467 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:04:02.526 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:04:02.615 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:04:02.641 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:04:02.663 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:04:02.689 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:04:08.407 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:04:08.431 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:04:08.439 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:04:08.636 -04:00 [INF] Executed page /Account/Admin/Index in 6103.2605ms
2020-09-01 14:04:08.641 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:04:08.660 -04:00 [INF] Request finished in 6385.8956ms 200 text/html; charset=utf-8
2020-09-01 14:04:08.707 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/favicon.ico  
2020-09-01 14:04:08.733 -04:00 [INF] Sending file. Request path: '/favicon.ico'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\favicon.ico'
2020-09-01 14:04:08.735 -04:00 [INF] Request finished in 27.9411ms 200 image/x-icon
2020-09-01 14:05:00.173 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?fld0=UserName&usrop=0&usr=&fld1=Organization&op1=Equals&SearchTable%5B1%5D.FieldValue=Burger+Squire&fld2=Application&op2=Contains&SearchTable%5B2%5D.FieldValue=DataGenie&pageNumber=1  
2020-09-01 14:05:00.185 -04:00 [INF] Authorization was successful.
2020-09-01 14:05:00.186 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:05:00.193 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:05:00.245 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:05:00.249 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:05:00.252 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:05:00.259 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:21:08.835 -04:00 [INF] Starting host...
2020-09-01 14:21:11.585 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:21:12.496 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:21:12.695 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:21:12.763 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:21:13.138 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:21:13.501 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:21:13.508 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:21:13.682 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:21:13.683 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:21:13.724 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:21:13.839 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:21:13.870 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:21:14.276 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:21:14.278 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:21:14.279 -04:00 [INF] Hosting environment: Development
2020-09-01 14:21:14.280 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:21:24.729 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 14:21:24.897 -04:00 [INF] Authorization was successful.
2020-09-01 14:21:24.898 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:21:24.964 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:21:25.048 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:21:25.074 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:21:25.095 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:21:25.123 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:21:31.246 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:21:31.273 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:21:31.282 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:21:31.498 -04:00 [INF] Executed page /Account/Admin/Index in 6526.8637ms
2020-09-01 14:21:31.502 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:21:31.519 -04:00 [INF] Request finished in 6793.6359ms 200 text/html; charset=utf-8
2020-09-01 14:21:34.283 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?op0=UserName&UsrOp=0&Usr=&fld1=Organization&op1=Equals&Org=Burger+Squire&fld2=Application&op2=Contains&App=DataGenie&pageNumber=1  
2020-09-01 14:21:34.296 -04:00 [INF] Authorization was successful.
2020-09-01 14:21:34.297 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:21:34.304 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:21:34.339 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:21:34.343 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:21:34.348 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:21:34.355 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:24:15.076 -04:00 [INF] Starting host...
2020-09-01 14:24:16.860 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:24:17.737 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:24:17.929 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:24:18.006 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:24:18.392 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:24:18.758 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:24:18.765 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:24:18.920 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:24:18.921 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:24:18.961 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:24:19.081 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:24:19.114 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:24:19.521 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:24:19.524 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:24:19.525 -04:00 [INF] Hosting environment: Development
2020-09-01 14:24:19.526 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:24:21.069 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?op0=UserName&UsrOp=0&Usr=&fld1=Organization&op1=Equals&Org=Burger+Squire&fld2=Application&op2=Contains&App=DataGenie&pageNumber=1  
2020-09-01 14:24:21.235 -04:00 [INF] Authorization was successful.
2020-09-01 14:24:21.237 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:24:21.296 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:24:21.397 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:24:21.425 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:24:21.449 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:24:21.477 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:24:26.378 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:24:26.402 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:24:26.412 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:24:26.622 -04:00 [INF] Executed page /Account/Admin/Index in 5318.2506ms
2020-09-01 14:24:26.626 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:24:26.643 -04:00 [INF] Request finished in 5577.2803ms 200 text/html; charset=utf-8
2020-09-01 14:24:26.662 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 14:24:26.673 -04:00 [INF] The file /css/site.css was not modified
2020-09-01 14:24:26.676 -04:00 [INF] Request finished in 13.7111ms 304 text/css
2020-09-01 14:24:29.040 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:24:29.053 -04:00 [INF] Authorization was successful.
2020-09-01 14:24:29.055 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:24:29.057 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:24:29.091 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:24:29.095 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:24:29.099 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:24:29.103 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:27:21.305 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:27:21.311 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:27:21.314 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:27:21.337 -04:00 [INF] Executed page /Account/Admin/Index in 172278.1919ms
2020-09-01 14:27:21.339 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:27:21.342 -04:00 [INF] Request finished in 172301.6111ms 200 text/html; charset=utf-8
2020-09-01 14:28:15.061 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:28:15.087 -04:00 [INF] Authorization was successful.
2020-09-01 14:28:15.089 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:28:15.091 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:28:15.100 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:28:15.104 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:28:15.109 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:28:15.112 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:28:18.375 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:28:18.380 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:28:18.384 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:28:18.403 -04:00 [INF] Executed page /Account/Admin/Index in 3310.2355ms
2020-09-01 14:28:18.404 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:28:18.407 -04:00 [INF] Request finished in 3346.2331ms 200 text/html; charset=utf-8
2020-09-01 14:28:48.480 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:28:48.493 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:28:48.541 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__userIdInt_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__userIdInt_0
2020-09-01 14:28:48.600 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 14:28:48.616 -04:00 [INF] Authorization was successful.
2020-09-01 14:28:48.617 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:28:48.619 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:28:48.621 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:28:48.625 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:28:48.628 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:29:14.203 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:29:14.209 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:29:14.212 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:29:14.232 -04:00 [INF] Executed page /Account/Admin/Index in 25611.3188ms
2020-09-01 14:29:14.233 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:29:14.236 -04:00 [INF] Request finished in 25756.2911ms 200 text/html; charset=utf-8
2020-09-01 14:29:45.392 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:29:45.401 -04:00 [INF] Authorization was successful.
2020-09-01 14:29:45.402 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:29:45.404 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:29:45.406 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:29:45.410 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:29:45.414 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:29:45.418 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:32:18.650 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:32:18.655 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:32:18.658 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:32:18.678 -04:00 [INF] Executed page /Account/Admin/Index in 153272.817ms
2020-09-01 14:32:18.680 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:32:18.682 -04:00 [INF] Request finished in 153290.5155ms 200 text/html; charset=utf-8
2020-09-01 14:32:22.111 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:32:22.118 -04:00 [INF] Authorization was successful.
2020-09-01 14:32:22.119 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:32:22.121 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:32:22.124 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:32:22.128 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:32:22.134 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:32:22.140 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:33:41.225 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:33:41.232 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:33:41.236 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:33:41.271 -04:00 [INF] Executed page /Account/Admin/Index in 79148.0504ms
2020-09-01 14:33:41.274 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:33:41.277 -04:00 [INF] Request finished in 79168.2763ms 200 text/html; charset=utf-8
2020-09-01 14:33:45.546 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:33:45.550 -04:00 [INF] Authorization was successful.
2020-09-01 14:33:45.551 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:33:45.553 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:33:45.557 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:33:45.561 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:33:45.565 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:33:45.569 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:36:36.533 -04:00 [INF] Starting host...
2020-09-01 14:36:38.409 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:36:39.305 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:36:39.499 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:36:39.579 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:36:39.942 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:36:40.319 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:36:40.325 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:36:40.493 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:36:40.494 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:36:40.534 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:36:40.656 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:36:40.686 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:36:41.094 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:36:41.096 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:36:41.097 -04:00 [INF] Hosting environment: Development
2020-09-01 14:36:41.098 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:36:41.347 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:36:41.510 -04:00 [INF] Authorization was successful.
2020-09-01 14:36:41.512 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:36:41.570 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:36:41.649 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:36:41.674 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:36:41.696 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:36:41.725 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:36:49.679 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:36:49.703 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:36:49.713 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:36:49.920 -04:00 [INF] Executed page /Account/Admin/Index in 8342.6029ms
2020-09-01 14:36:49.924 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:36:49.942 -04:00 [INF] Request finished in 8599.6795ms 200 text/html; charset=utf-8
2020-09-01 14:36:51.708 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:36:51.719 -04:00 [INF] Authorization was successful.
2020-09-01 14:36:51.720 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:36:51.724 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:36:51.760 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:36:51.764 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:36:51.767 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:36:51.771 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:39:39.204 -04:00 [INF] Starting host...
2020-09-01 14:39:41.223 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:39:42.214 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:39:42.421 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:39:42.500 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:39:42.885 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:39:43.288 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:39:43.298 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:39:43.467 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:39:43.469 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:39:43.511 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:39:43.650 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:39:43.681 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:39:44.125 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:39:44.128 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:39:44.128 -04:00 [INF] Hosting environment: Development
2020-09-01 14:39:44.129 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:40:16.725 -04:00 [INF] Starting host...
2020-09-01 14:40:18.599 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:40:19.526 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:40:19.723 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:40:19.800 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:40:20.166 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:40:20.528 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:40:20.535 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:40:20.707 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:40:20.708 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:40:20.749 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:40:20.867 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:40:20.900 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:40:21.302 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:40:21.304 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:40:21.305 -04:00 [INF] Hosting environment: Development
2020-09-01 14:40:21.307 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:43:20.242 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?op0=UserName&UsrOp=0&Usr=&fld1=Organization&op1=Equals&Org=Burger+Squire&fld2=Application&op2=Contains&App=DataGenie&pageNumber=1  
2020-09-01 14:43:20.408 -04:00 [INF] Authorization was successful.
2020-09-01 14:43:20.409 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:43:20.469 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:43:20.562 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:43:20.594 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:43:20.616 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:43:20.645 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:43:30.362 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:43:30.387 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:43:30.396 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:43:30.605 -04:00 [INF] Executed page /Account/Admin/Index in 10127.5654ms
2020-09-01 14:43:30.609 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:43:30.624 -04:00 [INF] Request finished in 10386.1951ms 200 text/html; charset=utf-8
2020-09-01 14:43:48.524 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=McDougall%27s&App=InfoMaster&pageNumber=1  
2020-09-01 14:43:48.534 -04:00 [INF] Authorization was successful.
2020-09-01 14:43:48.536 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:43:48.537 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:43:48.575 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:43:48.579 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:43:48.583 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:43:48.587 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:45:20.695 -04:00 [INF] Starting host...
2020-09-01 14:45:22.429 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:45:23.317 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:45:23.513 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:45:23.586 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:45:23.945 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:45:24.301 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:45:24.309 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:45:24.461 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:45:24.462 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:45:24.502 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:45:24.615 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:45:24.645 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:45:25.047 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:45:25.050 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:45:25.051 -04:00 [INF] Hosting environment: Development
2020-09-01 14:45:25.052 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:45:27.479 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?op0=UserName&UsrOp=0&Usr=&fld1=Organization&op1=Equals&Org=Burger+Squire&fld2=Application&op2=Contains&App=DataGenie&pageNumber=1  
2020-09-01 14:45:27.653 -04:00 [INF] Authorization was successful.
2020-09-01 14:45:27.655 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:45:27.716 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:45:27.817 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:45:27.842 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:45:27.862 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:45:27.891 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:45:41.968 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[Organization] = N'Burger Squire')
2020-09-01 14:45:41.993 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[Organization] = N'Burger Squire')
ORDER BY [s].[UserName]
2020-09-01 14:45:42.002 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:45:42.201 -04:00 [INF] Executed page /Account/Admin/Index in 14476.9809ms
2020-09-01 14:45:42.205 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:45:42.224 -04:00 [INF] Request finished in 14748.7485ms 200 text/html; charset=utf-8
2020-09-01 14:46:02.817 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=DataGenie&pageNumber=1  
2020-09-01 14:46:02.829 -04:00 [INF] Authorization was successful.
2020-09-01 14:46:02.830 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:46:02.832 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:46:02.864 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:46:02.867 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:46:02.871 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:46:02.874 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:46:11.637 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[Organization] = N'Burger Squire')
2020-09-01 14:46:11.642 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[Organization] = N'Burger Squire')
ORDER BY [s].[UserName]
2020-09-01 14:46:11.646 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:46:11.663 -04:00 [INF] Executed page /Account/Admin/Index in 8830.0644ms
2020-09-01 14:46:11.668 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:46:11.670 -04:00 [INF] Request finished in 8853.0715ms 200 text/html; charset=utf-8
2020-09-01 14:46:22.886 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=McDougall%27s&App=DataGenie&pageNumber=1  
2020-09-01 14:46:22.915 -04:00 [INF] Authorization was successful.
2020-09-01 14:46:22.917 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:46:22.918 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:46:22.927 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:46:22.932 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:46:22.935 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:46:22.938 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:46:27.075 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[Organization] = N'McDougall''s')
2020-09-01 14:46:27.088 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[Organization] = N'McDougall''s')
ORDER BY [s].[UserName]
2020-09-01 14:46:27.092 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:46:27.104 -04:00 [INF] Executed page /Account/Admin/Index in 4184.9152ms
2020-09-01 14:46:27.106 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:46:27.109 -04:00 [INF] Request finished in 4224.8503ms 200 text/html; charset=utf-8
2020-09-01 14:46:32.540 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=McDougall%27s&App=InfoMaster&pageNumber=1  
2020-09-01 14:46:32.547 -04:00 [INF] Authorization was successful.
2020-09-01 14:46:32.548 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:46:32.550 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:46:32.554 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:46:32.559 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:46:32.563 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:46:32.566 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:46:32.581 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%InfoMaster%') AND ([s].[Organization] = N'McDougall''s')
2020-09-01 14:46:32.595 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%InfoMaster%') AND ([s].[Organization] = N'McDougall''s')
ORDER BY [s].[UserName]
2020-09-01 14:46:32.599 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:46:32.631 -04:00 [INF] Executed page /Account/Admin/Index in 78.579ms
2020-09-01 14:46:32.632 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:46:32.634 -04:00 [INF] Request finished in 94.3425ms 200 text/html; charset=utf-8
2020-09-01 14:46:39.226 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=McDougall%27s&App=DataGenie&pageNumber=1  
2020-09-01 14:46:39.230 -04:00 [INF] Authorization was successful.
2020-09-01 14:46:39.231 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:46:39.233 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:46:39.235 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:46:39.239 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:46:39.243 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:46:39.247 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:46:39.252 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[Organization] = N'McDougall''s')
2020-09-01 14:46:39.257 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[Organization] = N'McDougall''s')
ORDER BY [s].[UserName]
2020-09-01 14:46:39.260 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:46:39.272 -04:00 [INF] Executed page /Account/Admin/Index in 37.0784ms
2020-09-01 14:46:39.273 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:46:39.275 -04:00 [INF] Request finished in 49.3432ms 200 text/html; charset=utf-8
2020-09-01 14:46:44.178 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=&App=DataGenie&pageNumber=1  
2020-09-01 14:46:44.183 -04:00 [INF] Authorization was successful.
2020-09-01 14:46:44.186 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:46:44.188 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:46:44.194 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:46:44.197 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:46:44.202 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:46:44.208 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:46:44.230 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE [s].[Applications] LIKE N'%DataGenie%'
2020-09-01 14:46:44.251 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE [s].[Applications] LIKE N'%DataGenie%'
ORDER BY [s].[UserName]
2020-09-01 14:46:44.258 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:46:44.275 -04:00 [INF] Executed page /Account/Admin/Index in 82.3578ms
2020-09-01 14:46:44.277 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:46:44.285 -04:00 [INF] Request finished in 106.929ms 200 text/html; charset=utf-8
2020-09-01 14:47:00.749 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=11&Usr=%25e%25&Org=&App=DataGenie&pageNumber=1  
2020-09-01 14:47:00.754 -04:00 [INF] Authorization was successful.
2020-09-01 14:47:00.756 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:47:00.758 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:47:00.761 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:47:00.764 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:47:00.767 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:47:00.770 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:47:00.785 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[UserName] LIKE N'%e%')
2020-09-01 14:47:00.799 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[UserName] LIKE N'%e%')
ORDER BY [s].[UserName]
2020-09-01 14:47:00.804 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:47:00.818 -04:00 [INF] Executed page /Account/Admin/Index in 57.9205ms
2020-09-01 14:47:00.819 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:47:00.821 -04:00 [INF] Request finished in 71.9662ms 200 text/html; charset=utf-8
2020-09-01 14:47:23.662 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-11  
2020-09-01 14:47:23.676 -04:00 [INF] Authorization was successful.
2020-09-01 14:47:23.677 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 14:47:23.684 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 14:47:23.689 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:47:23.695 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:47:23.751 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 14:47:23.802 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 14:47:23.819 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 14:47:23.862 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie', 'InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 14:47:23.894 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:47:23.897 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:47:23.972 -04:00 [INF] Executed page /Account/Admin/User in 285.8106ms
2020-09-01 14:47:23.978 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 14:47:23.980 -04:00 [INF] Request finished in 317.7511ms 200 text/html; charset=utf-8
2020-09-01 14:47:54.168 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=11&Usr=%25e%25&Org=&App=DataGenie&pageNumber=1  
2020-09-01 14:47:54.175 -04:00 [INF] Authorization was successful.
2020-09-01 14:47:54.176 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:47:54.178 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:47:54.180 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:47:54.186 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:47:54.190 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:47:54.195 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:47:54.201 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[UserName] LIKE N'%e%')
2020-09-01 14:47:54.206 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE ([s].[Applications] LIKE N'%DataGenie%') AND ([s].[UserName] LIKE N'%e%')
ORDER BY [s].[UserName]
2020-09-01 14:47:54.212 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:47:54.238 -04:00 [INF] Executed page /Account/Admin/Index in 59.1835ms
2020-09-01 14:47:54.240 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:47:54.242 -04:00 [INF] Request finished in 75.2043ms 200 text/html; charset=utf-8
2020-09-01 14:48:18.356 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=11&Usr=%25e%25&Org=&App=&pageNumber=1  
2020-09-01 14:48:18.360 -04:00 [INF] Authorization was successful.
2020-09-01 14:48:18.361 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:48:18.363 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:48:18.366 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:48:18.369 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:48:18.373 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:48:18.378 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:48:18.394 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE [s].[UserName] LIKE N'%e%'
2020-09-01 14:48:18.409 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE [s].[UserName] LIKE N'%e%'
ORDER BY [s].[UserName]
2020-09-01 14:48:18.412 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:48:18.427 -04:00 [INF] Executed page /Account/Admin/Index in 61.6189ms
2020-09-01 14:48:18.428 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:48:18.430 -04:00 [INF] Request finished in 73.9328ms 200 text/html; charset=utf-8
2020-09-01 14:48:25.020 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-7  
2020-09-01 14:48:25.023 -04:00 [INF] Authorization was successful.
2020-09-01 14:48:25.024 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 14:48:25.026 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 14:48:25.029 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:48:25.031 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:48:25.037 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 14:48:25.044 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 14:48:25.049 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 14:48:25.057 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie') AND ([a].[ClaimType] = 'app:role')
2020-09-01 14:48:25.066 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:48:25.069 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:48:25.077 -04:00 [INF] Executed page /Account/Admin/User in 49.0428ms
2020-09-01 14:48:25.079 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 14:48:25.081 -04:00 [INF] Request finished in 60.847ms 200 text/html; charset=utf-8
2020-09-01 14:51:41.455 -04:00 [INF] Starting host...
2020-09-01 14:51:43.250 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:51:44.152 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:51:44.354 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:51:44.421 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:51:44.778 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:51:45.133 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:51:45.140 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:51:45.289 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:51:45.290 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:51:45.329 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:51:45.442 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:51:45.470 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:51:45.891 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:51:45.893 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:51:45.895 -04:00 [INF] Hosting environment: Development
2020-09-01 14:51:45.896 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:52:22.269 -04:00 [INF] Starting host...
2020-09-01 14:52:24.049 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:52:24.937 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:52:25.126 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:52:25.194 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:52:25.545 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:52:25.898 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:52:25.905 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:52:26.065 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:52:26.067 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:52:26.109 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:52:26.245 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:52:26.275 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:52:26.673 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:52:26.676 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:52:26.677 -04:00 [INF] Hosting environment: Development
2020-09-01 14:52:26.678 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:52:27.438 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 14:52:27.612 -04:00 [INF] Authorization was successful.
2020-09-01 14:52:27.614 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:52:27.679 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:52:27.763 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:52:27.796 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:52:27.818 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:52:27.843 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:52:28.136 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:52:28.159 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:52:28.169 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:52:28.368 -04:00 [INF] Executed page /Account/Admin/Index in 682.8096ms
2020-09-01 14:52:28.372 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:52:28.388 -04:00 [INF] Request finished in 953.9582ms 200 text/html; charset=utf-8
2020-09-01 14:52:45.357 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=8&Usr=m&Org=&App=&pageNumber=1  
2020-09-01 14:52:45.368 -04:00 [INF] Authorization was successful.
2020-09-01 14:52:45.369 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:52:45.375 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:52:45.407 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:52:45.411 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:52:45.415 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:52:45.421 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:52:45.464 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE [s].[UserName] LIKE N'm%'
2020-09-01 14:52:45.477 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE [s].[UserName] LIKE N'm%'
ORDER BY [s].[UserName]
2020-09-01 14:52:45.480 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:52:45.494 -04:00 [INF] Executed page /Account/Admin/Index in 117.5188ms
2020-09-01 14:52:45.496 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:52:45.498 -04:00 [INF] Request finished in 141.0563ms 200 text/html; charset=utf-8
2020-09-01 14:52:48.791 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-1  
2020-09-01 14:52:48.826 -04:00 [INF] Authorization was successful.
2020-09-01 14:52:48.827 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 14:52:48.835 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 14:52:48.840 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:52:48.850 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:52:48.922 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 14:52:48.975 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 14:52:48.989 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 14:52:49.029 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie') AND ([a].[ClaimType] = 'app:role')
2020-09-01 14:52:49.061 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:52:49.065 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:52:49.138 -04:00 [INF] Executed page /Account/Admin/User in 301.5924ms
2020-09-01 14:52:49.140 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 14:52:49.144 -04:00 [INF] Request finished in 353.0809ms 200 text/html; charset=utf-8
2020-09-01 14:58:57.709 -04:00 [INF] Starting host...
2020-09-01 14:58:59.607 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 14:59:00.498 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 14:59:00.706 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 14:59:00.776 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 14:59:01.149 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 14:59:01.505 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 14:59:01.513 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 14:59:01.678 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 14:59:01.679 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 14:59:01.724 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 14:59:01.845 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 14:59:01.875 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 14:59:02.292 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 14:59:02.295 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 14:59:02.296 -04:00 [INF] Hosting environment: Development
2020-09-01 14:59:02.296 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 14:59:03.379 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 14:59:03.612 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:59:03.679 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userIdInt_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__userIdInt_0
2020-09-01 14:59:03.753 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 14:59:03.806 -04:00 [INF] Authorization was successful.
2020-09-01 14:59:03.808 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 14:59:03.863 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 14:59:03.877 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:59:03.890 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 14:59:03.917 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:59:04.210 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 14:59:04.230 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 14:59:04.236 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:59:04.462 -04:00 [INF] Executed page /Account/Admin/Index in 592.3242ms
2020-09-01 14:59:04.465 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 14:59:04.480 -04:00 [INF] Request finished in 1104.9433ms 200 text/html; charset=utf-8
2020-09-01 14:59:07.691 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-4  
2020-09-01 14:59:07.715 -04:00 [INF] Authorization was successful.
2020-09-01 14:59:07.716 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 14:59:07.727 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 14:59:07.732 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 14:59:07.773 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 14:59:07.800 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 14:59:07.820 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 14:59:07.832 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 14:59:07.885 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie') AND ([a].[ClaimType] = 'app:role')
2020-09-01 14:59:07.917 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 14:59:07.920 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 14:59:08.002 -04:00 [INF] Executed page /Account/Admin/User in 273.1255ms
2020-09-01 14:59:08.004 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 14:59:08.007 -04:00 [INF] Request finished in 316.1694ms 200 text/html; charset=utf-8
2020-09-01 15:01:55.005 -04:00 [INF] Starting host...
2020-09-01 15:01:57.153 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:01:58.134 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:01:58.340 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:01:58.420 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:01:58.837 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:01:59.246 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:01:59.254 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:01:59.422 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:01:59.424 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:01:59.469 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:01:59.599 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:01:59.630 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:02:00.094 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:02:00.097 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:02:00.098 -04:00 [INF] Hosting environment: Development
2020-09-01 15:02:00.099 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:02:01.112 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:02:01.297 -04:00 [INF] Authorization was successful.
2020-09-01 15:02:01.299 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:02:01.360 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:02:01.449 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:02:01.477 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:02:01.501 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:02:01.528 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:02:01.829 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:02:01.856 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:02:01.868 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:02:02.106 -04:00 [INF] Executed page /Account/Admin/Index in 738.4451ms
2020-09-01 15:02:02.110 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:02:02.127 -04:00 [INF] Request finished in 1019.3943ms 200 text/html; charset=utf-8
2020-09-01 15:02:04.826 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-10  
2020-09-01 15:02:04.843 -04:00 [INF] Authorization was successful.
2020-09-01 15:02:04.844 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:02:04.852 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:02:04.859 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:02:04.894 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:02:04.952 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:02:05.011 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:02:05.026 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:02:05.082 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:02:05.115 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:02:05.119 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:02:05.203 -04:00 [INF] Executed page /Account/Admin/User in 347.3222ms
2020-09-01 15:02:05.204 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:02:05.210 -04:00 [INF] Request finished in 384.1255ms 200 text/html; charset=utf-8
2020-09-01 15:07:47.495 -04:00 [INF] Starting host...
2020-09-01 15:07:49.588 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:07:50.540 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:07:50.751 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:07:50.822 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:07:51.204 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:07:51.596 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:07:51.604 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:07:51.766 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:07:51.767 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:07:51.811 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:07:51.939 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:07:51.976 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:07:52.411 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:07:52.414 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:07:52.415 -04:00 [INF] Hosting environment: Development
2020-09-01 15:07:52.416 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:07:53.215 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:07:53.411 -04:00 [INF] Authorization was successful.
2020-09-01 15:07:53.413 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:07:53.482 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:07:53.574 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:07:53.603 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:07:53.627 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:07:53.654 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:07:53.961 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:07:53.985 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:07:53.995 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:07:54.228 -04:00 [INF] Executed page /Account/Admin/Index in 739.0078ms
2020-09-01 15:07:54.232 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:07:54.249 -04:00 [INF] Request finished in 1038.4791ms 200 text/html; charset=utf-8
2020-09-01 15:08:04.683 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-7  
2020-09-01 15:08:04.733 -04:00 [INF] Authorization was successful.
2020-09-01 15:08:04.738 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:08:04.748 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:08:04.754 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:08:04.791 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:08:04.852 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:08:04.906 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:08:04.924 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:08:04.982 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:08:05.017 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:08:05.022 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:08:05.106 -04:00 [INF] Executed page /Account/Admin/User in 355.4712ms
2020-09-01 15:08:05.108 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:08:05.111 -04:00 [INF] Request finished in 428.721ms 200 text/html; charset=utf-8
2020-09-01 15:08:55.079 -04:00 [INF] Starting host...
2020-09-01 15:08:57.078 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:08:58.011 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:08:58.216 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:08:58.292 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:08:58.683 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:08:59.062 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:08:59.069 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:08:59.230 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:08:59.231 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:08:59.275 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:08:59.397 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:08:59.428 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:08:59.861 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:08:59.864 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:08:59.865 -04:00 [INF] Hosting environment: Development
2020-09-01 15:08:59.866 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:09:00.733 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:09:00.922 -04:00 [INF] Authorization was successful.
2020-09-01 15:09:00.924 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:09:00.998 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:09:01.089 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:09:01.117 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:09:01.140 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:09:01.166 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:09:01.485 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:09:01.512 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:09:01.520 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:09:01.761 -04:00 [INF] Executed page /Account/Admin/Index in 754.7857ms
2020-09-01 15:09:01.764 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:09:01.782 -04:00 [INF] Request finished in 1054.0105ms 200 text/html; charset=utf-8
2020-09-01 15:09:04.881 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-2  
2020-09-01 15:09:04.900 -04:00 [INF] Authorization was successful.
2020-09-01 15:09:04.901 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:09:04.910 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:09:04.915 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:09:04.951 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:09:05.010 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:09:05.068 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:09:05.085 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:09:05.142 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie', 'InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:09:05.178 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:09:05.181 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:09:05.267 -04:00 [INF] Executed page /Account/Admin/User in 355.6674ms
2020-09-01 15:09:05.269 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:09:05.275 -04:00 [INF] Request finished in 394.283ms 200 text/html; charset=utf-8
2020-09-01 15:22:25.252 -04:00 [INF] Starting host...
2020-09-01 15:22:28.007 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:22:28.944 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:22:29.140 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:22:29.214 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:22:29.588 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:22:29.971 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:22:29.978 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:22:30.139 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:22:30.140 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:22:30.181 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:22:30.306 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:22:30.338 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:22:30.761 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:22:30.764 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:22:30.765 -04:00 [INF] Hosting environment: Development
2020-09-01 15:22:30.765 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:22:31.902 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:22:32.095 -04:00 [INF] Authorization was successful.
2020-09-01 15:22:32.096 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:22:32.158 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:22:32.251 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:22:32.282 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:22:32.306 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:22:32.332 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:22:32.626 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:22:32.651 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:22:32.660 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:22:32.890 -04:00 [INF] Executed page /Account/Admin/Index in 724.8475ms
2020-09-01 15:22:32.896 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:22:32.916 -04:00 [INF] Request finished in 1018.2201ms 200 text/html; charset=utf-8
2020-09-01 15:22:32.930 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 15:22:32.953 -04:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\css\site.css'
2020-09-01 15:22:32.955 -04:00 [INF] Request finished in 24.9738ms 200 text/css
2020-09-01 15:22:35.778 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-3  
2020-09-01 15:22:35.803 -04:00 [INF] Authorization was successful.
2020-09-01 15:22:35.804 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:22:35.813 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:22:35.818 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:22:35.859 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:22:35.919 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:22:35.972 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:22:35.988 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:22:36.044 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:22:36.078 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:22:36.082 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:22:36.162 -04:00 [INF] Executed page /Account/Admin/User in 347.4363ms
2020-09-01 15:22:36.164 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:22:36.168 -04:00 [INF] Request finished in 389.8055ms 200 text/html; charset=utf-8
2020-09-01 15:23:44.996 -04:00 [INF] Starting host...
2020-09-01 15:23:46.996 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:23:47.924 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:23:48.121 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:23:48.190 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:23:48.565 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:23:48.932 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:23:48.939 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:23:49.100 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:23:49.101 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:23:49.142 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:23:49.269 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:23:49.302 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:23:49.736 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:23:49.738 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:23:49.739 -04:00 [INF] Hosting environment: Development
2020-09-01 15:23:49.741 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:23:50.637 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:23:50.821 -04:00 [INF] Authorization was successful.
2020-09-01 15:23:50.823 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:23:50.887 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:23:50.982 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:23:51.009 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:23:51.034 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:23:51.060 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:23:51.354 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:23:51.380 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:23:51.389 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:23:51.600 -04:00 [INF] Executed page /Account/Admin/Index in 704.8979ms
2020-09-01 15:23:51.603 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:23:51.634 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 15:23:51.642 -04:00 [INF] Request finished in 1008.0133ms 200 text/html; charset=utf-8
2020-09-01 15:23:51.670 -04:00 [INF] Sending file. Request path: '/css/site.css'. Physical path: 'C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\wwwroot\css\site.css'
2020-09-01 15:23:51.672 -04:00 [INF] Request finished in 37.8744ms 200 text/css
2020-09-01 15:23:57.098 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-5  
2020-09-01 15:23:57.119 -04:00 [INF] Authorization was successful.
2020-09-01 15:23:57.121 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:23:57.131 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:23:57.136 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:23:57.171 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:23:57.229 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:23:57.304 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:23:57.320 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:23:57.377 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie', 'InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:23:57.410 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:23:57.414 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:23:57.499 -04:00 [INF] Executed page /Account/Admin/User in 366.5959ms
2020-09-01 15:23:57.501 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:23:57.505 -04:00 [INF] Request finished in 407.2077ms 200 text/html; charset=utf-8
2020-09-01 15:23:57.526 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 15:23:57.528 -04:00 [INF] The file /css/site.css was not modified
2020-09-01 15:23:57.530 -04:00 [INF] Request finished in 3.9393ms 304 text/css
2020-09-01 15:25:10.407 -04:00 [INF] Starting host...
2020-09-01 15:25:12.329 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:25:13.228 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:25:13.444 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:25:13.522 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:25:13.900 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:25:14.255 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:25:14.264 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:25:14.421 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:25:14.424 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:25:14.476 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:25:14.604 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:25:14.634 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:25:15.048 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:25:15.050 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:25:15.051 -04:00 [INF] Hosting environment: Development
2020-09-01 15:25:15.054 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:25:15.689 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:25:15.874 -04:00 [INF] Authorization was successful.
2020-09-01 15:25:15.875 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:25:15.935 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:25:16.020 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:25:16.054 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:25:16.078 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:25:16.105 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:25:16.409 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:25:16.434 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:25:16.443 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:25:16.657 -04:00 [INF] Executed page /Account/Admin/Index in 714.2714ms
2020-09-01 15:25:16.661 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:25:16.678 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 15:25:16.680 -04:00 [INF] Request finished in 994.5274ms 200 text/html; charset=utf-8
2020-09-01 15:25:16.700 -04:00 [INF] The file /css/site.css was not modified
2020-09-01 15:25:16.703 -04:00 [INF] Request finished in 25.6351ms 304 text/css
2020-09-01 15:25:20.688 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-3  
2020-09-01 15:25:20.707 -04:00 [INF] Authorization was successful.
2020-09-01 15:25:20.710 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:25:20.721 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:25:20.726 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:25:20.762 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:25:20.819 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:25:20.874 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:25:20.888 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:25:20.946 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:25:20.979 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:25:20.982 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:25:21.089 -04:00 [INF] Executed page /Account/Admin/User in 366.4032ms
2020-09-01 15:25:21.091 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:25:21.095 -04:00 [INF] Request finished in 407.9181ms 200 text/html; charset=utf-8
2020-09-01 15:25:53.810 -04:00 [INF] Starting host...
2020-09-01 15:25:55.715 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:25:56.625 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:25:56.829 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:25:56.901 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:25:57.284 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:25:57.655 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:25:57.663 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:25:57.830 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:25:57.831 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:25:57.873 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:25:58.002 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:25:58.034 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:25:58.479 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:25:58.488 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:25:58.489 -04:00 [INF] Hosting environment: Development
2020-09-01 15:25:58.490 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:25:59.299 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:25:59.498 -04:00 [INF] Authorization was successful.
2020-09-01 15:25:59.499 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:25:59.561 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:25:59.652 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:25:59.686 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:25:59.717 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:25:59.746 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:26:00.054 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:26:00.080 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:26:00.089 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:26:00.297 -04:00 [INF] Executed page /Account/Admin/Index in 728.0618ms
2020-09-01 15:26:00.300 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:26:00.317 -04:00 [INF] Request finished in 1020.818ms 200 text/html; charset=utf-8
2020-09-01 15:26:00.318 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 15:26:00.342 -04:00 [INF] The file /css/site.css was not modified
2020-09-01 15:26:00.347 -04:00 [INF] Request finished in 28.3454ms 304 text/css
2020-09-01 15:26:10.845 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-7  
2020-09-01 15:26:10.865 -04:00 [INF] Authorization was successful.
2020-09-01 15:26:10.866 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:26:10.874 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:26:10.881 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:26:10.916 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:26:10.974 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:26:11.030 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:26:11.045 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:26:11.108 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:26:11.143 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:26:11.148 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:26:11.234 -04:00 [INF] Executed page /Account/Admin/User in 357.1636ms
2020-09-01 15:26:11.236 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:26:11.239 -04:00 [INF] Request finished in 393.3827ms 200 text/html; charset=utf-8
2020-09-01 15:36:53.089 -04:00 [INF] Starting host...
2020-09-01 15:36:54.862 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:36:55.776 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:36:56.001 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:36:56.080 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:36:56.444 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:36:56.815 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:36:56.822 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:36:56.990 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:36:56.991 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:36:57.032 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:36:57.148 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:36:57.179 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:36:57.588 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:36:57.590 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:36:57.591 -04:00 [INF] Hosting environment: Development
2020-09-01 15:36:57.592 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:36:59.563 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:36:59.703 -04:00 [INF] Authorization failed.
2020-09-01 15:36:59.717 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-09-01 15:36:59.727 -04:00 [INF] Request finished in 168.0155ms 302 
2020-09-01 15:36:59.737 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 15:36:59.745 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
</REQUEST>

2020-09-01 15:36:59.774 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 15:36:59.831 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 15:36:59.875 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:36:59.890 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 15:36:59.892 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 15:36:59.898 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 15:36:59.899 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:37:00.098 -04:00 [INF] Executed page /Account/Login in 259.7904ms
2020-09-01 15:37:00.100 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 15:37:00.106 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_
          SxDjKUazXtbkv_6RfIFXjIY4sKkxcsQlr_6a4zLx-miHeD6FcojKx8kbQtvZ1aSKoX1e4DIxQOBqt1mR
          ynk86NPGb50_gV9XRenrLIunq8tdEqlxIEHF1d7u8abSvMND9dYB1FCSD7Zg08; path=/; samesite
          =strict; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1
          970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv_7GJpkDQw7loRmFTIJl5PCm59SLZq
          mXcVaR_MpE5lBOxu48Z8zJrWq_EubsmjwK4jIiYHarmruJirIlQcB7C-ifGAl7n3Hvy8VYkrngF8LKr2
          lCMIMwThPNCOG_cQyshw</__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 15:37:00.118 -04:00 [INF] Request finished in 385.6824ms 200 text/html; charset=utf-8
2020-09-01 15:37:07.617 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 258
2020-09-01 15:37:07.621 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv_6RfIFXjIY
          4sKkxcsQlr_6a4zLx-miHeD6FcojKx8kbQtvZ1aSKoX1e4DIxQOBqt1mRynk86NPGb50_gV9XRenrLIu
          nq8tdEqlxIEHF1d7u8abSvMND9dYB1FCSD7Zg08
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv_7GJpkDQw7loRmFTIJl5PCm59SLZqmXcVaR_MpE5lBOxu48Z8zJrWq
          _EubsmjwK4jIiYHarmruJirIlQcB7C-ifGAl7n3Hvy8VYkrngF8LKr2lCMIMwThPNCOG_cQyshw&Inpu
          t.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 15:37:07.636 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 15:37:07.641 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 15:37:07.643 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 15:37:07.675 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 15:37:07.783 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:37:07.875 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 15:37:07.982 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 15:37:08.006 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 15:37:08.010 -04:00 [INF] User logged in.
2020-09-01 15:37:08.013 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 15:37:08.017 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 15:37:08.019 -04:00 [INF] Executed page /Account/Login in 374.038ms
2020-09-01 15:37:08.021 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 15:37:08.027 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=2123D974A8DD0D2D7EF7BCE52DEF66C9; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv8zouDLIFkzR
          HzSQE83YUkQqlIDx1R2vZ9eJX-zD6TX11AAyFtd_so1_xjSptVLO4fMhq1pEnWZa9yx847LBexA1Rffp
          VZ8XE41g1yt5W8yfzXEghistuWGL1SLj0stPCpiaAFNBksALwn70DmcLTFRzkjLlacE5d2FGtx2kKq4o
          8G6eLSszq0xURkF2KHxg_-RKnoOvG5TyGcUszdf8gYopfIL7W7ZNWs06GPGbp8Y4Ly-9B5q33Jr5SLkk
          eAjF4HsPxzo5ixXKhAZ8Je--M2ta6u63dnbfI_tl0NE-jrla3EcPW4PcfCvrTrZ4xNwt0Xe8v27HKZsI
          LTqT_GDK0qlxRvuLwDuZBcLYb8Ar9Sfv0WhDwk-2wCKmJt20BFQXRL4lKd-w_IfKf8Gu3opBDkbhFWif
          yiNMoHNyGQObCac_zdhS4Qn2Fm5PTnQbSZ9wbcX05dbKB-csponxUh2tGFAJFXZPBB7xDdx-pPXtwmx8
          SjNI1pzH7m0Gp7H5uyu0QSCrS707I1yT4s4TgVMovETTx2oFN-UHV1krQ93qkqvap7UvaUseFHWtP0XQ
          1TvG1_XGoTc0oXAjLjtjEw_uaftKBhCWMT-sB1Qsaq49Y_12jLX4Y6FDeSVX5QGAzigRIonztYoLEonZ
          -6XMWIlKAw0iR_3I4L7vN0hBcIdG9OFU6vUp4xEtVXtRUv6cmRqLUyC9fi_qONMrUAgdBH22oSSmCQR5
          9llHOQADWXp55_NC1rooHNEnq-LvTPg5q6SgC1MZrRqBOiYxEHj7n9bRnkL5JuDeN2104XqVNO7EIOX7
          WN90__5pF80tcCDFYbBVtgQ60npja90RrPy7w2nY5dkM7h-ak98rQABGdf4ciT4ZTHogLeD8uibPJQvY
          YZsfLw91FI6MSc9FucluVx1fBoa9RUDnEkpvIifgbJLcAhJ0iFP_qTY1_WSTj52kG-CMJJbjPDhuaTt5
          X8-Z9rmM-S9UTi_oKP2oGpmx8YFoCVAGbOK5BCiqvAZPSkyVeVimKjClZYfjzfrcxO9XeaAtRJp8ZVpW
          ktv8DNt3GxXj8A8YsPATITCfH0hGGLAKdCyCz9EpfN3Duiqc4xdMdkHAnBroD7rx3dJZ0z26qHYDyIZK
          MyH3MEnrZ_eD3jaMnQ19sFuHnsLhifH1Fo3UoOMbPNk; path=/; secure; samesite=none; http
          only,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1970 00:00:00 
          GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 15:37:08.034 -04:00 [INF] Request finished in 418.3669ms 302 
2020-09-01 15:37:08.035 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:37:08.047 -04:00 [INF] Authorization was successful.
2020-09-01 15:37:08.048 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:37:08.060 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:37:08.094 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:37:08.103 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:37:08.115 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:37:08.119 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:37:08.409 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:37:08.430 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:37:08.435 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:37:08.528 -04:00 [INF] Executed page /Account/Admin/Index in 466.5457ms
2020-09-01 15:37:08.530 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:37:08.532 -04:00 [INF] Request finished in 496.3121ms 200 text/html; charset=utf-8
2020-09-01 15:37:08.553 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 15:37:08.564 -04:00 [INF] The file /css/site.css was not modified
2020-09-01 15:37:08.566 -04:00 [INF] Request finished in 12.979ms 304 text/css
2020-09-01 15:37:10.617 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-3  
2020-09-01 15:37:10.630 -04:00 [INF] Authorization was successful.
2020-09-01 15:37:10.632 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:37:10.639 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:37:10.643 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:37:10.655 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:37:10.676 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:37:10.697 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:37:10.710 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:37:10.751 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:37:10.783 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:37:10.787 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:37:10.856 -04:00 [INF] Executed page /Account/Admin/User in 214.9314ms
2020-09-01 15:37:10.859 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:37:10.861 -04:00 [INF] Request finished in 245.2302ms 200 text/html; charset=utf-8
2020-09-01 15:37:26.893 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:37:26.898 -04:00 [INF] Authorization was successful.
2020-09-01 15:37:26.899 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:37:26.901 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:37:26.903 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:37:26.907 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:37:26.911 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:37:26.924 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:37:26.935 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:37:26.939 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:37:26.944 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:37:26.964 -04:00 [INF] Executed page /Account/Admin/Index in 61.5768ms
2020-09-01 15:37:26.965 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:37:26.967 -04:00 [INF] Request finished in 74.5344ms 200 text/html; charset=utf-8
2020-09-01 15:37:41.140 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=&pageNumber=1  
2020-09-01 15:37:41.154 -04:00 [INF] Authorization was successful.
2020-09-01 15:37:41.155 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:37:41.166 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:37:41.169 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:37:41.173 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:37:41.179 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:37:41.183 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:37:41.212 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE [s].[Organization] = N'Burger Squire'
2020-09-01 15:37:41.225 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE [s].[Organization] = N'Burger Squire'
ORDER BY [s].[UserName]
2020-09-01 15:37:41.228 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:37:41.242 -04:00 [INF] Executed page /Account/Admin/Index in 73.2105ms
2020-09-01 15:37:41.244 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:37:41.245 -04:00 [INF] Request finished in 106.5459ms 200 text/html; charset=utf-8
2020-09-01 15:37:46.357 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-8  
2020-09-01 15:37:46.364 -04:00 [INF] Authorization was successful.
2020-09-01 15:37:46.365 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:37:46.366 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:37:46.369 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:37:46.371 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:37:46.378 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:37:46.384 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:37:46.388 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:37:46.393 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie', 'InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:37:46.399 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:37:46.402 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:37:46.413 -04:00 [INF] Executed page /Account/Admin/User in 44.8177ms
2020-09-01 15:37:46.415 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:37:46.416 -04:00 [INF] Request finished in 60.0097ms 200 text/html; charset=utf-8
2020-09-01 15:37:48.911 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin?UsrOp=0&Usr=&Org=Burger+Squire&App=&pageNumber=1  
2020-09-01 15:37:48.915 -04:00 [INF] Authorization was successful.
2020-09-01 15:37:48.916 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:37:48.918 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:37:48.921 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:37:48.925 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:37:48.932 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:37:48.937 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:37:48.945 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
WHERE [s].[Organization] = N'Burger Squire'
2020-09-01 15:37:48.952 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
WHERE [s].[Organization] = N'Burger Squire'
ORDER BY [s].[UserName]
2020-09-01 15:37:48.955 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:37:48.979 -04:00 [INF] Executed page /Account/Admin/Index in 59.1762ms
2020-09-01 15:37:48.981 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:37:48.983 -04:00 [INF] Request finished in 72.1513ms 200 text/html; charset=utf-8
2020-09-01 15:38:01.825 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-8  
2020-09-01 15:38:01.829 -04:00 [INF] Authorization was successful.
2020-09-01 15:38:01.830 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:38:01.831 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:38:01.835 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:38:01.837 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:38:01.845 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:38:01.851 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:38:01.855 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:38:01.859 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie', 'InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:38:01.863 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:38:01.866 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:38:01.877 -04:00 [INF] Executed page /Account/Admin/User in 43.1987ms
2020-09-01 15:38:01.879 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:38:01.881 -04:00 [INF] Request finished in 56.2134ms 200 text/html; charset=utf-8
2020-09-01 15:40:46.324 -04:00 [INF] Starting host...
2020-09-01 15:40:48.181 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:40:49.071 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:40:49.271 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:40:49.339 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:40:49.706 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:40:50.071 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:40:50.079 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:40:50.233 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:40:50.234 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:40:50.277 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:40:50.399 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:40:50.429 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:40:50.846 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:40:50.848 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:40:50.849 -04:00 [INF] Hosting environment: Development
2020-09-01 15:40:50.850 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:40:54.956 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:40:55.104 -04:00 [INF] Authorization failed.
2020-09-01 15:40:55.118 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-09-01 15:40:55.130 -04:00 [INF] Request finished in 176.4922ms 302 
2020-09-01 15:40:55.141 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 15:40:55.149 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
</REQUEST>

2020-09-01 15:40:55.179 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 15:40:55.238 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 15:40:55.285 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:40:55.301 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 15:40:55.303 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 15:40:55.310 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 15:40:55.312 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:40:55.506 -04:00 [INF] Executed page /Account/Login in 258.5939ms
2020-09-01 15:40:55.509 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 15:40:55.515 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_
          SxDjKUazXtbkv_jCyd4fzU0U635e2U5H945TfqDNsWaCD1_DM0jUz6QPjfLozqv852BGoWcO3Vn9SWiW
          XuCPAMHSaT4g4Tf3g1sA9uj8QoTFG9ooZ9QWkuudffwCvqCZfGIo-jiM6QjBe0; path=/; samesite
          =strict; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1
          970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv8p-JuG1TOY1CvQjudBfzHUYzjW8yL
          kmgbrkaUKtGpo0ppBr6s9kM9QB7cuBRurHsSjL2C2NQ8AE1LIUsIbisRS_VaONVm1HyVpAIwRGiNTuJk
          ROEDrLdrspp1aUoxWypw</__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 15:40:55.527 -04:00 [INF] Request finished in 386.6575ms 200 text/html; charset=utf-8
2020-09-01 15:41:12.553 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 258
2020-09-01 15:41:12.559 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv_jCyd4fzU0
          U635e2U5H945TfqDNsWaCD1_DM0jUz6QPjfLozqv852BGoWcO3Vn9SWiWXuCPAMHSaT4g4Tf3g1sA9uj
          8QoTFG9ooZ9QWkuudffwCvqCZfGIo-jiM6QjBe0
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv8p-JuG1TOY1CvQjudBfzHUYzjW8yLkmgbrkaUKtGpo0ppBr6s9kM9Q
          B7cuBRurHsSjL2C2NQ8AE1LIUsIbisRS_VaONVm1HyVpAIwRGiNTuJkROEDrLdrspp1aUoxWypw&Inpu
          t.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 15:41:12.571 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 15:41:12.577 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 15:41:12.579 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 15:41:12.612 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 15:41:12.705 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:41:12.794 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 15:41:12.911 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 15:41:12.934 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 15:41:12.937 -04:00 [INF] User logged in.
2020-09-01 15:41:12.941 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 15:41:12.946 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 15:41:12.948 -04:00 [INF] Executed page /Account/Login in 367.4945ms
2020-09-01 15:41:12.950 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 15:41:12.955 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=143F2EBA6F4EE7D443665B0C71C3858A; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv8KKpbES855w
          H1uecHWbyHInyN94zTKqIPlgaqigkD8XwctFhLR9NLuaI540-ecQdBx9yoaBzJqQ2m6Dt126_-37RkKa
          g284x5Xx8iq8J0sULUDVDeHpOiCE3MXgkFdB5UKhXNPBnvHJsp48W7c7qd1IktSQp4GIDKSEOfOcQOHY
          Cd5sYF-XrQ9VJK--DXn2eO4qOIKrcn2pZ34DV35q9KIoLAFSpRPJ3nNTYeVep_P5n2MNHxvUXEDXsdMU
          mgCBdd36eIW3hPCSSLQ0_HftTwltfOAxLLp_II5mh2DMLlwbujYCGXZ2i1UVH-p7glwZJvl5Aby7sCjN
          CCl4IBFeaTymMPJP0UOXG3qkeUwaTd9UDgTFNuFGkVyQBnrPaKq-QPV6xLHKQIDd6lj0KK00l-Kc9L49
          l1N9iwfRehy9qHyuMYgLEJdkSR7_5S7G_B53GNwB8vV8u4Z5eYGW4Xbgl6PE47zFLi_yyRLy9RadWjc3
          TL6NM_g5XcCQu0PawHYinoIqiDee8ILbN7gGZpf0zO95CMrvjqU7qEHgry3BGX_qeEk1NBKZvt7EF5Wi
          4AvCmn8_V5T9QWnl0Jx_DHweLKoZ_mqbrE_M-O3d0IbjPBNhM2X_fDOFDMcpa3ntE-4V4eQD4vwgTfRK
          TY-1ppvutJ36XfvQH-S8xRI7traSu6uxEK-mC-ekgBHrzS8Gu7GLcjEPW-BEOLzgrKKrJthGdsGNxkl2
          uIE2UnsN7QKexSR-yUpEcCnnTj-y36kmyOy9aLeKMuHuchZpAs95TZQ5hZvQERPwoZcuKAo0vgpianRY
          KZldzOwz6SwGKSizAPLQgPMPbjlhCXO0tGdRZv-KImDtci2XMputPGIfBoIICN3dg3f2BtPYNWSPL09D
          68WJ7pFQ9gDcIoAXKi9yeKz4vuZ00o0KhQPbzdeOwyDrAb4_XLCvWH4B8QFFwH9we04O5K2fflvCgkLL
          x1S0z_x0IMys6iW4u7r-OmqDN-HPClrIVwzRazcMz3KEcCv6Wv1HB-MKEn88mC3mFN0_ZiHpm7M4bT_v
          O-A43x1YNlKrMXJ5Li5cy6HSfO_ktdwPb8kBMD9m8I1a2SrdkBtM_3TodO9WY5EwxgKx7kwV3wRf20-9
          9-hAsILuHMiSnLRacEoq1g0xBvm1tKxBcEuF1I626b2; path=/; secure; samesite=none; http
          only,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1970 00:00:00 
          GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 15:41:12.963 -04:00 [INF] Request finished in 409.9915ms 302 
2020-09-01 15:41:12.964 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:41:12.975 -04:00 [INF] Authorization was successful.
2020-09-01 15:41:12.975 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:41:12.986 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:41:13.021 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:41:13.030 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:41:13.042 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:41:13.048 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:41:13.339 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:41:13.361 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:41:13.365 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:41:13.451 -04:00 [INF] Executed page /Account/Admin/Index in 463.8866ms
2020-09-01 15:41:13.453 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:41:13.455 -04:00 [INF] Request finished in 490.6224ms 200 text/html; charset=utf-8
2020-09-01 15:41:13.480 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 15:41:13.489 -04:00 [INF] The file /css/site.css was not modified
2020-09-01 15:41:13.492 -04:00 [INF] Request finished in 12.3643ms 304 text/css
2020-09-01 15:41:16.022 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-6  
2020-09-01 15:41:16.056 -04:00 [INF] Authorization was successful.
2020-09-01 15:41:16.058 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:41:16.066 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:41:16.069 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:41:16.081 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:41:16.102 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:41:16.121 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:41:16.134 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:41:16.175 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:41:16.209 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:41:16.213 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:41:16.277 -04:00 [INF] Executed page /Account/Admin/User in 209.9743ms
2020-09-01 15:41:16.279 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:41:16.282 -04:00 [INF] Request finished in 260.1762ms 200 text/html; charset=utf-8
2020-09-01 15:43:47.527 -04:00 [INF] Starting host...
2020-09-01 15:43:49.429 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-01 15:43:50.311 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-01 15:43:50.504 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-01 15:43:50.572 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-01 15:43:50.929 -04:00 [INF] 	Adding IdentityResource openid
2020-09-01 15:43:51.285 -04:00 [INF] 	Adding IdentityResource profile
2020-09-01 15:43:51.292 -04:00 [INF] 	Adding IdentityResource role
2020-09-01 15:43:51.454 -04:00 [INF] Loading project configs from SeedData ...
2020-09-01 15:43:51.455 -04:00 [INF] **Finished Loading Configurations.
2020-09-01 15:43:51.496 -04:00 [INF] User profile is available. Using 'C:\Users\denmi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-01 15:43:51.611 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-01 15:43:51.645 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-01 15:43:52.043 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-01 15:43:52.045 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-01 15:43:52.046 -04:00 [INF] Hosting environment: Development
2020-09-01 15:43:52.047 -04:00 [INF] Content root path: C:\Users\denmi\source\repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-01 15:43:54.420 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:43:54.575 -04:00 [INF] Authorization failed.
2020-09-01 15:43:54.590 -04:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2020-09-01 15:43:54.600 -04:00 [INF] Request finished in 183.4963ms 302 
2020-09-01 15:43:54.610 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex  
2020-09-01 15:43:54.617 -04:00 [INF] 
<REQUEST method='GET'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
</REQUEST>

2020-09-01 15:43:54.649 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 15:43:54.708 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 15:43:54.754 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:43:54.769 -04:00 [INF] AuthenticationScheme: Identity.External signed out.
2020-09-01 15:43:54.771 -04:00 [INF] Executed handler method OnGetAsync, returned result .
2020-09-01 15:43:54.777 -04:00 [INF] Executing an implicit handler method - ModelState is "Valid"
2020-09-01 15:43:54.778 -04:00 [INF] Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:43:54.960 -04:00 [INF] Executed page /Account/Login in 242.5738ms
2020-09-01 15:43:54.962 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 15:43:54.969 -04:00 [INF] 
<RESPONSE statusCode='200'>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Set-Cookie: Identity.External=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; s
          ecure; samesite=none; httponly,.AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_
          SxDjKUazXtbkv9WjwzqARrZNKl5UCWamhKwf-MGwiL_nRDhcifOgclkPNTZpl6tGQ1cgkEQBFCCw26G5
          IhXTFU9PhZzkmVu7cezsd4pZMuBULPT0ogg2azWP_qlbcI1gb8mbU-1U-uf9DI; path=/; samesite
          =strict; httponly,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1
          970 00:00:00 GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken>CfDJ8PYjBcVW_SxDjKUazXtbkv-ic42wxa7e8zuKRQSWcYf2MpsGkGH
          jLwhmA_zoxvjCjqj4jSHO_RaRbT73HQAgSDnp2bQKD9pNSyZZXB4tHval9qKMOWxkgC8cb2VBD-UBUvX
          UWMX5vhcwmA0I8rQKmHE</__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 15:43:54.982 -04:00 [INF] Request finished in 371.6261ms 200 text/html; charset=utf-8
2020-09-01 15:44:01.928 -04:00 [INF] Request starting HTTP/2 POST https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FIndex application/x-www-form-urlencoded 258
2020-09-01 15:44:01.933 -04:00 [INF] 
<REQUEST method='POST'>
     <URL>
          https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAdmin%2FInd
          ex
     </URL>
     <HEADERS>
          Cookie: .AspNetCore.Antiforgery.MASKUkSAukk=CfDJ8PYjBcVW_SxDjKUazXtbkv9WjwzqARrZ
          NKl5UCWamhKwf-MGwiL_nRDhcifOgclkPNTZpl6tGQ1cgkEQBFCCw26G5IhXTFU9PhZzkmVu7cezsd4p
          ZMuBULPT0ogg2azWP_qlbcI1gb8mbU-1U-uf9DI
          Referer: https://localhost:5000/Identity/Account/Login?ReturnUrl=%2FAccount%2FAd
          min%2FIndex     
     </HEADERS>
     <BODY>
          Input.Email=moe%40mcdougalls.com&Input.Password=test&__RequestVerificationToken=
          CfDJ8PYjBcVW_SxDjKUazXtbkv-ic42wxa7e8zuKRQSWcYf2MpsGkGHjLwhmA_zoxvjCjqj4jSHO_RaR
          bT73HQAgSDnp2bQKD9pNSyZZXB4tHval9qKMOWxkgC8cb2VBD-UBUvXUWMX5vhcwmA0I8rQKmHE&Inpu
          t.RememberMe=false
     </BODY>
</REQUEST>

2020-09-01 15:44:01.945 -04:00 [INF] No CORS policy found for the specified request.
2020-09-01 15:44:01.950 -04:00 [INF] Executing endpoint '/Account/Login'
2020-09-01 15:44:01.952 -04:00 [INF] Route matched with {page = "/Account/Login", area = "Identity", action = "", controller = ""}. Executing page /Account/Login
2020-09-01 15:44:01.984 -04:00 [INF] Executing handler method Microsoft.AspNetCore.Identity.UI.V4.Pages.Account.Internal.LoginModel.OnPostAsync - ModelState is "Valid"
2020-09-01 15:44:02.073 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:44:02.164 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[@__normalizedUserName_1='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] LIKE @__normalizedUserName_1
2020-09-01 15:44:02.274 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__user_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2020-09-01 15:44:02.300 -04:00 [INF] AuthenticationScheme: Identity.Application signed in.
2020-09-01 15:44:02.303 -04:00 [INF] User logged in.
2020-09-01 15:44:02.306 -04:00 [INF] Executed handler method OnPostAsync, returned result Microsoft.AspNetCore.Mvc.LocalRedirectResult.
2020-09-01 15:44:02.311 -04:00 [INF] Executing LocalRedirectResult, redirecting to /Account/Admin/Index.
2020-09-01 15:44:02.313 -04:00 [INF] Executed page /Account/Login in 359.4838ms
2020-09-01 15:44:02.315 -04:00 [INF] Executed endpoint '/Account/Login'
2020-09-01 15:44:02.321 -04:00 [INF] 
<RESPONSE statusCode='302'>
<LOCATION><![CDATA[/Account/Admin/Index]]></LOCATION>
     <URL>
          /Identity/Account/Login
     </URL>
     <HEADERS>
          Location: /Account/Admin/Index
          Set-Cookie: idsrv.session=DDA7C0D89409125561B6A0B60E4BC947; path=/; secure; same
          site=none,.AspNetCore.Identity.Application=CfDJ8PYjBcVW_SxDjKUazXtbkv-vdK-Fe0dTF
          14-qZSy2GSrFsenLeMi0BvhgUATjyJw3yiaQh2F6Gur7l0Z9iJRwF5AEPhBqFX71gc6JGdllkBjYiz25
          Ggf77QSxq70lSfFpOeMaDIReOjpDxz7tC4YFKoVP8eS1Qqi6JennoTupVDD-q75iSDMRgjf5jgeK4wXs
          FqtuIGaZzW989-uWgEmoByshzCl2Pyb8GDD4WnkNaCE0jlcFtEzID6KeWn31AJ70gH9qpRt3SgZ62G2r
          oJ_yb0qLe_NJgJgG3IzKm_Eb9pHqsWjTHueG32eSWtw1UkD4apaDW5AbBlL10Q2i-jgD0PXS0HCC5jCq
          zImAzXg9mcPO51qvu4QRHunlHliRb5a-LM1yo45Z9IV2pHnDItBDkimHzjF_h5jE90gWtZaPkGNwZavV
          rNWlU7BNAT_Vw9VFdbZoRnnrDKyzotLGTC_WK8IU0yQjjPWJ0OcW1gQmiS6MTaam4n3oafuSP9SXdKTR
          rJMA6fG16ScD2sPKzCgM1WQ1SpFcT3MnI2pGFN6EGzGi6Z1XluOw4YwC2ueQ8r6gWohwlj3JmIhNRWrE
          J60MQmCe7Z3DMOdr6ux9ljAKw74Pvl2VwAkHQRycHWt8Lx7c8z-pAgssPTxNgvpW29vXE8TXWqppz1xq
          agJ4BbNinHX1wOZVdbnqibcaMrjn2QJdnQJA9JRLY5pdzB-B5QLiKh4wV5Iff9WntJhlbZqX3XYZKLVb
          ic5S5T5R2RsIjg6Bpm9gVgXIvwH0n2XIzuRsX9tUJ9pfai-BoISQ27Y4Kc1ZsC9cr3RzR_xGwu_fawc_
          AKVxlT0Gwq9nPKh88E_fOW6YpnjYjJFInyN5RaA8rFy5y5X0xK7FtRBBOABqKw1xLqQI1A1Pk0W1in5D
          0fhqIUL8h25NddYsCULQSJ-yHLU-87IsWfQELmDPvm1nqX62lutqHO0Wz32xaTggHddE16vu7myY0Y47
          3t8pzJJOpUkK3JpARGx2jCwhyJNUo-2bR63Bhh73A18S59wGp3qHE3Qgmn25u2HhjCRBmP0jL_r120mY
          x82hJO3UcsdCt4D0gTtvZbYpWbbWF92o6MToAxsmiZjjeJFhapLEllunVQjL-QFq_sj1FW3S-PxNykHz
          7And93yo7jExYzPgXnnPLl5YRzQCe_DoRZwUnS12MV8; path=/; secure; samesite=none; http
          only,.AspNetCore.Mvc.CookieTempDataProvider=; expires=Thu, 01 Jan 1970 00:00:00 
          GMT; path=/; samesite=lax; httponly     
     </HEADERS>
     <BODY>
          RequestVerificationToken></__RequestVerificationToken
     </BODY>
</RESPONSE>
2020-09-01 15:44:02.331 -04:00 [INF] Request finished in 402.9734ms 302 
2020-09-01 15:44:02.332 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:44:02.343 -04:00 [INF] Authorization was successful.
2020-09-01 15:44:02.344 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:44:02.355 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:44:02.389 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:44:02.400 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:44:02.410 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:44:02.415 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:44:02.700 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:44:02.720 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:44:02.725 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:44:02.818 -04:00 [INF] Executed page /Account/Admin/Index in 461.418ms
2020-09-01 15:44:02.820 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:44:02.822 -04:00 [INF] Request finished in 490.0364ms 200 text/html; charset=utf-8
2020-09-01 15:44:02.842 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/css/site.css  
2020-09-01 15:44:02.852 -04:00 [INF] The file /css/site.css was not modified
2020-09-01 15:44:02.854 -04:00 [INF] Request finished in 11.9601ms 304 text/css
2020-09-01 15:44:05.253 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-3  
2020-09-01 15:44:05.272 -04:00 [INF] Authorization was successful.
2020-09-01 15:44:05.274 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:44:05.283 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:44:05.287 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:44:05.298 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:44:05.320 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:44:05.340 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:44:05.354 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:44:05.395 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:44:05.429 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:44:05.432 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:44:05.518 -04:00 [INF] Executed page /Account/Admin/User in 232.5838ms
2020-09-01 15:44:05.520 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:44:05.522 -04:00 [INF] Request finished in 269.8567ms 200 text/html; charset=utf-8
2020-09-01 15:44:19.690 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:44:19.696 -04:00 [INF] Authorization was successful.
2020-09-01 15:44:19.697 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:44:19.698 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:44:19.701 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:44:19.705 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:44:19.710 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:44:19.714 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:44:19.719 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:44:19.724 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:44:19.727 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:44:19.746 -04:00 [INF] Executed page /Account/Admin/Index in 45.2472ms
2020-09-01 15:44:19.753 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:44:19.757 -04:00 [INF] Request finished in 67.3414ms 200 text/html; charset=utf-8
2020-09-01 15:44:22.853 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-10  
2020-09-01 15:44:22.862 -04:00 [INF] Authorization was successful.
2020-09-01 15:44:22.864 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:44:22.866 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:44:22.869 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:44:22.872 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:44:22.881 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:44:22.888 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:44:22.893 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:44:22.897 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('InfoMaster') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:44:22.904 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:44:22.906 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:44:22.916 -04:00 [INF] Executed page /Account/Admin/User in 48.0742ms
2020-09-01 15:44:22.918 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:44:22.919 -04:00 [INF] Request finished in 66.6631ms 200 text/html; charset=utf-8
2020-09-01 15:44:25.970 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/Index  
2020-09-01 15:44:25.973 -04:00 [INF] Authorization was successful.
2020-09-01 15:44:25.975 -04:00 [INF] Executing endpoint '/Account/Admin/Index'
2020-09-01 15:44:25.976 -04:00 [INF] Route matched with {page = "/Account/Admin/Index", action = "", controller = "", area = ""}. Executing page /Account/Admin/Index
2020-09-01 15:44:25.979 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:44:25.982 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:44:25.986 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name]
FROM [AspNetApplications] AS [a]
2020-09-01 15:44:25.990 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.IndexModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:44:25.997 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [SearchableDomainUser] AS [s]
2020-09-01 15:44:26.001 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [s].[Applications], [s].[Email], [s].[Id], [s].[Organization], [s].[OrganizationAdmin], [s].[PhoneNumber], [s].[UserName]
FROM [SearchableDomainUser] AS [s]
ORDER BY [s].[UserName]
2020-09-01 15:44:26.014 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:44:26.032 -04:00 [INF] Executed page /Account/Admin/Index in 53.8412ms
2020-09-01 15:44:26.034 -04:00 [INF] Executed endpoint '/Account/Admin/Index'
2020-09-01 15:44:26.035 -04:00 [INF] Request finished in 66.0101ms 200 text/html; charset=utf-8
2020-09-01 15:44:28.863 -04:00 [INF] Request starting HTTP/2 GET https://localhost:5000/Account/Admin/User/-7  
2020-09-01 15:44:28.866 -04:00 [INF] Authorization was successful.
2020-09-01 15:44:28.867 -04:00 [INF] Executing endpoint '/Account/Admin/User'
2020-09-01 15:44:28.869 -04:00 [INF] Route matched with {page = "/Account/Admin/User", action = "", controller = "", area = ""}. Executing page /Account/Admin/User
2020-09-01 15:44:28.871 -04:00 [INF] Executing handler method EDennis.AspNetIdentityServer.Areas.Identity.Pages.Account.Admin.UserModel.OnGetAsync - ModelState is "Valid"
2020-09-01 15:44:28.874 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-01 15:44:28.880 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[LockoutBegin], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[Organization], [a].[OrganizationAdmin], [a].[OrganizationConfirmed], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[SuperAdmin], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2020-09-01 15:44:28.887 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application]
FROM [AspNetOrganizationApplications] AS [a]
WHERE [a].[Organization] = @__Organization_0
2020-09-01 15:44:28.891 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__Id_0
2020-09-01 15:44:28.896 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Application], [a].[ClaimType], [a].[ClaimValue], [a].[OrgAdminable]
FROM [AspNetApplicationClaims] AS [a]
WHERE [a].[Application] IN ('DataGenie') AND ([a].[ClaimType] = 'app:role')
2020-09-01 15:44:28.900 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Organization_0='?' (Size = 128) (DbType = AnsiString)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Name] AS [Value], CASE
    WHEN [a].[Name] = @__Organization_0 THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END AS [Selected]
FROM [AspNetOrganizations] AS [a]
2020-09-01 15:44:28.903 -04:00 [INF] Executed handler method OnGetAsync, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult.
2020-09-01 15:44:28.912 -04:00 [INF] Executed page /Account/Admin/User in 41.3486ms
2020-09-01 15:44:28.913 -04:00 [INF] Executed endpoint '/Account/Admin/User'
2020-09-01 15:44:28.915 -04:00 [INF] Request finished in 52.0388ms 200 text/html; charset=utf-8
2020-09-09 06:53:04.618 -04:00 [INF] Starting host...
2020-09-09 06:53:06.429 -04:00 [INF] User profile is available. Using 'C:\Users\MitchellDenC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-09 06:53:06.948 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-09 06:53:07.112 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-09 06:53:08.181 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-09 06:53:08.185 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-09 06:53:08.187 -04:00 [INF] Hosting environment: Development
2020-09-09 06:53:08.188 -04:00 [INF] Content root path: C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-09 06:54:03.066 -04:00 [INF] Starting host...
2020-09-09 06:54:04.853 -04:00 [INF] Migrating Database...
2020-09-09 06:54:05.754 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 06:54:06.251 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 06:54:06.316 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 06:54:06.340 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 06:54:16.556 -04:00 [INF] Executed DbCommand (177ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 06:54:16.614 -04:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 06:54:16.623 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 06:54:16.747 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 06:54:16.751 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 06:54:16.776 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 06:54:16.785 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 06:54:16.820 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 06:54:16.942 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 06:54:16.949 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 06:54:16.959 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 06:54:16.972 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 06:54:16.983 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:16.988 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:16.997 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.008 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.018 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.028 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.038 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.048 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.062 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.072 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.084 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.094 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.103 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.113 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.122 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.129 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.136 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.146 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 06:54:17.154 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 06:54:17.159 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 06:54:17.163 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 06:54:17.169 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 06:54:17.172 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 06:54:17.176 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 06:54:17.182 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 06:54:17.185 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 06:54:17.189 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 06:54:17.196 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 06:54:17.202 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 06:54:17.207 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 06:54:17.212 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 06:54:17.217 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 06:54:17.222 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 06:54:17.226 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 06:54:17.233 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 06:54:17.236 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 06:54:17.241 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 06:54:17.247 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 06:54:17.253 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 06:54:17.290 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 06:54:17.300 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 06:54:17.305 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 06:54:17.309 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 06:54:17.315 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 06:54:17.320 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 06:54:17.328 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 06:54:17.343 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 06:54:17.351 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 06:54:17.357 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 06:54:17.364 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 06:54:17.368 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 06:54:17.372 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 06:54:17.376 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 06:54:17.378 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 06:54:17.635 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 06:54:17.647 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 06:54:17.651 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 06:54:17.657 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 06:54:17.661 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 06:54:17.665 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 06:54:17.672 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 06:54:17.794 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 06:54:17.799 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 06:54:17.802 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 06:54:17.806 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 06:54:17.816 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 06:54:17.821 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 06:54:17.825 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 06:54:17.832 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 06:54:17.839 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 06:54:17.846 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 06:54:17.855 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 06:54:17.866 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.875 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.887 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.894 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.902 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 06:54:17.924 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 06:54:17.940 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 06:54:17.956 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 06:54:17.971 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 06:54:17.996 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 06:54:18.024 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 06:54:18.035 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 06:54:18.039 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 06:54:18.046 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 06:54:18.051 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 06:54:18.055 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 06:54:18.061 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 06:54:18.069 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 06:54:18.087 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 06:54:18.098 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 06:54:18.107 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 06:54:18.111 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 06:54:18.119 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 06:54:18.124 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 06:54:18.143 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 06:54:18.192 -04:00 [INF] User profile is available. Using 'C:\Users\MitchellDenC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-09 06:54:18.333 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-09 06:54:18.357 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-09 06:54:18.978 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-09 06:54:18.981 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-09 06:54:18.982 -04:00 [INF] Hosting environment: Development
2020-09-09 06:54:18.984 -04:00 [INF] Content root path: C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-09 06:54:42.964 -04:00 [INF] Application is shutting down...
2020-09-09 07:01:01.955 -04:00 [INF] Starting host...
2020-09-09 07:01:03.745 -04:00 [INF] Migrating Database...
2020-09-09 07:01:04.650 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:01:05.226 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:01:08.299 -04:00 [INF] Executed DbCommand (3,010ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 07:01:08.327 -04:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 07:01:18.529 -04:00 [INF] Executed DbCommand (159ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 07:01:18.584 -04:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 07:01:18.596 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:01:18.720 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 07:01:18.723 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:01:18.750 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:01:18.760 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:01:18.795 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 07:01:18.912 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 07:01:18.917 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 07:01:18.927 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 07:01:18.939 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 07:01:18.946 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:18.954 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:18.965 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:18.976 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:18.984 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:18.995 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.002 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.013 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.026 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.039 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.046 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.054 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.065 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.074 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.083 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.093 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.099 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.107 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 07:01:19.111 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 07:01:19.117 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 07:01:19.120 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 07:01:19.126 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 07:01:19.131 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 07:01:19.138 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 07:01:19.143 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 07:01:19.151 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 07:01:19.156 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 07:01:19.161 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 07:01:19.167 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 07:01:19.170 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 07:01:19.175 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 07:01:19.179 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 07:01:19.183 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 07:01:19.187 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 07:01:19.192 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 07:01:19.197 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 07:01:19.202 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 07:01:19.208 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 07:01:19.213 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 07:01:19.255 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:01:19.265 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:01:19.269 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:01:19.273 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:01:19.278 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:01:19.285 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:01:19.293 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 07:01:19.308 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 07:01:19.318 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 07:01:19.323 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 07:01:19.328 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 07:01:19.332 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 07:01:19.335 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 07:01:19.340 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 07:01:19.344 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 07:01:19.622 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:01:19.635 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:01:19.640 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:01:19.650 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:01:19.655 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:01:19.662 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:01:19.667 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 07:01:19.743 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:01:19.747 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:01:19.750 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:01:19.753 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:01:19.757 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 07:01:19.763 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 07:01:19.770 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 07:01:19.778 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 07:01:19.784 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 07:01:19.793 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 07:01:19.802 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 07:01:19.814 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.823 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.829 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.836 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.850 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:01:19.874 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 07:01:19.886 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 07:01:19.900 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 07:01:19.915 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 07:01:19.939 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 07:01:19.964 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 07:01:19.976 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 07:01:19.980 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 07:01:19.985 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 07:01:19.989 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 07:01:19.994 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 07:01:20.001 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 07:01:20.009 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 07:01:20.031 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 07:01:20.042 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 07:01:20.054 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 07:01:20.063 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 07:01:20.076 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 07:01:20.088 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 07:01:20.124 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 07:01:20.177 -04:00 [INF] User profile is available. Using 'C:\Users\MitchellDenC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-09 07:01:20.324 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-09 07:01:20.346 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-09 07:01:21.067 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-09 07:01:21.071 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-09 07:01:21.073 -04:00 [INF] Hosting environment: Development
2020-09-09 07:01:21.075 -04:00 [INF] Content root path: C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-09 07:13:49.278 -04:00 [INF] Starting host...
2020-09-09 07:13:51.035 -04:00 [INF] Migrating Database...
2020-09-09 07:13:51.937 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:13:52.420 -04:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:13:55.496 -04:00 [INF] Executed DbCommand (3,014ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 07:13:55.524 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 07:14:05.712 -04:00 [INF] Executed DbCommand (136ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 07:14:05.771 -04:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 07:14:05.783 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:14:05.909 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 07:14:05.914 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:14:05.943 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:14:05.955 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:14:05.993 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 07:14:06.115 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 07:14:06.120 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 07:14:06.127 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 07:14:06.143 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 07:14:06.151 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.159 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.169 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.180 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.189 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.195 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.204 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.213 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.219 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.226 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.232 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.238 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.247 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.255 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.261 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.271 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.281 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.289 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 07:14:06.292 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 07:14:06.297 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 07:14:06.302 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 07:14:06.306 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 07:14:06.311 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 07:14:06.315 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 07:14:06.320 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 07:14:06.323 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 07:14:06.327 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 07:14:06.334 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 07:14:06.339 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 07:14:06.345 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 07:14:06.350 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 07:14:06.355 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 07:14:06.359 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 07:14:06.362 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 07:14:06.368 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 07:14:06.371 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 07:14:06.376 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 07:14:06.381 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 07:14:06.387 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 07:14:06.422 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:14:06.433 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:14:06.437 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:14:06.441 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:14:06.445 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:14:06.452 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:14:06.460 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 07:14:06.476 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 07:14:06.487 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 07:14:06.495 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 07:14:06.500 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 07:14:06.504 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 07:14:06.508 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 07:14:06.512 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 07:14:06.518 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 07:14:06.780 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:14:06.794 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:14:06.801 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:14:06.805 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:14:06.810 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:14:06.815 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:14:06.822 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 07:14:06.902 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:14:06.906 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:14:06.911 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:14:06.916 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:14:06.920 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 07:14:06.928 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 07:14:06.932 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 07:14:06.939 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 07:14:06.946 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 07:14:06.953 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 07:14:06.963 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 07:14:06.973 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.982 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:06.992 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:07.002 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:07.016 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:14:07.039 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 07:14:07.051 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 07:14:07.064 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 07:14:07.078 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 07:14:07.102 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 07:14:07.124 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 07:14:07.132 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 07:14:07.139 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 07:14:07.144 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 07:14:07.149 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 07:14:07.154 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 07:14:07.160 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 07:14:07.166 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 07:14:07.186 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 07:14:07.192 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 07:14:07.201 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 07:14:07.205 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 07:14:07.211 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 07:14:07.220 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 07:14:07.241 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 07:14:07.295 -04:00 [INF] User profile is available. Using 'C:\Users\MitchellDenC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-09 07:14:07.481 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-09 07:14:07.502 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-09 07:14:09.175 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-09 07:14:09.178 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-09 07:14:09.180 -04:00 [INF] Hosting environment: Development
2020-09-09 07:14:09.182 -04:00 [INF] Content root path: C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-09 07:15:56.583 -04:00 [INF] Starting host...
2020-09-09 07:15:58.270 -04:00 [INF] Migrating Database...
2020-09-09 07:15:59.180 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:15:59.675 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:15:59.744 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 07:15:59.770 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 07:16:09.977 -04:00 [INF] Executed DbCommand (167ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 07:16:10.039 -04:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 07:16:10.050 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:16:10.181 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 07:16:10.185 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:16:10.212 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:16:10.222 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:16:10.257 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 07:16:10.391 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 07:16:10.397 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 07:16:10.403 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 07:16:10.413 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 07:16:10.422 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.431 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.437 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.445 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.454 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.464 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.468 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.477 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.486 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.493 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.501 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.509 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.518 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.527 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.536 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.542 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.550 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:10.558 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 07:16:10.563 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 07:16:10.571 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 07:16:10.581 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 07:16:10.590 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 07:16:10.598 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 07:16:10.603 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 07:16:10.608 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 07:16:10.614 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 07:16:10.617 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 07:16:10.622 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 07:16:10.627 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 07:16:10.632 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 07:16:10.637 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 07:16:10.642 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 07:16:10.648 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 07:16:10.653 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 07:16:10.658 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 07:16:10.663 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 07:16:10.667 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 07:16:10.672 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 07:16:10.678 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 07:16:10.716 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:16:10.721 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:16:10.724 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:16:10.729 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:16:10.734 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:16:10.741 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:16:10.747 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 07:16:10.760 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 07:16:10.766 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 07:16:10.773 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 07:16:10.777 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 07:16:10.783 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 07:16:10.786 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 07:16:10.792 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 07:16:10.797 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 07:16:11.060 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:16:11.073 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:16:11.080 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:16:11.085 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:16:11.090 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:16:11.098 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:16:11.106 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 07:16:11.190 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:16:11.194 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:16:11.198 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:16:11.202 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:16:11.208 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 07:16:11.217 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 07:16:11.223 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 07:16:11.230 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 07:16:11.240 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 07:16:11.249 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 07:16:11.259 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 07:16:11.268 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:11.278 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:11.284 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:11.293 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:11.304 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:16:11.325 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 07:16:11.336 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 07:16:11.351 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 07:16:11.366 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 07:16:11.389 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 07:16:11.418 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 07:16:11.430 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 07:16:11.434 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 07:16:11.440 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 07:16:11.443 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 07:16:11.450 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 07:16:11.456 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 07:16:11.462 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 07:16:11.480 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 07:16:11.486 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 07:16:11.496 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 07:16:11.499 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 07:16:11.506 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 07:16:11.512 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 07:16:11.530 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 07:16:11.575 -04:00 [INF] User profile is available. Using 'C:\Users\MitchellDenC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-09 07:16:11.721 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-09 07:16:11.748 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-09 07:16:12.340 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-09 07:16:12.344 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-09 07:16:12.345 -04:00 [INF] Hosting environment: Development
2020-09-09 07:16:12.347 -04:00 [INF] Content root path: C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-09 07:19:17.364 -04:00 [INF] Starting host...
2020-09-09 07:19:19.007 -04:00 [INF] Migrating Database...
2020-09-09 07:19:19.915 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:19:20.388 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:19:20.451 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 07:19:20.474 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 07:19:30.700 -04:00 [INF] Executed DbCommand (186ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 07:19:30.752 -04:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 07:19:30.762 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:19:30.893 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 07:19:30.898 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:19:30.925 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:19:30.935 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:19:30.970 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 07:19:31.103 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 07:19:31.109 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 07:19:31.121 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 07:19:31.135 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 07:19:31.141 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.150 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.159 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.166 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.177 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.185 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.190 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.197 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.206 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.212 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.223 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.231 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.242 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.250 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.260 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.272 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.285 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:31.295 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 07:19:31.304 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 07:19:31.310 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 07:19:31.314 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 07:19:31.320 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 07:19:31.325 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 07:19:31.331 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 07:19:31.335 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 07:19:31.340 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 07:19:31.344 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 07:19:31.349 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 07:19:31.353 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 07:19:31.359 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 07:19:31.363 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 07:19:31.366 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 07:19:31.371 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 07:19:31.376 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 07:19:31.383 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 07:19:31.386 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 07:19:31.391 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 07:19:31.396 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 07:19:31.403 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 07:19:31.446 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:19:31.456 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:19:31.461 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:19:31.466 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:19:31.473 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:19:31.483 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:19:31.491 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 07:19:31.508 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 07:19:31.517 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 07:19:31.526 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 07:19:31.534 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 07:19:31.540 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 07:19:31.547 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 07:19:31.553 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 07:19:31.557 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 07:19:31.834 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:19:31.848 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:19:31.852 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:19:31.858 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:19:31.864 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:19:31.870 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:19:31.874 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 07:19:31.963 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:19:31.967 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:19:31.975 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:19:31.979 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:19:31.984 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 07:19:31.992 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 07:19:32.000 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 07:19:32.007 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 07:19:32.012 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 07:19:32.023 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 07:19:32.034 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 07:19:32.044 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:32.054 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:32.059 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:32.066 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:32.077 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:19:32.102 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 07:19:32.119 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 07:19:32.135 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 07:19:32.150 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 07:19:32.173 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 07:19:32.203 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 07:19:32.214 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 07:19:32.219 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 07:19:32.226 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 07:19:32.230 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 07:19:32.235 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 07:19:32.242 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 07:19:32.248 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 07:19:32.269 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 07:19:32.278 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 07:19:32.289 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 07:19:32.297 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 07:19:32.302 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 07:19:32.309 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 07:19:32.330 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 07:19:32.384 -04:00 [INF] User profile is available. Using 'C:\Users\MitchellDenC\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2020-09-09 07:19:32.523 -04:00 [INF] Starting IdentityServer4 version 4.0.4+1b36d1b414f4e0f965af97ab2a7e9dd1b5167bca
2020-09-09 07:19:32.546 -04:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2020-09-09 07:19:33.144 -04:00 [INF] Now listening on: https://localhost:5000
2020-09-09 07:19:33.148 -04:00 [INF] Application started. Press Ctrl+C to shut down.
2020-09-09 07:19:33.150 -04:00 [INF] Hosting environment: Development
2020-09-09 07:19:33.152 -04:00 [INF] Content root path: C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer
2020-09-09 07:24:17.474 -04:00 [INF] Starting host...
2020-09-09 07:24:29.634 -04:00 [INF] Migrating Database...
2020-09-09 07:24:30.532 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:24:30.999 -04:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:24:34.067 -04:00 [INF] Executed DbCommand (3,007ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 07:24:34.095 -04:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 07:24:44.347 -04:00 [INF] Executed DbCommand (210ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 07:24:44.406 -04:00 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 07:24:44.418 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:24:44.547 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 07:24:44.552 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:24:44.580 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:24:44.590 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:24:44.625 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 07:24:44.754 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 07:24:44.762 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 07:24:44.771 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 07:24:44.784 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 07:24:44.794 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.802 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.808 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.818 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.830 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.840 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.853 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.861 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.870 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.880 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.891 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.901 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.915 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.924 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.932 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.941 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.951 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:44.960 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 07:24:44.964 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 07:24:44.968 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 07:24:44.975 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 07:24:44.980 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 07:24:44.985 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 07:24:44.992 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 07:24:44.997 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 07:24:45.004 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 07:24:45.009 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 07:24:45.012 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 07:24:45.016 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 07:24:45.021 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 07:24:45.025 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 07:24:45.031 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 07:24:45.036 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 07:24:45.041 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 07:24:45.048 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 07:24:45.056 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 07:24:45.062 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 07:24:45.067 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 07:24:45.075 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 07:24:45.123 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:24:45.133 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:24:45.138 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:24:45.143 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:24:45.148 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:24:45.155 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:24:45.165 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 07:24:45.180 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 07:24:45.196 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 07:24:45.211 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 07:24:45.216 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 07:24:45.224 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 07:24:45.229 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 07:24:45.233 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 07:24:45.238 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 07:24:45.542 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:24:45.553 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:24:45.557 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:24:45.563 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:24:45.566 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:24:45.571 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:24:45.579 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 07:24:45.670 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:24:45.674 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:24:45.679 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:24:45.684 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:24:45.691 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 07:24:45.699 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 07:24:45.710 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 07:24:45.718 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 07:24:45.725 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 07:24:45.731 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 07:24:45.741 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 07:24:45.750 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:45.761 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:45.767 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:45.776 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:45.788 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:24:45.811 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 07:24:45.824 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 07:24:45.838 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 07:24:45.853 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 07:24:45.877 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 07:24:45.910 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 07:24:45.917 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 07:24:45.926 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 07:24:45.930 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 07:24:45.936 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 07:24:45.941 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 07:24:45.947 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 07:24:45.952 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 07:24:45.973 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 07:24:45.979 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 07:24:45.990 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 07:24:45.993 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 07:24:46.001 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 07:24:46.007 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 07:24:46.027 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 07:27:46.168 -04:00 [INF] Starting host...
2020-09-09 07:29:25.369 -04:00 [INF] Starting host...
2020-09-09 07:29:33.416 -04:00 [FTL] Host terminated unexpectedly.
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.Open()
   at EDennis.AspNetIdentityServer.SeedDataLoader.Load() in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 100
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 32
2020-09-09 07:31:48.885 -04:00 [INF] Starting host...
2020-09-09 07:32:00.733 -04:00 [INF] Migrating Database...
2020-09-09 07:32:01.658 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:32:02.150 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:32:02.216 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 07:32:02.239 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 07:32:12.459 -04:00 [INF] Executed DbCommand (178ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 07:32:12.513 -04:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 07:32:12.523 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:32:12.649 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 07:32:12.654 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:32:12.683 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:32:12.695 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:32:12.734 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 07:32:12.861 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 07:32:12.868 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 07:32:12.879 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 07:32:12.895 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 07:32:12.906 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.917 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.927 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.938 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.947 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.952 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.962 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.971 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.981 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.987 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:12.995 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.006 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.016 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.026 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.031 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.041 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.054 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.063 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 07:32:13.070 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 07:32:13.074 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 07:32:13.080 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 07:32:13.086 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 07:32:13.092 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 07:32:13.102 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 07:32:13.106 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 07:32:13.113 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 07:32:13.117 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 07:32:13.122 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 07:32:13.129 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 07:32:13.133 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 07:32:13.137 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 07:32:13.141 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 07:32:13.145 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 07:32:13.151 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 07:32:13.155 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 07:32:13.160 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 07:32:13.165 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 07:32:13.170 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 07:32:13.174 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 07:32:13.216 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:32:13.227 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:32:13.231 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:32:13.237 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:32:13.240 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:32:13.246 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:32:13.253 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 07:32:13.266 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 07:32:13.272 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 07:32:13.282 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 07:32:13.292 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 07:32:13.296 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 07:32:13.303 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 07:32:13.308 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 07:32:13.313 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 07:32:13.616 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 07:32:13.628 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:32:13.634 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:32:13.638 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 07:32:13.644 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 07:32:13.651 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 07:32:13.656 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 07:32:13.737 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:32:13.742 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:32:13.746 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:32:13.751 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 07:32:13.756 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 07:32:13.765 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 07:32:13.774 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 07:32:13.780 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 07:32:13.787 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 07:32:13.797 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 07:32:13.808 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 07:32:13.820 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.829 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.840 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.850 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.860 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 07:32:13.882 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 07:32:13.895 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 07:32:13.908 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 07:32:13.924 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 07:32:13.964 -04:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 07:32:14.012 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 07:32:14.020 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 07:32:14.028 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 07:32:14.034 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 07:32:14.039 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 07:32:14.044 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 07:32:14.053 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 07:32:14.061 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 07:32:14.082 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 07:32:14.089 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 07:32:14.100 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 07:32:14.103 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 07:32:14.109 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 07:32:14.120 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 07:32:14.139 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 07:32:14.160 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 07:32:14.289 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 07:32:14.416 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 07:32:14.512 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 07:32:14.856 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 07:32:15.241 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 07:32:15.250 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 07:32:15.395 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 07:32:15.411 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 07:32:15.415 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 07:32:15.549 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 07:32:15.578 -04:00 [FTL] Host terminated unexpectedly.
System.Exception: Could not find/bind Clients section in SeedData\EDennis.Samples.ColorApi
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadConfigs(IEnumerable`1 projects, ConfigurationDbContext cContext, DomainIdentityDbContext diContext) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 179
   at EDennis.AspNetIdentityServer.SeedDataLoader.Load() in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 107
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 32
2020-09-09 09:01:50.404 -04:00 [INF] Starting host...
2020-09-09 09:01:52.302 -04:00 [INF] Migrating Database...
2020-09-09 09:01:53.230 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 09:01:53.707 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:01:53.773 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 09:01:53.796 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 09:02:04.073 -04:00 [INF] Executed DbCommand (232ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 09:02:04.127 -04:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 09:02:04.137 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:02:04.274 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 09:02:04.278 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:02:04.307 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:02:04.317 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 09:02:04.353 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 09:02:04.478 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 09:02:04.484 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 09:02:04.494 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 09:02:04.507 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 09:02:04.518 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.530 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.539 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.547 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.555 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.563 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.573 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.583 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.590 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.598 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.608 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.620 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.631 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.642 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.650 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.662 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.671 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:04.678 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 09:02:04.682 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 09:02:04.688 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 09:02:04.693 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 09:02:04.697 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 09:02:04.702 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 09:02:04.707 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 09:02:04.712 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 09:02:04.717 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 09:02:04.722 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 09:02:04.727 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 09:02:04.732 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 09:02:04.737 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 09:02:04.742 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 09:02:04.747 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 09:02:04.751 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 09:02:04.756 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 09:02:04.760 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 09:02:04.764 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 09:02:04.769 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 09:02:04.774 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 09:02:04.779 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 09:02:04.817 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 09:02:04.827 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:02:04.833 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:02:04.837 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:02:04.843 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:02:04.848 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 09:02:04.856 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 09:02:04.872 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 09:02:04.882 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 09:02:04.891 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 09:02:04.906 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 09:02:04.916 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 09:02:04.924 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 09:02:04.935 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 09:02:04.943 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 09:02:05.209 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 09:02:05.221 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:02:05.229 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:02:05.234 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:02:05.239 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:02:05.246 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 09:02:05.255 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 09:02:05.355 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 09:02:05.360 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 09:02:05.364 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 09:02:05.369 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 09:02:05.377 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 09:02:05.388 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 09:02:05.395 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 09:02:05.403 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 09:02:05.412 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 09:02:05.421 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 09:02:05.433 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 09:02:05.443 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:05.452 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:05.463 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:05.473 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:05.483 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:02:05.505 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 09:02:05.517 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 09:02:05.532 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 09:02:05.549 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 09:02:05.573 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 09:02:05.603 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 09:02:05.614 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 09:02:05.623 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 09:02:05.631 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 09:02:05.636 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 09:02:05.640 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 09:02:05.647 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 09:02:05.653 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 09:02:05.673 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 09:02:05.682 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 09:02:05.694 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 09:02:05.702 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 09:02:05.711 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 09:02:05.721 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 09:02:05.738 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 09:02:05.762 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 09:02:05.869 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 09:02:05.959 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 09:02:06.025 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 09:02:06.347 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 09:02:06.736 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 09:02:06.746 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 09:02:06.895 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 09:02:06.899 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 09:02:06.902 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 09:02:07.035 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 09:02:07.042 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 09:02:07.049 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 09:02:07.064 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 09:02:07.072 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 09:02:07.117 -04:00 [FTL] Host terminated unexpectedly.
System.ArgumentException: An item with the same key has already been added. Key: user
   at System.Collections.Generic.Dictionary`2.TryInsert(TKey key, TValue value, InsertionBehavior behavior)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector)
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadTestUsers(DomainIdentityDbContext context, String project, List`1 users) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 223
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadConfigs(IEnumerable`1 projects, ConfigurationDbContext cContext, DomainIdentityDbContext diContext) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 197
   at EDennis.AspNetIdentityServer.SeedDataLoader.Load() in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 107
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 32
2020-09-09 09:52:53.521 -04:00 [INF] Starting host...
2020-09-09 09:52:55.264 -04:00 [INF] Migrating Database...
2020-09-09 09:52:56.180 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 09:52:56.656 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:52:56.726 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 09:52:56.751 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 09:53:06.994 -04:00 [INF] Executed DbCommand (202ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 09:53:07.051 -04:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 09:53:07.061 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:53:07.195 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 09:53:07.200 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:53:07.226 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:53:07.236 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 09:53:07.271 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 09:53:07.392 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 09:53:07.399 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 09:53:07.411 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 09:53:07.422 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 09:53:07.432 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.440 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.446 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.456 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.463 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.469 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.476 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.484 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.490 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.497 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.503 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.510 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.518 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.524 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.533 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.542 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.554 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:07.564 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 09:53:07.573 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 09:53:07.578 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 09:53:07.584 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 09:53:07.589 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 09:53:07.593 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 09:53:07.598 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 09:53:07.603 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 09:53:07.608 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 09:53:07.613 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 09:53:07.619 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 09:53:07.624 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 09:53:07.630 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 09:53:07.633 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 09:53:07.637 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 09:53:07.642 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 09:53:07.647 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 09:53:07.652 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 09:53:07.656 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 09:53:07.662 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 09:53:07.665 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 09:53:07.671 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 09:53:07.709 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 09:53:07.713 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:53:07.717 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:53:07.722 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:53:07.727 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:53:07.733 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 09:53:07.739 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 09:53:07.753 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 09:53:07.759 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 09:53:07.765 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 09:53:07.769 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 09:53:07.775 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 09:53:07.780 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 09:53:07.786 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 09:53:07.791 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 09:53:08.067 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 09:53:08.080 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:53:08.084 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:53:08.090 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 09:53:08.096 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 09:53:08.103 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 09:53:08.108 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 09:53:08.190 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 09:53:08.196 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 09:53:08.200 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 09:53:08.205 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 09:53:08.210 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 09:53:08.219 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 09:53:08.229 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 09:53:08.239 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 09:53:08.247 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 09:53:08.258 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 09:53:08.269 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 09:53:08.280 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:08.291 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:08.301 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:08.309 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:08.316 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 09:53:08.337 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 09:53:08.352 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 09:53:08.368 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 09:53:08.382 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 09:53:08.404 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 09:53:08.433 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 09:53:08.445 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 09:53:08.448 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 09:53:08.454 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 09:53:08.458 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 09:53:08.463 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 09:53:08.470 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 09:53:08.475 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 09:53:08.492 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 09:53:08.500 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 09:53:08.509 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 09:53:08.513 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 09:53:08.519 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 09:53:08.525 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 09:53:08.541 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 09:53:08.564 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 09:53:08.655 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 09:53:08.734 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 09:53:08.800 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 09:53:09.126 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 09:53:09.517 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 09:53:09.527 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 09:53:09.670 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 09:53:09.675 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 09:53:09.678 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 09:53:09.812 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 09:53:09.820 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 09:53:09.825 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 09:53:09.834 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 09:53:09.841 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 09:53:09.884 -04:00 [FTL] Host terminated unexpectedly.
System.ArgumentException: An item with the same key has already been added. Key: user
   at System.Collections.Generic.Dictionary`2.TryInsert(TKey key, TValue value, InsertionBehavior behavior)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector, IEqualityComparer`1 comparer)
   at System.Linq.Enumerable.ToDictionary[TSource,TKey,TElement](IEnumerable`1 source, Func`2 keySelector, Func`2 elementSelector)
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadTestUsers(DomainIdentityDbContext context, String project, List`1 users) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 223
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadConfigs(IEnumerable`1 projects, ConfigurationDbContext cContext, DomainIdentityDbContext diContext) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 197
   at EDennis.AspNetIdentityServer.SeedDataLoader.Load() in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 107
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 32
2020-09-09 10:02:33.719 -04:00 [INF] Starting host...
2020-09-09 10:02:35.617 -04:00 [INF] Migrating Database...
2020-09-09 10:02:36.525 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:02:37.004 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:02:37.074 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 10:02:37.097 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 10:02:47.338 -04:00 [INF] Executed DbCommand (203ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 10:02:47.392 -04:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 10:02:47.402 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:02:47.536 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 10:02:47.541 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:02:47.569 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:02:47.579 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:02:47.615 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 10:02:47.748 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 10:02:47.755 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 10:02:47.765 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 10:02:47.779 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 10:02:47.794 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.817 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.837 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.849 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.863 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.873 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.886 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.896 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.908 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.922 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.937 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.946 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.955 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.963 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.967 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.978 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.983 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:47.990 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 10:02:47.994 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 10:02:47.999 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 10:02:48.004 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 10:02:48.009 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 10:02:48.013 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 10:02:48.019 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 10:02:48.025 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 10:02:48.030 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 10:02:48.036 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 10:02:48.043 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 10:02:48.051 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 10:02:48.060 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 10:02:48.065 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 10:02:48.071 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 10:02:48.078 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 10:02:48.082 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 10:02:48.090 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 10:02:48.094 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 10:02:48.101 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 10:02:48.106 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 10:02:48.114 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 10:02:48.160 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:02:48.172 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:02:48.179 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:02:48.185 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:02:48.193 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:02:48.199 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:02:48.209 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 10:02:48.237 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 10:02:48.243 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 10:02:48.252 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 10:02:48.256 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 10:02:48.262 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 10:02:48.265 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 10:02:48.270 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 10:02:48.274 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 10:02:48.606 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:02:48.620 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:02:48.623 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:02:48.631 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:02:48.635 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:02:48.644 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:02:48.652 -04:00 [INF] Applying migration '20200901172105_DomainIdentityInitial'.
2020-09-09 10:02:48.764 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:02:48.768 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:02:48.772 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:02:48.777 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:02:48.783 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimType] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimType], [ClaimValue])
);
2020-09-09 10:02:48.794 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 10:02:48.800 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 10:02:48.806 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 10:02:48.813 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 10:02:48.824 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 10:02:48.836 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 10:02:48.850 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:48.862 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:48.874 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:48.884 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:48.894 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:02:48.918 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimType], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'app:role', 'admin', CAST(1 AS bit)),
('DataGenie', 'app:role', 'user', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'admin', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'app:role', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimType', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 10:02:48.930 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 10:02:48.944 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 10:02:48.958 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name])
VALUES ('Burger Squire'),
('McDougall''s'),
('Windy''s');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 10:02:48.981 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'89e3aefc-48b6-4c00-a2ea-3e5949438e2e', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ABECH/3HNbsodHmwTd7Di9HAIDvmFKfbWynWnaGOn7wVQNyNvjRuaZC7sCBgUYxs/A==', N'222-333-4446', CAST(0 AS bit), N'ae61c7b2-80c7-409c-939b-176f24416b8b', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'f9db615d-a76c-417b-8c9a-2d7bbfdb2d37', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'AHQhhv/JbmFkA5O3OJyamWfdtRAt5eC3YuR9FOwmNHwZsgkGX80SckP/C6uLO6AtBg==', N'000-111-2222', CAST(0 AS bit), N'8a908948-f7a2-45a4-a2cc-ba4b121d6a62', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'7ee29c84-9b20-4f23-8c4c-1a7ad68a391e', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ALG1OP/NCWjFpC5rSBSDrauVvPA3EbMxby77Uwt8UKpH58agaCXlnIv1cg4xQE/iHA==', N'111-222-3333', CAST(1 AS bit), N'42243ffc-d18c-4b22-890e-bd4c519ddcf7', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'dcb1bd4e-df97-4f43-a60c-9bedd760709c', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AEHKZugG3D/te0QUgaQ38qtmApdbvE9TjpS38iG/btctQsuWudaCH3UGTAvv6c5qIA==', N'222-333-4444', CAST(0 AS bit), N'83d6a4a8-4ca3-4a32-aecc-f36c13dfcb9c', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'cd4b8ee6-2df0-4bfe-881e-2ed03b93ed51', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AHc7eMal2Ju+KxGC+DNX5ykpx/dPdmhq4z4mPoJ3cEL1BYu78szo+EqmDdmqSpGE4Q==', N'000-111-2223', CAST(0 AS bit), N'0732f0a2-1ddc-44e1-91bf-eba6a70d0c9a', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'b64813f6-221c-4a26-8ef8-cf6f380c9db2', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGClgbBglDK154+J/FK9rR0yAzwS8TM029v6bZSEAd/ByzszB4RYa/zBolN34s8F6g==', N'111-222-3334', CAST(1 AS bit), N'c3d92933-c2fc-48e2-bfa9-82819292f2bf', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'dc643442-e6a5-4b13-82ca-687ca7aea13f', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AKonnfUXy2u6fFkWm5wH7KCO7EPylRXBRSQy02rw3y+VawwCLj8gy+aUQL/C9Z3e0g==', N'222-333-4445', CAST(0 AS bit), N'0c2894ae-0f6c-4e23-9c80-9628c8ec38a7', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'88a26bdb-f4c0-46be-98e1-67d9a767dd6f', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'APFsitEgUngOUmkzmJX4FcC0QWUD3j3itJ4kGejCqdNR8FMeNfnay53l9wBJbAjlVw==', N'000-111-2224', CAST(0 AS bit), N'33873d4c-7429-428e-b7fd-04e0b859fef7', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'dd41f3b8-70f7-4e55-92ed-0acb00e64912', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APd0egA0D56GUOXi94zvCXi6V6+oiaAeqemgLjiDYYAx6oVpTM/vJZsY/6qykRTZiQ==', N'111-222-3335', CAST(1 AS bit), N'f71c44eb-51b8-4aed-a92b-a763387e9501', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'65ae7b12-27cb-4bde-8bab-416e57414c9d', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'ALa6v4WiOqr74SpTWqR1nYCBjV4IffezJ9U1lDsnWcBw4cIQFqNkpiK9M5f6XxSgiQ==', N'222-333-4446', CAST(0 AS bit), N'6cfffb56-34e9-425f-b4ab-575c66939eb3', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'e242e8fc-d5d0-40fe-b7b8-7dbd570b3167', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AGUebo3/plsz2lMKYn7bZ/BIFk3gQvZ5m3rsbGl9SNvZNVyoa6IGJtaPjIpyfOj2tw==', N'999-888-7777', CAST(0 AS bit), N'3d82bce7-da76-4d86-8605-d2594f80180b', CAST(0 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 10:02:49.020 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'app:role', N'DataGenie:admin', -1),
(-9904, N'app:role', N'DataGenie:admin', -2),
(-9905, N'app:role', N'InfoMaster:admin', -2),
(-9907, N'app:role', N'InfoMaster:admin', -3),
(-9908, N'app:role', N'DataGenie:user', -4),
(-9909, N'app:role', N'DataGenie:user', -5),
(-9910, N'app:role', N'InfoMaster:readonly', -5),
(-9911, N'app:role', N'InfoMaster:readonly', -6),
(-9912, N'app:role', N'DataGenie:user', -7),
(-9913, N'app:role', N'DataGenie:user', -8),
(-9914, N'app:role', N'InfoMaster:readonly', -8),
(-9915, N'app:role', N'InfoMaster:readonly', -9),
(-9916, N'app:role', N'InfoMaster:auditor', -10),
(-9917, N'*:role', N'*:admin', -11);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 10:02:49.030 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 10:02:49.033 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 10:02:49.038 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 10:02:49.043 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 10:02:49.047 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 10:02:49.055 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 10:02:49.063 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 10:02:49.083 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 10:02:49.090 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 10:02:49.100 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 10:02:49.103 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 10:02:49.111 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 10:02:49.117 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 10:02:49.136 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200901172105_DomainIdentityInitial', N'3.1.7');
2020-09-09 10:02:49.156 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 10:02:49.264 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 10:02:49.344 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 10:02:49.413 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 10:02:49.738 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 10:02:50.160 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 10:02:50.168 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 10:02:50.321 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 10:02:50.326 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 10:02:50.328 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 10:02:50.460 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 10:02:50.467 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 10:02:50.474 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 10:02:50.482 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 10:02:50.492 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 10:02:50.568 -04:00 [FTL] Host terminated unexpectedly.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'ClaimTypePrefix'.
Invalid column name 'ClaimTypePrefix'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at Microsoft.Data.SqlClient.SqlDataReader.get_MetaData()
   at Microsoft.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean isAsync, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry, String method)
   at Microsoft.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader()
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReader(RelationalCommandParameterObject parameterObject)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.InitializeReader(DbContext _, Boolean result)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadTestUsers(DomainIdentityDbContext context, String project, List`1 users) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 227
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadConfigs(IEnumerable`1 projects, ConfigurationDbContext cContext, DomainIdentityDbContext diContext) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 197
   at EDennis.AspNetIdentityServer.SeedDataLoader.Load() in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 107
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 32
ClientConnectionId:26fd39be-474c-47f6-9b7b-9ae962b3f3e3
Error Number:207,State:1,Class:16
2020-09-09 10:38:12.112 -04:00 [INF] Starting host...
2020-09-09 10:38:14.053 -04:00 [INF] Migrating Database...
2020-09-09 10:38:15.034 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:38:15.539 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:38:15.616 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 10:38:15.642 -04:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 10:38:25.891 -04:00 [INF] Executed DbCommand (197ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 10:38:25.947 -04:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 10:38:25.958 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:38:26.097 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 10:38:26.101 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:38:26.131 -04:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:38:26.143 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:38:26.180 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 10:38:26.303 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 10:38:26.309 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 10:38:26.316 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 10:38:26.326 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 10:38:26.336 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.346 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.357 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.370 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.379 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.385 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.395 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.405 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.416 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.426 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.434 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.446 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.457 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.467 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.478 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.489 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.496 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:26.507 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 10:38:26.513 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 10:38:26.518 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 10:38:26.523 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 10:38:26.526 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 10:38:26.530 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 10:38:26.535 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 10:38:26.540 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 10:38:26.544 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 10:38:26.551 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 10:38:26.557 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 10:38:26.564 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 10:38:26.568 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 10:38:26.574 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 10:38:26.578 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 10:38:26.582 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 10:38:26.589 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 10:38:26.595 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 10:38:26.601 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 10:38:26.605 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 10:38:26.610 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 10:38:26.616 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 10:38:26.650 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:38:26.660 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:38:26.665 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:38:26.668 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:38:26.672 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:38:26.678 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:38:26.687 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 10:38:26.702 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 10:38:26.709 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 10:38:26.717 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 10:38:26.722 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 10:38:26.729 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 10:38:26.742 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 10:38:26.752 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 10:38:26.764 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 10:38:27.042 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:38:27.055 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:38:27.060 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:38:27.066 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:38:27.073 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:38:27.079 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:38:27.087 -04:00 [INF] Applying migration '20200909141231_Initial'.
2020-09-09 10:38:27.172 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:38:27.176 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:38:27.180 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:38:27.185 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:38:27.191 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 10:38:27.199 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 10:38:27.206 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 10:38:27.213 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 10:38:27.221 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 10:38:27.232 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 10:38:27.242 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 10:38:27.253 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:27.263 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:27.272 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:27.279 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:27.288 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:38:27.310 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimTypePrefix], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'role:', 'admin', CAST(1 AS bit)),
('DataGenie', 'role:', 'user', CAST(1 AS bit)),
('InfoMaster', 'role:', 'admin', CAST(1 AS bit)),
('InfoMaster', 'role:', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'role:', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 10:38:27.322 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 10:38:27.338 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 10:38:27.355 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name], [SharedEmail])
VALUES ('Burger Squire', NULL),
('McDougall''s', NULL),
('Windy''s', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 10:38:27.378 -04:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'3492a0ac-b672-4687-964b-d047e03de117', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJfU2O6+GUYBhqr31q1PLcRmFs2BD8O+NPWlfGjZLFh5hrzOynxqzeOIOZH20vZCgg==', N'222-333-4446', CAST(0 AS bit), N'470858da-da4f-4f31-aa4c-4ecc15e3672e', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'5e0e25d8-dceb-40c0-947c-10403f9417cd', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'ACEJeg8awnNlqLnW/yOBZfXU/jCBxbP4vC9oEypPEHqJFV6384jwBaTCFpqkAGb93Q==', N'000-111-2222', CAST(0 AS bit), N'8e8051cf-f11f-4cce-9b77-fed865da9ac6', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'760812aa-7120-405f-bdd7-a76421b9823a', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ADgFPqQNrM/ZZHpOXq+5r7QGC/yr/cxWedUEJJ9fl2M+KaQixAYl7zzVFmY0mQObaQ==', N'111-222-3333', CAST(1 AS bit), N'8be04ba1-9d66-4bb0-b4f1-8eae2d312758', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'ca9ca038-372d-4f6f-9d22-2dfdddc74731', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AINWnz3qUEaP5ldYPXjEPfYlAm5h4HJse2upbnpa7Zd6Std3FGwg45XYmChY95cr2A==', N'222-333-4444', CAST(0 AS bit), N'84738382-24cf-4f09-9fc8-10e313afcf67', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'f07bb48f-5909-4939-bccb-57b1f259395e', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AFAUkYlyca7021MQcKYhNMGqf4KAYfKPdUr1iOhjv41jYx2RxQvucBAnvmScxf6jrg==', N'000-111-2223', CAST(0 AS bit), N'93687f47-8e88-4fee-a0d8-fc65f1aa1fbe', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'584c4753-3b91-4185-abf6-1185a23f5612', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AHVhZ8sYl1ecRzzQW9/9Ev1E5IMi+fkBDTYhdKnGuwXl+6bgvezfx7EZy3aLUFM3Qg==', N'111-222-3334', CAST(1 AS bit), N'f2b2b545-ffef-41a4-9475-6077c62ac7cb', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'bc2ee7e7-1152-4614-8e58-27800e32d0d3', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJz75qahodCjRSuDUSVu+7+We/YdUhtAroHcLqr18qWOWYCH9KLydAAsjIpB1f6KYg==', N'222-333-4445', CAST(0 AS bit), N'd09991e3-6883-4644-a2ae-f23915e639b5', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'f10a06ac-55f7-48b8-896b-6b48a47e8a0e', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AE4VQ+pPQHAJcA32efqPD0+GLDSEtqCigFOlqgxsyzDHSedgIXxT5rn4cYAciN2zRg==', N'000-111-2224', CAST(0 AS bit), N'2b9dbd91-e0c9-487a-9ed7-6f8528c5ae4b', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'd4f92c84-db5f-4c9f-9cc9-f93bf73df04b', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AA4jRoLD5bsip5TJWLHus14jCYJ/tiHh1StPOdNX3PMEuTmON6Mu/pjmnjlrqoLwtw==', N'111-222-3335', CAST(1 AS bit), N'dafb419e-6389-47c6-9ec6-b4093d2d2b03', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'6353c2ac-fdc4-4aa9-88fb-75dd9011a58a', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AP0GvBIW6yT88pRpRGur1W91Q2dcPC6gVK31Ll7S1W95G03vDUJs2+P/GIa7iTBfoA==', N'222-333-4446', CAST(0 AS bit), N'11a6feaa-9354-428c-9602-0d048fc3d804', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'053358b3-3aec-462b-a66a-cb2c5af84b1d', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APeZt46UI4QDXJxUUQNFwx/uAGgwMwK1sepJpFBgj+TpT9eVSxQvwJ9Cocg/mgelkw==', N'999-888-7777', CAST(0 AS bit), N'16310fbf-1934-4623-b7a6-3f6c2d67315a', CAST(1 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 10:38:27.407 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'role:DataGenie', N'admin', -1),
(-9904, N'role:DataGenie', N'admin', -2),
(-9905, N'role:InfoMaster', N'admin', -2),
(-9907, N'role:InfoMaster', N'admin', -3),
(-9908, N'role:DataGenie', N'user', -4),
(-9909, N'role:DataGenie', N'user', -5),
(-9910, N'role:InfoMaster', N'readonly', -5),
(-9911, N'role:InfoMaster', N'readonly', -6),
(-9912, N'role:DataGenie', N'user', -7),
(-9913, N'role:DataGenie', N'user', -8),
(-9914, N'role:InfoMaster', N'readonly', -8),
(-9915, N'role:InfoMaster', N'readonly', -9),
(-9916, N'role:InfoMaster', N'auditor', -10);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 10:38:27.419 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 10:38:27.426 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 10:38:27.431 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 10:38:27.435 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 10:38:27.440 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 10:38:27.448 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 10:38:27.455 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 10:38:27.474 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 10:38:27.488 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 10:38:27.494 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 10:38:27.501 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 10:38:27.504 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 10:38:27.511 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 10:38:27.525 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909141231_Initial', N'3.1.7');
2020-09-09 10:38:27.545 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 10:38:27.648 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 10:38:27.729 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 10:38:27.796 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 10:38:28.122 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 10:38:28.538 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 10:38:28.547 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 10:38:28.697 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 10:38:28.706 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 10:38:28.709 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 10:38:28.847 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 10:38:28.856 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 10:38:28.863 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 10:38:28.877 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 10:38:28.885 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 10:38:28.910 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 10:38:28.966 -04:00 [FTL] Host terminated unexpectedly.
System.InvalidOperationException: Unable to track an entity of type 'DomainOrganization' because primary key property 'Name' is null.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.NullableKeyIdentityMap`1.Add(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.StartTracking(InternalEntityEntry entry)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState oldState, EntityState newState, Boolean acceptChanges, Boolean modifyProperties)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.SetEntityState(EntityState entityState, Boolean acceptChanges, Boolean modifyProperties, Nullable`1 forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.PaintAction(EntityEntryGraphNode`1 node)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityEntryGraphIterator.TraverseGraph[TState](EntityEntryGraphNode`1 node, Func`2 handleNode)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.EntityGraphAttacher.AttachGraph(InternalEntityEntry rootEntry, EntityState targetState, EntityState storeGeneratedWithKeySetTargetState, Boolean forceStateWhenUnknownKey)
   at Microsoft.EntityFrameworkCore.DbContext.SetEntityState(InternalEntityEntry entry, EntityState entityState)
   at Microsoft.EntityFrameworkCore.DbContext.SetEntityStates(IEnumerable`1 entities, EntityState entityState)
   at Microsoft.EntityFrameworkCore.DbContext.AddRange(IEnumerable`1 entities)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddRange(IEnumerable`1 entities)
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadTestUsers(DomainIdentityDbContext context, String project, List`1 users) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 257
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadConfigs(IEnumerable`1 projects, ConfigurationDbContext cContext, DomainIdentityDbContext diContext) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 197
   at EDennis.AspNetIdentityServer.SeedDataLoader.Load() in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 107
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 32
2020-09-09 10:42:34.282 -04:00 [INF] Starting host...
2020-09-09 10:42:36.251 -04:00 [INF] Migrating Database...
2020-09-09 10:42:37.192 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:42:37.698 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:42:37.772 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 10:42:37.795 -04:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 10:42:48.057 -04:00 [INF] Executed DbCommand (221ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 10:42:48.112 -04:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 10:42:48.123 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:42:48.278 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 10:42:48.283 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:42:48.316 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:42:48.326 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:42:48.364 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 10:42:48.496 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 10:42:48.501 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 10:42:48.506 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 10:42:48.511 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 10:42:48.516 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.520 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.525 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.531 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.536 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.540 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.544 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.549 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.554 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.558 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.563 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.568 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.573 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.580 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.585 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.590 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.594 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:48.597 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 10:42:48.601 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 10:42:48.604 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 10:42:48.608 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 10:42:48.613 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 10:42:48.617 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 10:42:48.621 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 10:42:48.625 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 10:42:48.629 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 10:42:48.633 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 10:42:48.638 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 10:42:48.643 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 10:42:48.647 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 10:42:48.651 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 10:42:48.654 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 10:42:48.657 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 10:42:48.661 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 10:42:48.665 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 10:42:48.669 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 10:42:48.673 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 10:42:48.676 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 10:42:48.681 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 10:42:48.714 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:42:48.724 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:42:48.727 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:42:48.730 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:42:48.734 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:42:48.741 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:42:48.746 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 10:42:48.759 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 10:42:48.764 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 10:42:48.768 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 10:42:48.771 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 10:42:48.774 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 10:42:48.778 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 10:42:48.782 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 10:42:48.785 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 10:42:49.056 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:42:49.069 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:42:49.073 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:42:49.076 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:42:49.078 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:42:49.083 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:42:49.086 -04:00 [INF] Applying migration '20200909141231_Initial'.
2020-09-09 10:42:49.162 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:42:49.168 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:42:49.171 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:42:49.175 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:42:49.179 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 10:42:49.184 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 10:42:49.190 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 10:42:49.194 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 10:42:49.199 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 10:42:49.205 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 10:42:49.210 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 10:42:49.216 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:49.222 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:49.228 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:49.234 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:49.240 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:42:49.258 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimTypePrefix], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'role:', 'admin', CAST(1 AS bit)),
('DataGenie', 'role:', 'user', CAST(1 AS bit)),
('InfoMaster', 'role:', 'admin', CAST(1 AS bit)),
('InfoMaster', 'role:', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'role:', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 10:42:49.272 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 10:42:49.283 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 10:42:49.294 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name], [SharedEmail])
VALUES ('Burger Squire', NULL),
('McDougall''s', NULL),
('Windy''s', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 10:42:49.315 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'3492a0ac-b672-4687-964b-d047e03de117', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJfU2O6+GUYBhqr31q1PLcRmFs2BD8O+NPWlfGjZLFh5hrzOynxqzeOIOZH20vZCgg==', N'222-333-4446', CAST(0 AS bit), N'470858da-da4f-4f31-aa4c-4ecc15e3672e', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'5e0e25d8-dceb-40c0-947c-10403f9417cd', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'ACEJeg8awnNlqLnW/yOBZfXU/jCBxbP4vC9oEypPEHqJFV6384jwBaTCFpqkAGb93Q==', N'000-111-2222', CAST(0 AS bit), N'8e8051cf-f11f-4cce-9b77-fed865da9ac6', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'760812aa-7120-405f-bdd7-a76421b9823a', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ADgFPqQNrM/ZZHpOXq+5r7QGC/yr/cxWedUEJJ9fl2M+KaQixAYl7zzVFmY0mQObaQ==', N'111-222-3333', CAST(1 AS bit), N'8be04ba1-9d66-4bb0-b4f1-8eae2d312758', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'ca9ca038-372d-4f6f-9d22-2dfdddc74731', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AINWnz3qUEaP5ldYPXjEPfYlAm5h4HJse2upbnpa7Zd6Std3FGwg45XYmChY95cr2A==', N'222-333-4444', CAST(0 AS bit), N'84738382-24cf-4f09-9fc8-10e313afcf67', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'f07bb48f-5909-4939-bccb-57b1f259395e', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AFAUkYlyca7021MQcKYhNMGqf4KAYfKPdUr1iOhjv41jYx2RxQvucBAnvmScxf6jrg==', N'000-111-2223', CAST(0 AS bit), N'93687f47-8e88-4fee-a0d8-fc65f1aa1fbe', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'584c4753-3b91-4185-abf6-1185a23f5612', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AHVhZ8sYl1ecRzzQW9/9Ev1E5IMi+fkBDTYhdKnGuwXl+6bgvezfx7EZy3aLUFM3Qg==', N'111-222-3334', CAST(1 AS bit), N'f2b2b545-ffef-41a4-9475-6077c62ac7cb', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'bc2ee7e7-1152-4614-8e58-27800e32d0d3', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJz75qahodCjRSuDUSVu+7+We/YdUhtAroHcLqr18qWOWYCH9KLydAAsjIpB1f6KYg==', N'222-333-4445', CAST(0 AS bit), N'd09991e3-6883-4644-a2ae-f23915e639b5', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'f10a06ac-55f7-48b8-896b-6b48a47e8a0e', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AE4VQ+pPQHAJcA32efqPD0+GLDSEtqCigFOlqgxsyzDHSedgIXxT5rn4cYAciN2zRg==', N'000-111-2224', CAST(0 AS bit), N'2b9dbd91-e0c9-487a-9ed7-6f8528c5ae4b', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'd4f92c84-db5f-4c9f-9cc9-f93bf73df04b', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AA4jRoLD5bsip5TJWLHus14jCYJ/tiHh1StPOdNX3PMEuTmON6Mu/pjmnjlrqoLwtw==', N'111-222-3335', CAST(1 AS bit), N'dafb419e-6389-47c6-9ec6-b4093d2d2b03', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'6353c2ac-fdc4-4aa9-88fb-75dd9011a58a', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AP0GvBIW6yT88pRpRGur1W91Q2dcPC6gVK31Ll7S1W95G03vDUJs2+P/GIa7iTBfoA==', N'222-333-4446', CAST(0 AS bit), N'11a6feaa-9354-428c-9602-0d048fc3d804', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'053358b3-3aec-462b-a66a-cb2c5af84b1d', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APeZt46UI4QDXJxUUQNFwx/uAGgwMwK1sepJpFBgj+TpT9eVSxQvwJ9Cocg/mgelkw==', N'999-888-7777', CAST(0 AS bit), N'16310fbf-1934-4623-b7a6-3f6c2d67315a', CAST(1 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 10:42:49.334 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'role:DataGenie', N'admin', -1),
(-9904, N'role:DataGenie', N'admin', -2),
(-9905, N'role:InfoMaster', N'admin', -2),
(-9907, N'role:InfoMaster', N'admin', -3),
(-9908, N'role:DataGenie', N'user', -4),
(-9909, N'role:DataGenie', N'user', -5),
(-9910, N'role:InfoMaster', N'readonly', -5),
(-9911, N'role:InfoMaster', N'readonly', -6),
(-9912, N'role:DataGenie', N'user', -7),
(-9913, N'role:DataGenie', N'user', -8),
(-9914, N'role:InfoMaster', N'readonly', -8),
(-9915, N'role:InfoMaster', N'readonly', -9),
(-9916, N'role:InfoMaster', N'auditor', -10);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 10:42:49.337 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 10:42:49.340 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 10:42:49.345 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 10:42:49.349 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 10:42:49.352 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 10:42:49.356 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 10:42:49.361 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 10:42:49.381 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 10:42:49.385 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 10:42:49.390 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 10:42:49.392 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 10:42:49.395 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 10:42:49.401 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 10:42:49.405 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909141231_Initial', N'3.1.7');
2020-09-09 10:42:49.419 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 10:42:49.525 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 10:42:49.626 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 10:42:49.711 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 10:42:50.085 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 10:42:50.529 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 10:42:50.540 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 10:42:50.715 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 10:42:50.719 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 10:42:50.722 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 10:42:50.871 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 10:42:50.882 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 10:42:50.887 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 10:42:50.897 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 10:42:50.904 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 10:42:57.043 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 10:46:49.976 -04:00 [INF] Starting host...
2020-09-09 10:46:51.983 -04:00 [INF] Migrating Database...
2020-09-09 10:46:52.936 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:46:53.425 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:46:53.492 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 10:46:53.514 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 10:47:03.749 -04:00 [INF] Executed DbCommand (193ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 10:47:03.812 -04:00 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 10:47:03.826 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:47:04.002 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 10:47:04.006 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:47:04.035 -04:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:47:04.046 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:47:04.081 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 10:47:04.207 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 10:47:04.214 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 10:47:04.219 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 10:47:04.225 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 10:47:04.231 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.235 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.243 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.252 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.261 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.267 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.273 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.279 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.285 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.293 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.298 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.305 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.313 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.319 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.327 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.340 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.361 -04:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:04.370 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 10:47:04.379 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 10:47:04.385 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 10:47:04.392 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 10:47:04.398 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 10:47:04.404 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 10:47:04.411 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 10:47:04.423 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 10:47:04.438 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 10:47:04.444 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 10:47:04.450 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 10:47:04.458 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 10:47:04.464 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 10:47:04.473 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 10:47:04.477 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 10:47:04.481 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 10:47:04.484 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 10:47:04.491 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 10:47:04.494 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 10:47:04.497 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 10:47:04.500 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 10:47:04.504 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 10:47:04.557 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:47:04.569 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:47:04.573 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:47:04.578 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:47:04.582 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:47:04.590 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:47:04.597 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 10:47:04.635 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 10:47:04.645 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 10:47:04.652 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 10:47:04.656 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 10:47:04.660 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 10:47:04.663 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 10:47:04.666 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 10:47:04.669 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 10:47:04.962 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:47:04.980 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:47:04.984 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:47:04.989 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:47:04.994 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:47:04.999 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:47:05.004 -04:00 [INF] Applying migration '20200909141231_Initial'.
2020-09-09 10:47:05.130 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:47:05.134 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:47:05.139 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:47:05.143 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:47:05.147 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 10:47:05.152 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 10:47:05.157 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 10:47:05.162 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 10:47:05.166 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 10:47:05.173 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 10:47:05.179 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 10:47:05.186 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:05.194 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:05.201 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:05.208 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:05.215 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:47:05.234 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimTypePrefix], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'role:', 'admin', CAST(1 AS bit)),
('DataGenie', 'role:', 'user', CAST(1 AS bit)),
('InfoMaster', 'role:', 'admin', CAST(1 AS bit)),
('InfoMaster', 'role:', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'role:', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 10:47:05.245 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 10:47:05.256 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 10:47:05.266 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name], [SharedEmail])
VALUES ('Burger Squire', NULL),
('McDougall''s', NULL),
('Windy''s', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 10:47:05.285 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'3492a0ac-b672-4687-964b-d047e03de117', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJfU2O6+GUYBhqr31q1PLcRmFs2BD8O+NPWlfGjZLFh5hrzOynxqzeOIOZH20vZCgg==', N'222-333-4446', CAST(0 AS bit), N'470858da-da4f-4f31-aa4c-4ecc15e3672e', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'5e0e25d8-dceb-40c0-947c-10403f9417cd', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'ACEJeg8awnNlqLnW/yOBZfXU/jCBxbP4vC9oEypPEHqJFV6384jwBaTCFpqkAGb93Q==', N'000-111-2222', CAST(0 AS bit), N'8e8051cf-f11f-4cce-9b77-fed865da9ac6', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'760812aa-7120-405f-bdd7-a76421b9823a', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ADgFPqQNrM/ZZHpOXq+5r7QGC/yr/cxWedUEJJ9fl2M+KaQixAYl7zzVFmY0mQObaQ==', N'111-222-3333', CAST(1 AS bit), N'8be04ba1-9d66-4bb0-b4f1-8eae2d312758', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'ca9ca038-372d-4f6f-9d22-2dfdddc74731', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AINWnz3qUEaP5ldYPXjEPfYlAm5h4HJse2upbnpa7Zd6Std3FGwg45XYmChY95cr2A==', N'222-333-4444', CAST(0 AS bit), N'84738382-24cf-4f09-9fc8-10e313afcf67', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'f07bb48f-5909-4939-bccb-57b1f259395e', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AFAUkYlyca7021MQcKYhNMGqf4KAYfKPdUr1iOhjv41jYx2RxQvucBAnvmScxf6jrg==', N'000-111-2223', CAST(0 AS bit), N'93687f47-8e88-4fee-a0d8-fc65f1aa1fbe', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'584c4753-3b91-4185-abf6-1185a23f5612', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AHVhZ8sYl1ecRzzQW9/9Ev1E5IMi+fkBDTYhdKnGuwXl+6bgvezfx7EZy3aLUFM3Qg==', N'111-222-3334', CAST(1 AS bit), N'f2b2b545-ffef-41a4-9475-6077c62ac7cb', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'bc2ee7e7-1152-4614-8e58-27800e32d0d3', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJz75qahodCjRSuDUSVu+7+We/YdUhtAroHcLqr18qWOWYCH9KLydAAsjIpB1f6KYg==', N'222-333-4445', CAST(0 AS bit), N'd09991e3-6883-4644-a2ae-f23915e639b5', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'f10a06ac-55f7-48b8-896b-6b48a47e8a0e', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AE4VQ+pPQHAJcA32efqPD0+GLDSEtqCigFOlqgxsyzDHSedgIXxT5rn4cYAciN2zRg==', N'000-111-2224', CAST(0 AS bit), N'2b9dbd91-e0c9-487a-9ed7-6f8528c5ae4b', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'd4f92c84-db5f-4c9f-9cc9-f93bf73df04b', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AA4jRoLD5bsip5TJWLHus14jCYJ/tiHh1StPOdNX3PMEuTmON6Mu/pjmnjlrqoLwtw==', N'111-222-3335', CAST(1 AS bit), N'dafb419e-6389-47c6-9ec6-b4093d2d2b03', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'6353c2ac-fdc4-4aa9-88fb-75dd9011a58a', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AP0GvBIW6yT88pRpRGur1W91Q2dcPC6gVK31Ll7S1W95G03vDUJs2+P/GIa7iTBfoA==', N'222-333-4446', CAST(0 AS bit), N'11a6feaa-9354-428c-9602-0d048fc3d804', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'053358b3-3aec-462b-a66a-cb2c5af84b1d', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APeZt46UI4QDXJxUUQNFwx/uAGgwMwK1sepJpFBgj+TpT9eVSxQvwJ9Cocg/mgelkw==', N'999-888-7777', CAST(0 AS bit), N'16310fbf-1934-4623-b7a6-3f6c2d67315a', CAST(1 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 10:47:05.302 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'role:DataGenie', N'admin', -1),
(-9904, N'role:DataGenie', N'admin', -2),
(-9905, N'role:InfoMaster', N'admin', -2),
(-9907, N'role:InfoMaster', N'admin', -3),
(-9908, N'role:DataGenie', N'user', -4),
(-9909, N'role:DataGenie', N'user', -5),
(-9910, N'role:InfoMaster', N'readonly', -5),
(-9911, N'role:InfoMaster', N'readonly', -6),
(-9912, N'role:DataGenie', N'user', -7),
(-9913, N'role:DataGenie', N'user', -8),
(-9914, N'role:InfoMaster', N'readonly', -8),
(-9915, N'role:InfoMaster', N'readonly', -9),
(-9916, N'role:InfoMaster', N'auditor', -10);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 10:47:05.307 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 10:47:05.310 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 10:47:05.314 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 10:47:05.318 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 10:47:05.321 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 10:47:05.331 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 10:47:05.337 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 10:47:05.359 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 10:47:05.365 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 10:47:05.369 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 10:47:05.373 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 10:47:05.375 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 10:47:05.380 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 10:47:05.386 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909141231_Initial', N'3.1.7');
2020-09-09 10:47:05.400 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 10:47:05.490 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 10:47:05.589 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 10:47:05.658 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 10:47:05.997 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 10:47:06.431 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 10:47:06.439 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 10:47:06.585 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 10:47:06.589 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 10:47:06.593 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 10:47:06.727 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 10:47:06.736 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 10:47:06.742 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 10:47:06.757 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 10:47:06.763 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 10:47:06.787 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 10:47:27.312 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 10:54:39.104 -04:00 [INF] Starting host...
2020-09-09 10:54:40.917 -04:00 [INF] Migrating Database...
2020-09-09 10:54:41.847 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:54:42.313 -04:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:54:42.377 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 10:54:42.400 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 10:54:52.634 -04:00 [INF] Executed DbCommand (191ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 10:54:52.687 -04:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 10:54:52.697 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:54:52.834 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 10:54:52.838 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:54:52.864 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:54:52.875 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:54:52.909 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 10:54:53.026 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 10:54:53.030 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 10:54:53.038 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 10:54:53.043 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 10:54:53.047 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.051 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.055 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.060 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.063 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.067 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.071 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.075 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.079 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.083 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.089 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.093 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.100 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.105 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.111 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.116 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.121 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.125 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 10:54:53.128 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 10:54:53.130 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 10:54:53.133 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 10:54:53.136 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 10:54:53.139 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 10:54:53.141 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 10:54:53.145 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 10:54:53.147 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 10:54:53.151 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 10:54:53.154 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 10:54:53.157 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 10:54:53.159 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 10:54:53.162 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 10:54:53.165 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 10:54:53.168 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 10:54:53.171 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 10:54:53.174 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 10:54:53.177 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 10:54:53.179 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 10:54:53.182 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 10:54:53.186 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 10:54:53.214 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:54:53.223 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:54:53.227 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:54:53.230 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:54:53.232 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:54:53.236 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:54:53.241 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 10:54:53.253 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 10:54:53.258 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 10:54:53.261 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 10:54:53.264 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 10:54:53.267 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 10:54:53.270 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 10:54:53.273 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 10:54:53.276 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 10:54:53.535 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:54:53.550 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:54:53.556 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:54:53.558 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:54:53.561 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:54:53.566 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:54:53.569 -04:00 [INF] Applying migration '20200909141231_Initial'.
2020-09-09 10:54:53.650 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:54:53.654 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:54:53.657 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:54:53.660 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:54:53.663 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 10:54:53.667 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 10:54:53.671 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 10:54:53.674 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 10:54:53.677 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 10:54:53.682 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 10:54:53.686 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 10:54:53.691 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.696 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.702 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.708 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.714 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:54:53.731 -04:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimTypePrefix], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'role:', 'admin', CAST(1 AS bit)),
('DataGenie', 'role:', 'user', CAST(1 AS bit)),
('InfoMaster', 'role:', 'admin', CAST(1 AS bit)),
('InfoMaster', 'role:', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'role:', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 10:54:53.744 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 10:54:53.756 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 10:54:53.768 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name], [SharedEmail])
VALUES ('Burger Squire', NULL),
('McDougall''s', NULL),
('Windy''s', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 10:54:53.788 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'3492a0ac-b672-4687-964b-d047e03de117', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJfU2O6+GUYBhqr31q1PLcRmFs2BD8O+NPWlfGjZLFh5hrzOynxqzeOIOZH20vZCgg==', N'222-333-4446', CAST(0 AS bit), N'470858da-da4f-4f31-aa4c-4ecc15e3672e', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'5e0e25d8-dceb-40c0-947c-10403f9417cd', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'ACEJeg8awnNlqLnW/yOBZfXU/jCBxbP4vC9oEypPEHqJFV6384jwBaTCFpqkAGb93Q==', N'000-111-2222', CAST(0 AS bit), N'8e8051cf-f11f-4cce-9b77-fed865da9ac6', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'760812aa-7120-405f-bdd7-a76421b9823a', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ADgFPqQNrM/ZZHpOXq+5r7QGC/yr/cxWedUEJJ9fl2M+KaQixAYl7zzVFmY0mQObaQ==', N'111-222-3333', CAST(1 AS bit), N'8be04ba1-9d66-4bb0-b4f1-8eae2d312758', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'ca9ca038-372d-4f6f-9d22-2dfdddc74731', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AINWnz3qUEaP5ldYPXjEPfYlAm5h4HJse2upbnpa7Zd6Std3FGwg45XYmChY95cr2A==', N'222-333-4444', CAST(0 AS bit), N'84738382-24cf-4f09-9fc8-10e313afcf67', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'f07bb48f-5909-4939-bccb-57b1f259395e', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AFAUkYlyca7021MQcKYhNMGqf4KAYfKPdUr1iOhjv41jYx2RxQvucBAnvmScxf6jrg==', N'000-111-2223', CAST(0 AS bit), N'93687f47-8e88-4fee-a0d8-fc65f1aa1fbe', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'584c4753-3b91-4185-abf6-1185a23f5612', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AHVhZ8sYl1ecRzzQW9/9Ev1E5IMi+fkBDTYhdKnGuwXl+6bgvezfx7EZy3aLUFM3Qg==', N'111-222-3334', CAST(1 AS bit), N'f2b2b545-ffef-41a4-9475-6077c62ac7cb', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'bc2ee7e7-1152-4614-8e58-27800e32d0d3', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJz75qahodCjRSuDUSVu+7+We/YdUhtAroHcLqr18qWOWYCH9KLydAAsjIpB1f6KYg==', N'222-333-4445', CAST(0 AS bit), N'd09991e3-6883-4644-a2ae-f23915e639b5', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'f10a06ac-55f7-48b8-896b-6b48a47e8a0e', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AE4VQ+pPQHAJcA32efqPD0+GLDSEtqCigFOlqgxsyzDHSedgIXxT5rn4cYAciN2zRg==', N'000-111-2224', CAST(0 AS bit), N'2b9dbd91-e0c9-487a-9ed7-6f8528c5ae4b', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'd4f92c84-db5f-4c9f-9cc9-f93bf73df04b', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AA4jRoLD5bsip5TJWLHus14jCYJ/tiHh1StPOdNX3PMEuTmON6Mu/pjmnjlrqoLwtw==', N'111-222-3335', CAST(1 AS bit), N'dafb419e-6389-47c6-9ec6-b4093d2d2b03', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'6353c2ac-fdc4-4aa9-88fb-75dd9011a58a', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AP0GvBIW6yT88pRpRGur1W91Q2dcPC6gVK31Ll7S1W95G03vDUJs2+P/GIa7iTBfoA==', N'222-333-4446', CAST(0 AS bit), N'11a6feaa-9354-428c-9602-0d048fc3d804', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'053358b3-3aec-462b-a66a-cb2c5af84b1d', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APeZt46UI4QDXJxUUQNFwx/uAGgwMwK1sepJpFBgj+TpT9eVSxQvwJ9Cocg/mgelkw==', N'999-888-7777', CAST(0 AS bit), N'16310fbf-1934-4623-b7a6-3f6c2d67315a', CAST(1 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 10:54:53.809 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'role:DataGenie', N'admin', -1),
(-9904, N'role:DataGenie', N'admin', -2),
(-9905, N'role:InfoMaster', N'admin', -2),
(-9907, N'role:InfoMaster', N'admin', -3),
(-9908, N'role:DataGenie', N'user', -4),
(-9909, N'role:DataGenie', N'user', -5),
(-9910, N'role:InfoMaster', N'readonly', -5),
(-9911, N'role:InfoMaster', N'readonly', -6),
(-9912, N'role:DataGenie', N'user', -7),
(-9913, N'role:DataGenie', N'user', -8),
(-9914, N'role:InfoMaster', N'readonly', -8),
(-9915, N'role:InfoMaster', N'readonly', -9),
(-9916, N'role:InfoMaster', N'auditor', -10);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 10:54:53.814 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 10:54:53.818 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 10:54:53.822 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 10:54:53.826 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 10:54:53.828 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 10:54:53.834 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 10:54:53.839 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 10:54:53.857 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 10:54:53.865 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 10:54:53.870 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 10:54:53.873 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 10:54:53.877 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 10:54:53.883 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 10:54:53.894 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909141231_Initial', N'3.1.7');
2020-09-09 10:54:53.909 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 10:54:53.992 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 10:54:54.081 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 10:54:54.145 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 10:54:54.458 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 10:54:54.838 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 10:54:54.846 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 10:54:55.000 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 10:54:55.009 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 10:54:55.011 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 10:54:55.143 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 10:54:55.150 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 10:54:55.156 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 10:54:55.164 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 10:54:55.171 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 10:54:55.193 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 10:54:55.209 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 10:55:39.833 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-09-09 10:55:43.540 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 10:55:46.460 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-09-09 10:57:43.150 -04:00 [INF] Starting host...
2020-09-09 10:57:44.934 -04:00 [INF] Migrating Database...
2020-09-09 10:57:45.837 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:57:46.307 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:57:46.373 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 10:57:46.398 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 10:57:56.639 -04:00 [INF] Executed DbCommand (200ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 10:57:56.695 -04:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 10:57:56.705 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:57:56.833 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 10:57:56.837 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:57:56.863 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:57:56.873 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:57:56.906 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 10:57:57.026 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 10:57:57.031 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 10:57:57.037 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 10:57:57.042 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 10:57:57.046 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.050 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.055 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.060 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.064 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.068 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.072 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.077 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.081 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.085 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.089 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.093 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.098 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.102 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.106 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.112 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.119 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.122 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 10:57:57.125 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 10:57:57.129 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 10:57:57.133 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 10:57:57.136 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 10:57:57.139 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 10:57:57.142 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 10:57:57.147 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 10:57:57.151 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 10:57:57.155 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 10:57:57.159 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 10:57:57.162 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 10:57:57.164 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 10:57:57.168 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 10:57:57.172 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 10:57:57.175 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 10:57:57.178 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 10:57:57.182 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 10:57:57.185 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 10:57:57.189 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 10:57:57.193 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 10:57:57.198 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 10:57:57.230 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:57:57.239 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:57:57.242 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:57:57.245 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:57:57.248 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:57:57.253 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:57:57.257 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 10:57:57.270 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 10:57:57.275 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 10:57:57.279 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 10:57:57.282 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 10:57:57.287 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 10:57:57.290 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 10:57:57.293 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 10:57:57.296 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 10:57:57.562 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 10:57:57.574 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:57:57.578 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:57:57.581 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 10:57:57.584 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 10:57:57.588 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 10:57:57.591 -04:00 [INF] Applying migration '20200909141231_Initial'.
2020-09-09 10:57:57.672 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:57:57.676 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:57:57.679 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:57:57.681 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 10:57:57.685 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 10:57:57.688 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 10:57:57.692 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 10:57:57.697 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 10:57:57.701 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 10:57:57.707 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 10:57:57.713 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 10:57:57.719 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.725 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.731 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.739 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.746 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 10:57:57.765 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimTypePrefix], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'role:', 'admin', CAST(1 AS bit)),
('DataGenie', 'role:', 'user', CAST(1 AS bit)),
('InfoMaster', 'role:', 'admin', CAST(1 AS bit)),
('InfoMaster', 'role:', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'role:', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 10:57:57.778 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 10:57:57.793 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 10:57:57.806 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name], [SharedEmail])
VALUES ('Burger Squire', NULL),
('McDougall''s', NULL),
('Windy''s', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 10:57:57.826 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'3492a0ac-b672-4687-964b-d047e03de117', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJfU2O6+GUYBhqr31q1PLcRmFs2BD8O+NPWlfGjZLFh5hrzOynxqzeOIOZH20vZCgg==', N'222-333-4446', CAST(0 AS bit), N'470858da-da4f-4f31-aa4c-4ecc15e3672e', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'5e0e25d8-dceb-40c0-947c-10403f9417cd', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'ACEJeg8awnNlqLnW/yOBZfXU/jCBxbP4vC9oEypPEHqJFV6384jwBaTCFpqkAGb93Q==', N'000-111-2222', CAST(0 AS bit), N'8e8051cf-f11f-4cce-9b77-fed865da9ac6', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'760812aa-7120-405f-bdd7-a76421b9823a', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ADgFPqQNrM/ZZHpOXq+5r7QGC/yr/cxWedUEJJ9fl2M+KaQixAYl7zzVFmY0mQObaQ==', N'111-222-3333', CAST(1 AS bit), N'8be04ba1-9d66-4bb0-b4f1-8eae2d312758', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'ca9ca038-372d-4f6f-9d22-2dfdddc74731', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AINWnz3qUEaP5ldYPXjEPfYlAm5h4HJse2upbnpa7Zd6Std3FGwg45XYmChY95cr2A==', N'222-333-4444', CAST(0 AS bit), N'84738382-24cf-4f09-9fc8-10e313afcf67', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'f07bb48f-5909-4939-bccb-57b1f259395e', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AFAUkYlyca7021MQcKYhNMGqf4KAYfKPdUr1iOhjv41jYx2RxQvucBAnvmScxf6jrg==', N'000-111-2223', CAST(0 AS bit), N'93687f47-8e88-4fee-a0d8-fc65f1aa1fbe', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'584c4753-3b91-4185-abf6-1185a23f5612', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AHVhZ8sYl1ecRzzQW9/9Ev1E5IMi+fkBDTYhdKnGuwXl+6bgvezfx7EZy3aLUFM3Qg==', N'111-222-3334', CAST(1 AS bit), N'f2b2b545-ffef-41a4-9475-6077c62ac7cb', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'bc2ee7e7-1152-4614-8e58-27800e32d0d3', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJz75qahodCjRSuDUSVu+7+We/YdUhtAroHcLqr18qWOWYCH9KLydAAsjIpB1f6KYg==', N'222-333-4445', CAST(0 AS bit), N'd09991e3-6883-4644-a2ae-f23915e639b5', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'f10a06ac-55f7-48b8-896b-6b48a47e8a0e', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AE4VQ+pPQHAJcA32efqPD0+GLDSEtqCigFOlqgxsyzDHSedgIXxT5rn4cYAciN2zRg==', N'000-111-2224', CAST(0 AS bit), N'2b9dbd91-e0c9-487a-9ed7-6f8528c5ae4b', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'd4f92c84-db5f-4c9f-9cc9-f93bf73df04b', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AA4jRoLD5bsip5TJWLHus14jCYJ/tiHh1StPOdNX3PMEuTmON6Mu/pjmnjlrqoLwtw==', N'111-222-3335', CAST(1 AS bit), N'dafb419e-6389-47c6-9ec6-b4093d2d2b03', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'6353c2ac-fdc4-4aa9-88fb-75dd9011a58a', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AP0GvBIW6yT88pRpRGur1W91Q2dcPC6gVK31Ll7S1W95G03vDUJs2+P/GIa7iTBfoA==', N'222-333-4446', CAST(0 AS bit), N'11a6feaa-9354-428c-9602-0d048fc3d804', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'053358b3-3aec-462b-a66a-cb2c5af84b1d', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APeZt46UI4QDXJxUUQNFwx/uAGgwMwK1sepJpFBgj+TpT9eVSxQvwJ9Cocg/mgelkw==', N'999-888-7777', CAST(0 AS bit), N'16310fbf-1934-4623-b7a6-3f6c2d67315a', CAST(1 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 10:57:57.845 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'role:DataGenie', N'admin', -1),
(-9904, N'role:DataGenie', N'admin', -2),
(-9905, N'role:InfoMaster', N'admin', -2),
(-9907, N'role:InfoMaster', N'admin', -3),
(-9908, N'role:DataGenie', N'user', -4),
(-9909, N'role:DataGenie', N'user', -5),
(-9910, N'role:InfoMaster', N'readonly', -5),
(-9911, N'role:InfoMaster', N'readonly', -6),
(-9912, N'role:DataGenie', N'user', -7),
(-9913, N'role:DataGenie', N'user', -8),
(-9914, N'role:InfoMaster', N'readonly', -8),
(-9915, N'role:InfoMaster', N'readonly', -9),
(-9916, N'role:InfoMaster', N'auditor', -10);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 10:57:57.850 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 10:57:57.854 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 10:57:57.859 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 10:57:57.862 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 10:57:57.865 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 10:57:57.870 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 10:57:57.875 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 10:57:57.893 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 10:57:57.898 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 10:57:57.902 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 10:57:57.905 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 10:57:57.908 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 10:57:57.912 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 10:57:57.920 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909141231_Initial', N'3.1.7');
2020-09-09 10:57:57.935 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 10:57:58.032 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 10:57:58.109 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 10:57:58.175 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 10:57:58.499 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 10:57:58.889 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 10:57:58.897 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 10:57:59.062 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 10:57:59.067 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 10:57:59.070 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 10:57:59.202 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 10:57:59.210 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 10:57:59.216 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 10:57:59.225 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 10:57:59.232 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 10:57:59.256 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 10:57:59.274 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 10:58:07.336 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-09-09 10:58:07.338 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 10:58:07.360 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-09-09 10:58:07.386 -04:00 [FTL] Host terminated unexpectedly.
System.ArgumentOutOfRangeException: The UTC time represented when the offset is applied must be between year 0 and 10,000. (Parameter 'offset')
   at System.DateTimeOffset.ValidateDate(DateTime dateTime, TimeSpan offset)
   at System.DateTimeOffset..ctor(DateTime dateTime)
   at System.DateTimeOffset.op_Implicit(DateTime dateTime)
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadTestUsers(DomainIdentityDbContext context, String project, List`1 users) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 293
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadConfigs(IEnumerable`1 projects, ConfigurationDbContext cContext, DomainIdentityDbContext diContext) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 197
   at EDennis.AspNetIdentityServer.SeedDataLoader.Load() in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 107
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 32
2020-09-09 11:13:22.979 -04:00 [INF] Starting host...
2020-09-09 11:13:24.964 -04:00 [INF] Migrating Database...
2020-09-09 11:13:25.876 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:13:26.357 -04:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:13:26.424 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 11:13:26.447 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 11:13:36.680 -04:00 [INF] Executed DbCommand (194ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 11:13:36.740 -04:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 11:13:36.750 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:13:36.879 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 11:13:36.884 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:13:36.918 -04:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:13:36.929 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:13:36.965 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 11:13:37.086 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 11:13:37.092 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 11:13:37.104 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 11:13:37.119 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 11:13:37.132 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.139 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.151 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.161 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.171 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.181 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.190 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.200 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.211 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.219 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.227 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.236 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.248 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.256 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.266 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.277 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.287 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:37.295 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 11:13:37.299 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 11:13:37.306 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 11:13:37.311 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 11:13:37.317 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 11:13:37.324 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 11:13:37.328 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 11:13:37.335 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 11:13:37.340 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 11:13:37.345 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 11:13:37.350 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 11:13:37.357 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 11:13:37.363 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 11:13:37.369 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 11:13:37.373 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 11:13:37.378 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 11:13:37.383 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 11:13:37.388 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 11:13:37.392 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 11:13:37.397 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 11:13:37.403 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 11:13:37.409 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 11:13:37.443 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:13:37.452 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:13:37.457 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:13:37.461 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:13:37.466 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:13:37.472 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:13:37.479 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 11:13:37.492 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 11:13:37.499 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 11:13:37.507 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 11:13:37.511 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 11:13:37.516 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 11:13:37.520 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 11:13:37.524 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 11:13:37.532 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 11:13:37.797 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:13:37.809 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:13:37.815 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:13:37.820 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:13:37.825 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:13:37.833 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:13:37.839 -04:00 [INF] Applying migration '20200909141231_Initial'.
2020-09-09 11:13:37.920 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:13:37.926 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:13:37.933 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:13:37.938 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:13:37.942 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 11:13:37.951 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 11:13:37.961 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 11:13:37.969 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 11:13:37.979 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 11:13:37.992 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 11:13:38.002 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 11:13:38.015 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:38.024 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:38.035 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:38.045 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:38.055 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:13:38.080 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimTypePrefix], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'role:', 'admin', CAST(1 AS bit)),
('DataGenie', 'role:', 'user', CAST(1 AS bit)),
('InfoMaster', 'role:', 'admin', CAST(1 AS bit)),
('InfoMaster', 'role:', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'role:', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 11:13:38.094 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 11:13:38.107 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 11:13:38.125 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name], [SharedEmail])
VALUES ('Burger Squire', NULL),
('McDougall''s', NULL),
('Windy''s', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 11:13:38.148 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'3492a0ac-b672-4687-964b-d047e03de117', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJfU2O6+GUYBhqr31q1PLcRmFs2BD8O+NPWlfGjZLFh5hrzOynxqzeOIOZH20vZCgg==', N'222-333-4446', CAST(0 AS bit), N'470858da-da4f-4f31-aa4c-4ecc15e3672e', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'5e0e25d8-dceb-40c0-947c-10403f9417cd', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'ACEJeg8awnNlqLnW/yOBZfXU/jCBxbP4vC9oEypPEHqJFV6384jwBaTCFpqkAGb93Q==', N'000-111-2222', CAST(0 AS bit), N'8e8051cf-f11f-4cce-9b77-fed865da9ac6', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'760812aa-7120-405f-bdd7-a76421b9823a', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ADgFPqQNrM/ZZHpOXq+5r7QGC/yr/cxWedUEJJ9fl2M+KaQixAYl7zzVFmY0mQObaQ==', N'111-222-3333', CAST(1 AS bit), N'8be04ba1-9d66-4bb0-b4f1-8eae2d312758', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'ca9ca038-372d-4f6f-9d22-2dfdddc74731', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AINWnz3qUEaP5ldYPXjEPfYlAm5h4HJse2upbnpa7Zd6Std3FGwg45XYmChY95cr2A==', N'222-333-4444', CAST(0 AS bit), N'84738382-24cf-4f09-9fc8-10e313afcf67', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'f07bb48f-5909-4939-bccb-57b1f259395e', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AFAUkYlyca7021MQcKYhNMGqf4KAYfKPdUr1iOhjv41jYx2RxQvucBAnvmScxf6jrg==', N'000-111-2223', CAST(0 AS bit), N'93687f47-8e88-4fee-a0d8-fc65f1aa1fbe', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'584c4753-3b91-4185-abf6-1185a23f5612', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AHVhZ8sYl1ecRzzQW9/9Ev1E5IMi+fkBDTYhdKnGuwXl+6bgvezfx7EZy3aLUFM3Qg==', N'111-222-3334', CAST(1 AS bit), N'f2b2b545-ffef-41a4-9475-6077c62ac7cb', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'bc2ee7e7-1152-4614-8e58-27800e32d0d3', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJz75qahodCjRSuDUSVu+7+We/YdUhtAroHcLqr18qWOWYCH9KLydAAsjIpB1f6KYg==', N'222-333-4445', CAST(0 AS bit), N'd09991e3-6883-4644-a2ae-f23915e639b5', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'f10a06ac-55f7-48b8-896b-6b48a47e8a0e', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AE4VQ+pPQHAJcA32efqPD0+GLDSEtqCigFOlqgxsyzDHSedgIXxT5rn4cYAciN2zRg==', N'000-111-2224', CAST(0 AS bit), N'2b9dbd91-e0c9-487a-9ed7-6f8528c5ae4b', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'd4f92c84-db5f-4c9f-9cc9-f93bf73df04b', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AA4jRoLD5bsip5TJWLHus14jCYJ/tiHh1StPOdNX3PMEuTmON6Mu/pjmnjlrqoLwtw==', N'111-222-3335', CAST(1 AS bit), N'dafb419e-6389-47c6-9ec6-b4093d2d2b03', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'6353c2ac-fdc4-4aa9-88fb-75dd9011a58a', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AP0GvBIW6yT88pRpRGur1W91Q2dcPC6gVK31Ll7S1W95G03vDUJs2+P/GIa7iTBfoA==', N'222-333-4446', CAST(0 AS bit), N'11a6feaa-9354-428c-9602-0d048fc3d804', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'053358b3-3aec-462b-a66a-cb2c5af84b1d', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APeZt46UI4QDXJxUUQNFwx/uAGgwMwK1sepJpFBgj+TpT9eVSxQvwJ9Cocg/mgelkw==', N'999-888-7777', CAST(0 AS bit), N'16310fbf-1934-4623-b7a6-3f6c2d67315a', CAST(1 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 11:13:38.174 -04:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'role:DataGenie', N'admin', -1),
(-9904, N'role:DataGenie', N'admin', -2),
(-9905, N'role:InfoMaster', N'admin', -2),
(-9907, N'role:InfoMaster', N'admin', -3),
(-9908, N'role:DataGenie', N'user', -4),
(-9909, N'role:DataGenie', N'user', -5),
(-9910, N'role:InfoMaster', N'readonly', -5),
(-9911, N'role:InfoMaster', N'readonly', -6),
(-9912, N'role:DataGenie', N'user', -7),
(-9913, N'role:DataGenie', N'user', -8),
(-9914, N'role:InfoMaster', N'readonly', -8),
(-9915, N'role:InfoMaster', N'readonly', -9),
(-9916, N'role:InfoMaster', N'auditor', -10);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 11:13:38.188 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 11:13:38.196 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 11:13:38.201 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 11:13:38.207 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 11:13:38.212 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 11:13:38.220 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 11:13:38.225 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 11:13:38.242 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 11:13:38.252 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 11:13:38.263 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 11:13:38.271 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 11:13:38.274 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 11:13:38.281 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 11:13:38.295 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909141231_Initial', N'3.1.7');
2020-09-09 11:13:38.323 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 11:13:38.423 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 11:13:38.501 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 11:13:38.568 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 11:13:38.896 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 11:13:39.291 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 11:13:39.299 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 11:13:39.443 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 11:13:39.447 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 11:13:39.449 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 11:13:39.574 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 11:13:39.582 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 11:13:39.589 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 11:13:39.598 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 11:13:39.604 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:13:39.628 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:13:39.644 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:13:45.172 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-09-09 11:13:45.174 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:13:45.198 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-09-09 11:13:45.242 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:13:45.244 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:13:45.247 -04:00 [INF] 			Adding user record for john@a.test ...
2020-09-09 11:13:45.252 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:13:45.254 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:13:45.257 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-09-09 11:13:45.264 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:13:45.265 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:13:45.269 -04:00 [INF] 			Adding user record for linda@b.test ...
2020-09-09 11:13:45.275 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:13:45.277 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:13:45.281 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-09-09 11:13:45.286 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:13:45.287 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:13:45.289 -04:00 [INF] 			Adding user record for ebony@c.test ...
2020-09-09 11:13:45.295 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:13:45.296 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:13:45.298 -04:00 [INF] 			Adding user record for juan@a.test ...
2020-09-09 11:13:45.306 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:13:45.348 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:13:45.351 -04:00 [INF] 			Adding user record for james@b.test ...
2020-09-09 11:13:45.359 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:13:45.415 -04:00 [FTL] Host terminated unexpectedly.
System.FormatException: A duplicate key 'Clients:0:Authority' was found.
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.VisitValue(JsonElement value)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.VisitElement(JsonElement element)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.VisitValue(JsonElement value)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.VisitValue(JsonElement value)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.VisitElement(JsonElement element)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.ParseStream(Stream input)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.Parse(Stream input)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationProvider.Load(Stream stream)
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load(Boolean reload)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.HandleException(ExceptionDispatchInfo info)
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load(Boolean reload)
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load()
   at Microsoft.Extensions.Configuration.ConfigurationRoot..ctor(IList`1 providers)
   at Microsoft.Extensions.Configuration.ConfigurationBuilder.Build()
   at EDennis.AspNetIdentityServer.SeedDataLoader.LoadConfigs(IEnumerable`1 projects, ConfigurationDbContext cContext, DomainIdentityDbContext diContext) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 151
   at EDennis.AspNetIdentityServer.SeedDataLoader.Load() in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\SeedDataLoader.cs:line 107
   at EDennis.AspNetIdentityServer.Program.Main(String[] args) in C:\Users\MitchellDenC\Source\Repos\denmitchell\EDennis.AspNet.Base\EDennis.AspNetIdentityServer\Program.cs:line 32
2020-09-09 11:18:40.982 -04:00 [INF] Starting host...
2020-09-09 11:18:42.922 -04:00 [INF] Migrating Database...
2020-09-09 11:18:43.847 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:18:44.333 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:18:44.399 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 11:18:44.422 -04:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 11:19:58.891 -04:00 [INF] Starting host...
2020-09-09 11:20:00.762 -04:00 [INF] Migrating Database...
2020-09-09 11:20:01.775 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:20:12.469 -04:00 [INF] Executed DbCommand (223ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 11:20:12.530 -04:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 11:20:12.560 -04:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:20:12.685 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 11:20:12.689 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:20:12.715 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:20:12.724 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:20:12.755 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 11:20:12.877 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 11:20:12.883 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 11:20:12.889 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 11:20:12.900 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 11:20:12.911 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.918 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.928 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.935 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.942 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.951 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.956 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.963 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.972 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.978 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:12.991 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.000 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.014 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.025 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.037 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.046 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.058 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.068 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 11:20:13.075 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 11:20:13.079 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 11:20:13.085 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 11:20:13.090 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 11:20:13.096 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 11:20:13.105 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 11:20:13.111 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 11:20:13.117 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 11:20:13.122 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 11:20:13.127 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 11:20:13.132 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 11:20:13.137 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 11:20:13.144 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 11:20:13.148 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 11:20:13.153 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 11:20:13.159 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 11:20:13.163 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 11:20:13.168 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 11:20:13.172 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 11:20:13.178 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 11:20:13.183 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 11:20:13.222 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:20:13.231 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:20:13.236 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:20:13.243 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:20:13.247 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:20:13.252 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:20:13.260 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 11:20:13.274 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 11:20:13.281 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 11:20:13.291 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 11:20:13.298 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 11:20:13.302 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 11:20:13.306 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 11:20:13.312 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 11:20:13.325 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 11:20:13.588 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:20:13.600 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:20:13.605 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:20:13.613 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:20:13.620 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:20:13.625 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:20:13.633 -04:00 [INF] Applying migration '20200909141231_Initial'.
2020-09-09 11:20:13.711 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:20:13.716 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:20:13.719 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:20:13.725 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:20:13.728 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 11:20:13.736 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 11:20:13.744 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 11:20:13.749 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 11:20:13.758 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 11:20:13.768 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 11:20:13.778 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 11:20:13.791 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.798 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.807 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.817 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.829 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:20:13.853 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimTypePrefix], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'role:', 'admin', CAST(1 AS bit)),
('DataGenie', 'role:', 'user', CAST(1 AS bit)),
('InfoMaster', 'role:', 'admin', CAST(1 AS bit)),
('InfoMaster', 'role:', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'role:', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 11:20:13.866 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 11:20:13.880 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 11:20:13.896 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name], [SharedEmail])
VALUES ('Burger Squire', NULL),
('McDougall''s', NULL),
('Windy''s', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 11:20:13.918 -04:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'3492a0ac-b672-4687-964b-d047e03de117', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJfU2O6+GUYBhqr31q1PLcRmFs2BD8O+NPWlfGjZLFh5hrzOynxqzeOIOZH20vZCgg==', N'222-333-4446', CAST(0 AS bit), N'470858da-da4f-4f31-aa4c-4ecc15e3672e', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'5e0e25d8-dceb-40c0-947c-10403f9417cd', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'ACEJeg8awnNlqLnW/yOBZfXU/jCBxbP4vC9oEypPEHqJFV6384jwBaTCFpqkAGb93Q==', N'000-111-2222', CAST(0 AS bit), N'8e8051cf-f11f-4cce-9b77-fed865da9ac6', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'760812aa-7120-405f-bdd7-a76421b9823a', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ADgFPqQNrM/ZZHpOXq+5r7QGC/yr/cxWedUEJJ9fl2M+KaQixAYl7zzVFmY0mQObaQ==', N'111-222-3333', CAST(1 AS bit), N'8be04ba1-9d66-4bb0-b4f1-8eae2d312758', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'ca9ca038-372d-4f6f-9d22-2dfdddc74731', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AINWnz3qUEaP5ldYPXjEPfYlAm5h4HJse2upbnpa7Zd6Std3FGwg45XYmChY95cr2A==', N'222-333-4444', CAST(0 AS bit), N'84738382-24cf-4f09-9fc8-10e313afcf67', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'f07bb48f-5909-4939-bccb-57b1f259395e', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AFAUkYlyca7021MQcKYhNMGqf4KAYfKPdUr1iOhjv41jYx2RxQvucBAnvmScxf6jrg==', N'000-111-2223', CAST(0 AS bit), N'93687f47-8e88-4fee-a0d8-fc65f1aa1fbe', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'584c4753-3b91-4185-abf6-1185a23f5612', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AHVhZ8sYl1ecRzzQW9/9Ev1E5IMi+fkBDTYhdKnGuwXl+6bgvezfx7EZy3aLUFM3Qg==', N'111-222-3334', CAST(1 AS bit), N'f2b2b545-ffef-41a4-9475-6077c62ac7cb', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'bc2ee7e7-1152-4614-8e58-27800e32d0d3', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJz75qahodCjRSuDUSVu+7+We/YdUhtAroHcLqr18qWOWYCH9KLydAAsjIpB1f6KYg==', N'222-333-4445', CAST(0 AS bit), N'd09991e3-6883-4644-a2ae-f23915e639b5', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'f10a06ac-55f7-48b8-896b-6b48a47e8a0e', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AE4VQ+pPQHAJcA32efqPD0+GLDSEtqCigFOlqgxsyzDHSedgIXxT5rn4cYAciN2zRg==', N'000-111-2224', CAST(0 AS bit), N'2b9dbd91-e0c9-487a-9ed7-6f8528c5ae4b', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'd4f92c84-db5f-4c9f-9cc9-f93bf73df04b', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AA4jRoLD5bsip5TJWLHus14jCYJ/tiHh1StPOdNX3PMEuTmON6Mu/pjmnjlrqoLwtw==', N'111-222-3335', CAST(1 AS bit), N'dafb419e-6389-47c6-9ec6-b4093d2d2b03', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'6353c2ac-fdc4-4aa9-88fb-75dd9011a58a', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AP0GvBIW6yT88pRpRGur1W91Q2dcPC6gVK31Ll7S1W95G03vDUJs2+P/GIa7iTBfoA==', N'222-333-4446', CAST(0 AS bit), N'11a6feaa-9354-428c-9602-0d048fc3d804', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'053358b3-3aec-462b-a66a-cb2c5af84b1d', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APeZt46UI4QDXJxUUQNFwx/uAGgwMwK1sepJpFBgj+TpT9eVSxQvwJ9Cocg/mgelkw==', N'999-888-7777', CAST(0 AS bit), N'16310fbf-1934-4623-b7a6-3f6c2d67315a', CAST(1 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 11:20:13.949 -04:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'role:DataGenie', N'admin', -1),
(-9904, N'role:DataGenie', N'admin', -2),
(-9905, N'role:InfoMaster', N'admin', -2),
(-9907, N'role:InfoMaster', N'admin', -3),
(-9908, N'role:DataGenie', N'user', -4),
(-9909, N'role:DataGenie', N'user', -5),
(-9910, N'role:InfoMaster', N'readonly', -5),
(-9911, N'role:InfoMaster', N'readonly', -6),
(-9912, N'role:DataGenie', N'user', -7),
(-9913, N'role:DataGenie', N'user', -8),
(-9914, N'role:InfoMaster', N'readonly', -8),
(-9915, N'role:InfoMaster', N'readonly', -9),
(-9916, N'role:InfoMaster', N'auditor', -10);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 11:20:13.959 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 11:20:13.962 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 11:20:13.969 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 11:20:13.973 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 11:20:13.979 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 11:20:13.984 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 11:20:13.993 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 11:20:14.013 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 11:20:14.025 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 11:20:14.036 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 11:20:14.042 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 11:20:14.046 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 11:20:14.054 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 11:20:14.072 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909141231_Initial', N'3.1.7');
2020-09-09 11:20:14.098 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 11:20:14.188 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 11:20:14.296 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 11:20:14.362 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 11:20:14.678 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 11:20:15.071 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 11:20:15.082 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 11:20:15.238 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 11:20:15.242 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 11:20:15.244 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 11:20:15.382 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 11:20:15.390 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 11:20:15.397 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 11:20:15.416 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 11:20:15.423 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:20:15.448 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:20:15.465 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:20:15.478 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-09-09 11:20:15.480 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:20:15.493 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-09-09 11:20:15.536 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:20:15.538 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:20:15.541 -04:00 [INF] 			Adding user record for john@a.test ...
2020-09-09 11:20:15.547 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:20:15.548 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:20:15.551 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-09-09 11:20:15.557 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:20:15.559 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:20:15.562 -04:00 [INF] 			Adding user record for linda@b.test ...
2020-09-09 11:20:15.567 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:20:15.569 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:20:15.571 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-09-09 11:20:15.577 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:20:15.579 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:20:15.581 -04:00 [INF] 			Adding user record for ebony@c.test ...
2020-09-09 11:20:15.588 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:20:15.589 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:20:15.591 -04:00 [INF] 			Adding user record for juan@a.test ...
2020-09-09 11:20:15.597 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:20:15.638 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:20:15.641 -04:00 [INF] 			Adding user record for james@b.test ...
2020-09-09 11:20:15.647 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:20:15.661 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:20:15.663 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:20:15.700 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:20:15.717 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor:API ...
2020-09-09 11:20:15.896 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor:ID ...
2020-09-09 11:20:16.021 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:20:16.023 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:20:16.025 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:20:16.027 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:20:16.031 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:20:16.034 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:20:16.039 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:20:16.042 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:20:16.047 -04:00 [INF] 			User record found for maria@a.test ...
2020-09-09 11:20:16.048 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:20:16.049 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:20:16.054 -04:00 [INF] 			User record found for john@a.test ...
2020-09-09 11:20:16.056 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:20:16.057 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:20:16.059 -04:00 [INF] 			User record found for darius@b.test ...
2020-09-09 11:20:16.062 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:20:16.066 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:20:16.069 -04:00 [INF] 			User record found for linda@b.test ...
2020-09-09 11:20:16.070 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:20:16.074 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:20:16.077 -04:00 [INF] 			User record found for pat@c.test ...
2020-09-09 11:20:16.080 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:20:16.084 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:20:16.087 -04:00 [INF] 			User record found for ebony@c.test ...
2020-09-09 11:20:16.090 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:20:16.091 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:20:16.095 -04:00 [INF] 			User record found for juan@a.test ...
2020-09-09 11:20:16.096 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:20:16.101 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:20:16.103 -04:00 [INF] 			User record found for james@b.test ...
2020-09-09 11:20:16.105 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:20:16.119 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:20:16.121 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-09-09 11:20:16.151 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:20:16.153 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server:API ...
2020-09-09 11:20:16.168 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:20:16.170 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:20:16.174 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:20:16.177 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:20:16.184 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:20:16.187 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:20:16.191 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:20:16.193 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:20:16.197 -04:00 [INF] 			User record found for maria@a.test ...
2020-09-09 11:20:16.198 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:20:16.201 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:20:16.204 -04:00 [INF] 			User record found for john@a.test ...
2020-09-09 11:20:16.207 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:20:16.209 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:20:16.212 -04:00 [INF] 			User record found for darius@b.test ...
2020-09-09 11:20:16.213 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:20:16.215 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:20:16.217 -04:00 [INF] 			User record found for linda@b.test ...
2020-09-09 11:20:16.218 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:20:16.223 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:20:16.229 -04:00 [INF] 			User record found for pat@c.test ...
2020-09-09 11:20:16.233 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:20:16.235 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:20:16.241 -04:00 [INF] 			User record found for ebony@c.test ...
2020-09-09 11:20:16.244 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:20:16.245 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:20:16.249 -04:00 [INF] 			User record found for juan@a.test ...
2020-09-09 11:20:16.249 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:20:16.251 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:20:16.254 -04:00 [INF] 			User record found for james@b.test ...
2020-09-09 11:20:16.256 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:20:16.257 -04:00 [INF] **Finished Loading Configurations.
2020-09-09 11:20:16.260 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-09-09 11:24:12.601 -04:00 [INF] Starting host...
2020-09-09 11:24:14.541 -04:00 [INF] Migrating Database...
2020-09-09 11:24:15.456 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:24:15.941 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:24:16.007 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 11:24:16.032 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 11:24:26.233 -04:00 [INF] Executed DbCommand (159ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 11:24:26.290 -04:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 11:24:26.301 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:24:26.442 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 11:24:26.447 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:24:26.475 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:24:26.487 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:24:26.524 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 11:24:26.642 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 11:24:26.649 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 11:24:26.659 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 11:24:26.671 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 11:24:26.678 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.687 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.692 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.705 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.714 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.725 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.734 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.742 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.747 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.757 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.768 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.777 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.786 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.794 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.802 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.810 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.819 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:26.823 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 11:24:26.830 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 11:24:26.833 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 11:24:26.840 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 11:24:26.845 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 11:24:26.852 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 11:24:26.857 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 11:24:26.864 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 11:24:26.868 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 11:24:26.872 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 11:24:26.877 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 11:24:26.882 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 11:24:26.887 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 11:24:26.893 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 11:24:26.899 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 11:24:26.903 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 11:24:26.907 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 11:24:26.914 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 11:24:26.918 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 11:24:26.922 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 11:24:26.927 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 11:24:26.933 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 11:24:26.969 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:24:26.981 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:24:26.984 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:24:26.990 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:24:26.994 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:24:27.001 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:24:27.006 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 11:24:27.020 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 11:24:27.030 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 11:24:27.037 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 11:24:27.043 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 11:24:27.047 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 11:24:27.051 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 11:24:27.056 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 11:24:27.061 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 11:24:27.239 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:24:27.251 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:24:27.255 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:24:27.261 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:24:27.265 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:24:27.270 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:24:27.275 -04:00 [INF] Applying migration '20200909141231_Initial'.
2020-09-09 11:24:27.359 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:24:27.365 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:24:27.368 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:24:27.373 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:24:27.379 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 11:24:27.386 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 11:24:27.393 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 11:24:27.399 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 11:24:27.407 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 11:24:27.417 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 11:24:27.424 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 11:24:27.433 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:27.443 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:27.450 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:27.459 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:27.469 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:24:27.492 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] ON;
INSERT INTO [AspNetApplicationClaims] ([Application], [ClaimTypePrefix], [ClaimValue], [OrgAdminable])
VALUES ('DataGenie', 'role:', 'admin', CAST(1 AS bit)),
('DataGenie', 'role:', 'user', CAST(1 AS bit)),
('InfoMaster', 'role:', 'admin', CAST(1 AS bit)),
('InfoMaster', 'role:', 'readonly', CAST(1 AS bit)),
('InfoMaster', 'role:', 'auditor', CAST(0 AS bit));
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Application', N'ClaimTypePrefix', N'ClaimValue', N'OrgAdminable') AND [object_id] = OBJECT_ID(N'[AspNetApplicationClaims]'))
    SET IDENTITY_INSERT [AspNetApplicationClaims] OFF;
2020-09-09 11:24:27.506 -04:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] ON;
INSERT INTO [AspNetApplications] ([Name])
VALUES ('DataGenie'),
('InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name') AND [object_id] = OBJECT_ID(N'[AspNetApplications]'))
    SET IDENTITY_INSERT [AspNetApplications] OFF;
2020-09-09 11:24:27.520 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] ON;
INSERT INTO [AspNetOrganizationApplications] ([Organization], [Application])
VALUES ('Windy''s', 'InfoMaster'),
('Burger Squire', 'DataGenie'),
('McDougall''s', 'DataGenie'),
('Burger Squire', 'InfoMaster');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Organization', N'Application') AND [object_id] = OBJECT_ID(N'[AspNetOrganizationApplications]'))
    SET IDENTITY_INSERT [AspNetOrganizationApplications] OFF;
2020-09-09 11:24:27.538 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] ON;
INSERT INTO [AspNetOrganizations] ([Name], [SharedEmail])
VALUES ('Burger Squire', NULL),
('McDougall''s', NULL),
('Windy''s', NULL);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Name', N'SharedEmail') AND [object_id] = OBJECT_ID(N'[AspNetOrganizations]'))
    SET IDENTITY_INSERT [AspNetOrganizations] OFF;
2020-09-09 11:24:27.566 -04:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [LockoutBegin], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [Organization], [OrganizationAdmin], [OrganizationConfirmed], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [SuperAdmin], [TwoFactorEnabled], [UserName])
VALUES (-10, 0, N'3492a0ac-b672-4687-964b-d047e03de117', N'alice@windys.com', CAST(1 AS bit), NULL, NULL, N'ALICE@WINDYS.COM', N'ALICE@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJfU2O6+GUYBhqr31q1PLcRmFs2BD8O+NPWlfGjZLFh5hrzOynxqzeOIOZH20vZCgg==', N'222-333-4446', CAST(0 AS bit), N'470858da-da4f-4f31-aa4c-4ecc15e3672e', CAST(0 AS bit), CAST(0 AS bit), N'alice@windys.com'),
(-1, 0, N'5e0e25d8-dceb-40c0-947c-10403f9417cd', N'moe@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MOE@MCDOUGALLS.COM', N'MOE@MCDOUGALLS.COM', 'McDougall''s', CAST(1 AS bit), CAST(0 AS bit), N'ACEJeg8awnNlqLnW/yOBZfXU/jCBxbP4vC9oEypPEHqJFV6384jwBaTCFpqkAGb93Q==', N'000-111-2222', CAST(0 AS bit), N'8e8051cf-f11f-4cce-9b77-fed865da9ac6', CAST(0 AS bit), CAST(0 AS bit), N'moe@mcdougalls.com'),
(-2, 0, N'760812aa-7120-405f-bdd7-a76421b9823a', N'larry@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'LARRY@BURGERSQUIRE.COM', N'LARRY@BURGERSQUIRE.COM', 'Burger Squire', CAST(1 AS bit), CAST(0 AS bit), N'ADgFPqQNrM/ZZHpOXq+5r7QGC/yr/cxWedUEJJ9fl2M+KaQixAYl7zzVFmY0mQObaQ==', N'111-222-3333', CAST(1 AS bit), N'8be04ba1-9d66-4bb0-b4f1-8eae2d312758', CAST(0 AS bit), CAST(0 AS bit), N'larry@burgersquire.com'),
(-3, 0, N'ca9ca038-372d-4f6f-9d22-2dfdddc74731', N'curly@windys.com', CAST(1 AS bit), NULL, NULL, N'CURLY@WINDYS.COM', N'CURLY@WINDYS.COM', 'Windy''s', CAST(1 AS bit), CAST(0 AS bit), N'AINWnz3qUEaP5ldYPXjEPfYlAm5h4HJse2upbnpa7Zd6Std3FGwg45XYmChY95cr2A==', N'222-333-4444', CAST(0 AS bit), N'84738382-24cf-4f09-9fc8-10e313afcf67', CAST(0 AS bit), CAST(0 AS bit), N'curly@windys.com'),
(-4, 0, N'f07bb48f-5909-4939-bccb-57b1f259395e', N'marcia@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'MARCIA@MCDOUGALLS.COM', N'MARCIA@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AFAUkYlyca7021MQcKYhNMGqf4KAYfKPdUr1iOhjv41jYx2RxQvucBAnvmScxf6jrg==', N'000-111-2223', CAST(0 AS bit), N'93687f47-8e88-4fee-a0d8-fc65f1aa1fbe', CAST(0 AS bit), CAST(0 AS bit), N'marcia@mcdougalls.com'),
(-5, 0, N'584c4753-3b91-4185-abf6-1185a23f5612', N'jan@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'JAN@BURGERSQUIRE.COM', N'JAN@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AHVhZ8sYl1ecRzzQW9/9Ev1E5IMi+fkBDTYhdKnGuwXl+6bgvezfx7EZy3aLUFM3Qg==', N'111-222-3334', CAST(1 AS bit), N'f2b2b545-ffef-41a4-9475-6077c62ac7cb', CAST(0 AS bit), CAST(0 AS bit), N'jan@burgersquire.com'),
(-6, 0, N'bc2ee7e7-1152-4614-8e58-27800e32d0d3', N'cindy@windys.com', CAST(1 AS bit), NULL, NULL, N'CINDY@WINDYS.COM', N'CINDY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AJz75qahodCjRSuDUSVu+7+We/YdUhtAroHcLqr18qWOWYCH9KLydAAsjIpB1f6KYg==', N'222-333-4445', CAST(0 AS bit), N'd09991e3-6883-4644-a2ae-f23915e639b5', CAST(0 AS bit), CAST(0 AS bit), N'cindy@windys.com'),
(-7, 0, N'f10a06ac-55f7-48b8-896b-6b48a47e8a0e', N'greg@mcdougalls.com', CAST(1 AS bit), NULL, NULL, N'GREG@MCDOUGALLS.COM', N'GREG@MCDOUGALLS.COM', 'McDougall''s', CAST(0 AS bit), CAST(0 AS bit), N'AE4VQ+pPQHAJcA32efqPD0+GLDSEtqCigFOlqgxsyzDHSedgIXxT5rn4cYAciN2zRg==', N'000-111-2224', CAST(0 AS bit), N'2b9dbd91-e0c9-487a-9ed7-6f8528c5ae4b', CAST(0 AS bit), CAST(0 AS bit), N'greg@mcdougalls.com'),
(-8, 0, N'd4f92c84-db5f-4c9f-9cc9-f93bf73df04b', N'peter@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'PETER@BURGERSQUIRE.COM', N'PETER@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'AA4jRoLD5bsip5TJWLHus14jCYJ/tiHh1StPOdNX3PMEuTmON6Mu/pjmnjlrqoLwtw==', N'111-222-3335', CAST(1 AS bit), N'dafb419e-6389-47c6-9ec6-b4093d2d2b03', CAST(0 AS bit), CAST(0 AS bit), N'peter@burgersquire.com'),
(-9, 0, N'6353c2ac-fdc4-4aa9-88fb-75dd9011a58a', N'bobby@windys.com', CAST(1 AS bit), '2020-01-01T00:00:00.0000000-05:00', '2030-12-13T00:00:00.0000000-05:00', N'BOBBY@WINDYS.COM', N'BOBBY@WINDYS.COM', 'Windy''s', CAST(0 AS bit), CAST(0 AS bit), N'AP0GvBIW6yT88pRpRGur1W91Q2dcPC6gVK31Ll7S1W95G03vDUJs2+P/GIa7iTBfoA==', N'222-333-4446', CAST(0 AS bit), N'11a6feaa-9354-428c-9602-0d048fc3d804', CAST(0 AS bit), CAST(0 AS bit), N'bobby@windys.com'),
(-11, 0, N'053358b3-3aec-462b-a66a-cb2c5af84b1d', N'sheldon@burgersquire.com', CAST(1 AS bit), NULL, NULL, N'SHELDON@BURGERSQUIRE.COM', N'SHELDON@BURGERSQUIRE.COM', 'Burger Squire', CAST(0 AS bit), CAST(0 AS bit), N'APeZt46UI4QDXJxUUQNFwx/uAGgwMwK1sepJpFBgj+TpT9eVSxQvwJ9Cocg/mgelkw==', N'999-888-7777', CAST(0 AS bit), N'16310fbf-1934-4623-b7a6-3f6c2d67315a', CAST(1 AS bit), CAST(0 AS bit), N'sheldon@burgersquire.com');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'AccessFailedCount', N'ConcurrencyStamp', N'Email', N'EmailConfirmed', N'LockoutBegin', N'LockoutEnd', N'NormalizedEmail', N'NormalizedUserName', N'Organization', N'OrganizationAdmin', N'OrganizationConfirmed', N'PasswordHash', N'PhoneNumber', N'PhoneNumberConfirmed', N'SecurityStamp', N'SuperAdmin', N'TwoFactorEnabled', N'UserName') AND [object_id] = OBJECT_ID(N'[AspNetUsers]'))
    SET IDENTITY_INSERT [AspNetUsers] OFF;
2020-09-09 11:24:27.598 -04:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] ON;
INSERT INTO [AspNetUserClaims] ([Id], [ClaimType], [ClaimValue], [UserId])
VALUES (-9902, N'role:DataGenie', N'admin', -1),
(-9904, N'role:DataGenie', N'admin', -2),
(-9905, N'role:InfoMaster', N'admin', -2),
(-9907, N'role:InfoMaster', N'admin', -3),
(-9908, N'role:DataGenie', N'user', -4),
(-9909, N'role:DataGenie', N'user', -5),
(-9910, N'role:InfoMaster', N'readonly', -5),
(-9911, N'role:InfoMaster', N'readonly', -6),
(-9912, N'role:DataGenie', N'user', -7),
(-9913, N'role:DataGenie', N'user', -8),
(-9914, N'role:InfoMaster', N'readonly', -8),
(-9915, N'role:InfoMaster', N'readonly', -9),
(-9916, N'role:InfoMaster', N'auditor', -10);
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'ClaimType', N'ClaimValue', N'UserId') AND [object_id] = OBJECT_ID(N'[AspNetUserClaims]'))
    SET IDENTITY_INSERT [AspNetUserClaims] OFF;
2020-09-09 11:24:27.607 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 11:24:27.615 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 11:24:27.620 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 11:24:27.623 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 11:24:27.631 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 11:24:27.637 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 11:24:27.646 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 11:24:27.664 -04:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 11:24:27.671 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 11:24:27.680 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 11:24:27.683 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 11:24:27.686 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 11:24:27.694 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 11:24:27.708 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909141231_Initial', N'3.1.7');
2020-09-09 11:24:27.727 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 11:24:27.794 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 11:24:27.874 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 11:24:27.942 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 11:24:28.274 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 11:24:28.682 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 11:24:28.690 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 11:24:28.844 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 11:24:28.848 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 11:24:28.851 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 11:24:28.973 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 11:24:28.981 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 11:24:28.988 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 11:24:29.002 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 11:24:29.018 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:24:29.048 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:24:29.069 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:24:29.083 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-09-09 11:24:29.085 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:24:29.099 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-09-09 11:24:29.153 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:24:29.156 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:24:29.158 -04:00 [INF] 			Adding user record for john@a.test ...
2020-09-09 11:24:29.164 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:24:29.165 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:24:29.167 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-09-09 11:24:29.174 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:24:29.175 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:24:29.176 -04:00 [INF] 			Adding user record for linda@b.test ...
2020-09-09 11:24:29.183 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:24:29.185 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:24:29.187 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-09-09 11:24:29.194 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:24:29.195 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:24:29.199 -04:00 [INF] 			Adding user record for ebony@c.test ...
2020-09-09 11:24:29.204 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:24:29.206 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:24:29.209 -04:00 [INF] 			Adding user record for juan@a.test ...
2020-09-09 11:24:29.214 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:24:29.259 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:24:29.262 -04:00 [INF] 			Adding user record for james@b.test ...
2020-09-09 11:24:29.268 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:24:29.292 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:24:29.294 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:24:29.331 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:24:29.349 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor:API ...
2020-09-09 11:24:29.526 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor:ID ...
2020-09-09 11:24:29.635 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:24:29.636 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:24:29.638 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:24:29.640 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:24:29.644 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:24:29.648 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:24:29.651 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:24:29.652 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:24:29.656 -04:00 [INF] 			User record found for maria@a.test ...
2020-09-09 11:24:29.658 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:24:29.663 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:24:29.665 -04:00 [INF] 			User record found for john@a.test ...
2020-09-09 11:24:29.666 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:24:29.668 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:24:29.671 -04:00 [INF] 			User record found for darius@b.test ...
2020-09-09 11:24:29.672 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:24:29.674 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:24:29.678 -04:00 [INF] 			User record found for linda@b.test ...
2020-09-09 11:24:29.680 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:24:29.681 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:24:29.683 -04:00 [INF] 			User record found for pat@c.test ...
2020-09-09 11:24:29.684 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:24:29.685 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:24:29.689 -04:00 [INF] 			User record found for ebony@c.test ...
2020-09-09 11:24:29.690 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:24:29.693 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:24:29.696 -04:00 [INF] 			User record found for juan@a.test ...
2020-09-09 11:24:29.699 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:24:29.702 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:24:29.704 -04:00 [INF] 			User record found for james@b.test ...
2020-09-09 11:24:29.706 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:24:29.711 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:24:29.714 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-09-09 11:24:29.732 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:24:29.735 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server:API ...
2020-09-09 11:24:29.750 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:24:29.751 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:24:29.754 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:24:29.757 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:24:29.761 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:24:29.765 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:24:29.769 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:24:29.770 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:24:29.772 -04:00 [INF] 			User record found for maria@a.test ...
2020-09-09 11:24:29.775 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:24:29.777 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:24:29.781 -04:00 [INF] 			User record found for john@a.test ...
2020-09-09 11:24:29.784 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:24:29.785 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:24:29.790 -04:00 [INF] 			User record found for darius@b.test ...
2020-09-09 11:24:29.791 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:24:29.794 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:24:29.798 -04:00 [INF] 			User record found for linda@b.test ...
2020-09-09 11:24:29.799 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:24:29.804 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:24:29.809 -04:00 [INF] 			User record found for pat@c.test ...
2020-09-09 11:24:29.810 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:24:29.813 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:24:29.818 -04:00 [INF] 			User record found for ebony@c.test ...
2020-09-09 11:24:29.820 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:24:29.824 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:24:29.829 -04:00 [INF] 			User record found for juan@a.test ...
2020-09-09 11:24:29.830 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:24:29.836 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:24:29.838 -04:00 [INF] 			User record found for james@b.test ...
2020-09-09 11:24:29.839 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:24:29.840 -04:00 [INF] **Finished Loading Configurations.
2020-09-09 11:24:29.847 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-09-09 11:43:18.306 -04:00 [INF] Starting host...
2020-09-09 11:43:19.955 -04:00 [INF] Migrating Database...
2020-09-09 11:43:20.881 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:43:21.314 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:43:24.386 -04:00 [INF] Executed DbCommand (3,007ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 11:43:24.417 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 11:43:34.605 -04:00 [INF] Executed DbCommand (147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 11:43:34.664 -04:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 11:43:34.675 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:43:34.804 -04:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 11:43:34.809 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:43:34.838 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:43:34.849 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:43:34.885 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 11:43:35.004 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 11:43:35.011 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 11:43:35.021 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 11:43:35.033 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 11:43:35.043 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.048 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.057 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.067 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.077 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.086 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.094 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.100 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.108 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.116 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.123 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.131 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.141 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.151 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.160 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.170 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.179 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.184 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 11:43:35.190 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 11:43:35.195 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 11:43:35.199 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 11:43:35.203 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 11:43:35.207 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 11:43:35.213 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 11:43:35.221 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 11:43:35.228 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 11:43:35.234 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 11:43:35.241 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 11:43:35.245 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 11:43:35.248 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 11:43:35.252 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 11:43:35.258 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 11:43:35.262 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 11:43:35.267 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 11:43:35.273 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 11:43:35.276 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 11:43:35.283 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 11:43:35.287 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 11:43:35.292 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 11:43:35.325 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:43:35.334 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:43:35.339 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:43:35.344 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:43:35.349 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:43:35.356 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:43:35.364 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 11:43:35.378 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 11:43:35.387 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 11:43:35.391 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 11:43:35.397 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 11:43:35.401 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 11:43:35.404 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 11:43:35.409 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 11:43:35.414 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 11:43:35.583 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 11:43:35.596 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:43:35.600 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:43:35.604 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 11:43:35.608 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 11:43:35.612 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 11:43:35.619 -04:00 [INF] Applying migration '20200909154203_Initial'.
2020-09-09 11:43:35.674 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:43:35.680 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:43:35.684 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:43:35.691 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 11:43:35.695 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 11:43:35.700 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 11:43:35.705 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 11:43:35.713 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 11:43:35.720 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 11:43:35.728 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 11:43:35.735 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 11:43:35.747 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.758 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.767 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.774 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.791 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 11:43:35.796 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 11:43:35.802 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 11:43:35.806 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 11:43:35.811 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 11:43:35.815 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 11:43:35.822 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 11:43:35.828 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 11:43:35.836 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 11:43:35.846 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 11:43:35.857 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 11:43:35.860 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 11:43:35.868 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 11:43:35.876 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 11:43:35.895 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909154203_Initial', N'3.1.7');
2020-09-09 11:43:35.916 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 11:43:35.962 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 11:43:36.060 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 11:43:36.128 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 11:43:36.468 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 11:43:36.869 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 11:43:36.879 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 11:43:37.050 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 11:43:37.064 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 11:43:37.067 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 11:43:37.194 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 11:43:37.202 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 11:43:37.209 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 11:43:37.217 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 11:43:37.234 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:43:37.262 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:43:37.279 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:43:37.293 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-09-09 11:43:37.295 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:43:37.309 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-09-09 11:43:37.366 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:43:37.368 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:43:37.370 -04:00 [INF] 			Adding user record for john@a.test ...
2020-09-09 11:43:37.375 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:43:37.377 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:43:37.382 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-09-09 11:43:37.387 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:43:37.389 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:43:37.391 -04:00 [INF] 			Adding user record for linda@b.test ...
2020-09-09 11:43:37.398 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:43:37.399 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:43:37.401 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-09-09 11:43:37.409 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:43:37.411 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:43:37.415 -04:00 [INF] 			Adding user record for ebony@c.test ...
2020-09-09 11:43:37.421 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:43:37.422 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:43:37.426 -04:00 [INF] 			Adding user record for juan@a.test ...
2020-09-09 11:43:37.431 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:43:37.472 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:43:37.475 -04:00 [INF] 			Adding user record for james@b.test ...
2020-09-09 11:43:37.480 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:43:37.501 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:43:37.503 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:43:37.539 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:43:37.557 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor:API ...
2020-09-09 11:43:37.759 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor:ID ...
2020-09-09 11:43:37.885 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:43:37.887 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:43:37.889 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:43:37.892 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:43:37.896 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:43:37.900 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:43:37.906 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-09-09 11:43:37.907 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:43:37.912 -04:00 [INF] 			User record found for maria@a.test ...
2020-09-09 11:43:37.914 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:43:37.917 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:43:37.920 -04:00 [INF] 			User record found for john@a.test ...
2020-09-09 11:43:37.921 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:43:37.923 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:43:37.925 -04:00 [INF] 			User record found for darius@b.test ...
2020-09-09 11:43:37.927 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:43:37.930 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:43:37.932 -04:00 [INF] 			User record found for linda@b.test ...
2020-09-09 11:43:37.933 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:43:37.936 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:43:37.938 -04:00 [INF] 			User record found for pat@c.test ...
2020-09-09 11:43:37.940 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:43:37.941 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:43:37.943 -04:00 [INF] 			User record found for ebony@c.test ...
2020-09-09 11:43:37.944 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:43:37.947 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:43:37.948 -04:00 [INF] 			User record found for juan@a.test ...
2020-09-09 11:43:37.950 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:43:37.959 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:43:37.962 -04:00 [INF] 			User record found for james@b.test ...
2020-09-09 11:43:37.964 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:43:37.980 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:43:37.982 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-09-09 11:43:38.003 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:43:38.006 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server:API ...
2020-09-09 11:43:38.022 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:43:38.025 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:43:38.027 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:43:38.037 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 11:43:38.041 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 11:43:38.044 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 11:43:38.053 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-09-09 11:43:38.054 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 11:43:38.056 -04:00 [INF] 			User record found for maria@a.test ...
2020-09-09 11:43:38.059 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 11:43:38.060 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 11:43:38.065 -04:00 [INF] 			User record found for john@a.test ...
2020-09-09 11:43:38.066 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 11:43:38.070 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 11:43:38.074 -04:00 [INF] 			User record found for darius@b.test ...
2020-09-09 11:43:38.076 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 11:43:38.077 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 11:43:38.082 -04:00 [INF] 			User record found for linda@b.test ...
2020-09-09 11:43:38.085 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 11:43:38.086 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 11:43:38.090 -04:00 [INF] 			User record found for pat@c.test ...
2020-09-09 11:43:38.091 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 11:43:38.092 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 11:43:38.094 -04:00 [INF] 			User record found for ebony@c.test ...
2020-09-09 11:43:38.095 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 11:43:38.097 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 11:43:38.101 -04:00 [INF] 			User record found for juan@a.test ...
2020-09-09 11:43:38.102 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 11:43:38.105 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 11:43:38.106 -04:00 [INF] 			User record found for james@b.test ...
2020-09-09 11:43:38.107 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 11:43:38.110 -04:00 [INF] **Finished Loading Configurations.
2020-09-09 11:43:38.113 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
2020-09-09 12:05:30.087 -04:00 [INF] Starting host...
2020-09-09 12:05:31.829 -04:00 [INF] Migrating Database...
2020-09-09 12:05:32.825 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'ConfigurationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 12:05:33.290 -04:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 12:05:36.367 -04:00 [INF] Executed DbCommand (3,008ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2020-09-09 12:05:36.392 -04:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [AspNetIdentityServer];
2020-09-09 12:05:46.573 -04:00 [INF] Executed DbCommand (139ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [AspNetIdentityServer];
2020-09-09 12:05:46.626 -04:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [AspNetIdentityServer] SET READ_COMMITTED_SNAPSHOT ON;
END;
2020-09-09 12:05:46.637 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 12:05:46.776 -04:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2020-09-09 12:05:46.780 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 12:05:46.808 -04:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 12:05:46.817 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 12:05:46.855 -04:00 [INF] Applying migration '20200818143842_Initial'.
2020-09-09 12:05:46.975 -04:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [AllowedAccessTokenSigningAlgorithms] nvarchar(100) NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_ApiResources] PRIMARY KEY ([Id])
);
2020-09-09 12:05:46.980 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopes] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    CONSTRAINT [PK_ApiScopes] PRIMARY KEY ([Id])
);
2020-09-09 12:05:46.986 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Clients] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [ProtocolType] nvarchar(200) NOT NULL,
    [RequireClientSecret] bit NOT NULL,
    [ClientName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [ClientUri] nvarchar(2000) NULL,
    [LogoUri] nvarchar(2000) NULL,
    [RequireConsent] bit NOT NULL,
    [AllowRememberConsent] bit NOT NULL,
    [AlwaysIncludeUserClaimsInIdToken] bit NOT NULL,
    [RequirePkce] bit NOT NULL,
    [AllowPlainTextPkce] bit NOT NULL,
    [RequireRequestObject] bit NOT NULL,
    [AllowAccessTokensViaBrowser] bit NOT NULL,
    [FrontChannelLogoutUri] nvarchar(2000) NULL,
    [FrontChannelLogoutSessionRequired] bit NOT NULL,
    [BackChannelLogoutUri] nvarchar(2000) NULL,
    [BackChannelLogoutSessionRequired] bit NOT NULL,
    [AllowOfflineAccess] bit NOT NULL,
    [IdentityTokenLifetime] int NOT NULL,
    [AllowedIdentityTokenSigningAlgorithms] nvarchar(100) NULL,
    [AccessTokenLifetime] int NOT NULL,
    [AuthorizationCodeLifetime] int NOT NULL,
    [ConsentLifetime] int NULL,
    [AbsoluteRefreshTokenLifetime] int NOT NULL,
    [SlidingRefreshTokenLifetime] int NOT NULL,
    [RefreshTokenUsage] int NOT NULL,
    [UpdateAccessTokenClaimsOnRefresh] bit NOT NULL,
    [RefreshTokenExpiration] int NOT NULL,
    [AccessTokenType] int NOT NULL,
    [EnableLocalLogin] bit NOT NULL,
    [IncludeJwtId] bit NOT NULL,
    [AlwaysSendClientClaims] bit NOT NULL,
    [ClientClaimsPrefix] nvarchar(200) NULL,
    [PairWiseSubjectSalt] nvarchar(200) NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [LastAccessed] datetime2 NULL,
    [UserSsoLifetime] int NULL,
    [UserCodeType] nvarchar(100) NULL,
    [DeviceCodeLifetime] int NOT NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_Clients] PRIMARY KEY ([Id])
);
2020-09-09 12:05:46.996 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResources] (
    [Id] int NOT NULL IDENTITY,
    [Enabled] bit NOT NULL,
    [Name] nvarchar(200) NOT NULL,
    [DisplayName] nvarchar(200) NULL,
    [Description] nvarchar(1000) NULL,
    [Required] bit NOT NULL,
    [Emphasize] bit NOT NULL,
    [ShowInDiscoveryDocument] bit NOT NULL,
    [Created] datetime2 NOT NULL,
    [Updated] datetime2 NULL,
    [NonEditable] bit NOT NULL,
    CONSTRAINT [PK_IdentityResources] PRIMARY KEY ([Id])
);
2020-09-09 12:05:47.006 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceClaims_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.014 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceProperties_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.020 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceScopes_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.028 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiResourceSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(1000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ApiResourceId] int NOT NULL,
    CONSTRAINT [PK_ApiResourceSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiResourceSecrets_ApiResources_ApiResourceId] FOREIGN KEY ([ApiResourceId]) REFERENCES [ApiResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.037 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeClaims_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.045 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ApiScopeProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ScopeId] int NOT NULL,
    CONSTRAINT [PK_ApiScopeProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ApiScopeProperties_ApiScopes_ScopeId] FOREIGN KEY ([ScopeId]) REFERENCES [ApiScopes] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.052 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(250) NOT NULL,
    [Value] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientClaims_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.061 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientCorsOrigins] (
    [Id] int NOT NULL IDENTITY,
    [Origin] nvarchar(150) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientCorsOrigins] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientCorsOrigins_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.071 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientGrantTypes] (
    [Id] int NOT NULL IDENTITY,
    [GrantType] nvarchar(250) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientGrantTypes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientGrantTypes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.081 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientIdPRestrictions] (
    [Id] int NOT NULL IDENTITY,
    [Provider] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientIdPRestrictions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientIdPRestrictions_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.090 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientPostLogoutRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [PostLogoutRedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientPostLogoutRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientPostLogoutRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.096 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientProperties_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.104 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientRedirectUris] (
    [Id] int NOT NULL IDENTITY,
    [RedirectUri] nvarchar(2000) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientRedirectUris] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientRedirectUris_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.113 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientScopes] (
    [Id] int NOT NULL IDENTITY,
    [Scope] nvarchar(200) NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientScopes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientScopes_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.122 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ClientSecrets] (
    [Id] int NOT NULL IDENTITY,
    [Description] nvarchar(2000) NULL,
    [Value] nvarchar(4000) NOT NULL,
    [Expiration] datetime2 NULL,
    [Type] nvarchar(250) NOT NULL,
    [Created] datetime2 NOT NULL,
    [ClientId] int NOT NULL,
    CONSTRAINT [PK_ClientSecrets] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ClientSecrets_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.133 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceClaims] (
    [Id] int NOT NULL IDENTITY,
    [Type] nvarchar(200) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceClaims_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.139 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [IdentityResourceProperties] (
    [Id] int NOT NULL IDENTITY,
    [Key] nvarchar(250) NOT NULL,
    [Value] nvarchar(2000) NOT NULL,
    [IdentityResourceId] int NOT NULL,
    CONSTRAINT [PK_IdentityResourceProperties] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_IdentityResourceProperties_IdentityResources_IdentityResourceId] FOREIGN KEY ([IdentityResourceId]) REFERENCES [IdentityResources] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.144 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceClaims_ApiResourceId] ON [ApiResourceClaims] ([ApiResourceId]);
2020-09-09 12:05:47.147 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceProperties_ApiResourceId] ON [ApiResourceProperties] ([ApiResourceId]);
2020-09-09 12:05:47.153 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiResources_Name] ON [ApiResources] ([Name]);
2020-09-09 12:05:47.157 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceScopes_ApiResourceId] ON [ApiResourceScopes] ([ApiResourceId]);
2020-09-09 12:05:47.162 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiResourceSecrets_ApiResourceId] ON [ApiResourceSecrets] ([ApiResourceId]);
2020-09-09 12:05:47.167 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeClaims_ScopeId] ON [ApiScopeClaims] ([ScopeId]);
2020-09-09 12:05:47.172 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ApiScopeProperties_ScopeId] ON [ApiScopeProperties] ([ScopeId]);
2020-09-09 12:05:47.177 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ApiScopes_Name] ON [ApiScopes] ([Name]);
2020-09-09 12:05:47.181 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientClaims_ClientId] ON [ClientClaims] ([ClientId]);
2020-09-09 12:05:47.186 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientCorsOrigins_ClientId] ON [ClientCorsOrigins] ([ClientId]);
2020-09-09 12:05:47.195 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientGrantTypes_ClientId] ON [ClientGrantTypes] ([ClientId]);
2020-09-09 12:05:47.202 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientIdPRestrictions_ClientId] ON [ClientIdPRestrictions] ([ClientId]);
2020-09-09 12:05:47.208 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientPostLogoutRedirectUris_ClientId] ON [ClientPostLogoutRedirectUris] ([ClientId]);
2020-09-09 12:05:47.212 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientProperties_ClientId] ON [ClientProperties] ([ClientId]);
2020-09-09 12:05:47.215 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientRedirectUris_ClientId] ON [ClientRedirectUris] ([ClientId]);
2020-09-09 12:05:47.220 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Clients_ClientId] ON [Clients] ([ClientId]);
2020-09-09 12:05:47.226 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientScopes_ClientId] ON [ClientScopes] ([ClientId]);
2020-09-09 12:05:47.231 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ClientSecrets_ClientId] ON [ClientSecrets] ([ClientId]);
2020-09-09 12:05:47.236 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceClaims_IdentityResourceId] ON [IdentityResourceClaims] ([IdentityResourceId]);
2020-09-09 12:05:47.243 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_IdentityResourceProperties_IdentityResourceId] ON [IdentityResourceProperties] ([IdentityResourceId]);
2020-09-09 12:05:47.247 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_IdentityResources_Name] ON [IdentityResources] ([Name]);
2020-09-09 12:05:47.252 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818143842_Initial', N'3.1.7');
2020-09-09 12:05:47.292 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'PersistedGrantDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 12:05:47.296 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 12:05:47.302 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 12:05:47.306 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 12:05:47.312 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 12:05:47.318 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 12:05:47.322 -04:00 [INF] Applying migration '20200818144238_Initial'.
2020-09-09 12:05:47.336 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [DeviceCodes] (
    [UserCode] nvarchar(200) NOT NULL,
    [DeviceCode] nvarchar(200) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NOT NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_DeviceCodes] PRIMARY KEY ([UserCode])
);
2020-09-09 12:05:47.347 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PersistedGrants] (
    [Key] nvarchar(200) NOT NULL,
    [Type] nvarchar(50) NOT NULL,
    [SubjectId] nvarchar(200) NULL,
    [SessionId] nvarchar(100) NULL,
    [ClientId] nvarchar(200) NOT NULL,
    [Description] nvarchar(200) NULL,
    [CreationTime] datetime2 NOT NULL,
    [Expiration] datetime2 NULL,
    [ConsumedTime] datetime2 NULL,
    [Data] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_PersistedGrants] PRIMARY KEY ([Key])
);
2020-09-09 12:05:47.352 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_DeviceCodes_DeviceCode] ON [DeviceCodes] ([DeviceCode]);
2020-09-09 12:05:47.359 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_DeviceCodes_Expiration] ON [DeviceCodes] ([Expiration]);
2020-09-09 12:05:47.363 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_Expiration] ON [PersistedGrants] ([Expiration]);
2020-09-09 12:05:47.368 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_ClientId_Type] ON [PersistedGrants] ([SubjectId], [ClientId], [Type]);
2020-09-09 12:05:47.372 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PersistedGrants_SubjectId_SessionId_Type] ON [PersistedGrants] ([SubjectId], [SessionId], [Type]);
2020-09-09 12:05:47.377 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200818144238_Initial', N'3.1.7');
2020-09-09 12:05:47.544 -04:00 [INF] Entity Framework Core 3.1.7 initialized 'DomainIdentityDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: MigrationsAssembly=EDennis.AspNetIdentityServer 
2020-09-09 12:05:47.556 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 12:05:47.561 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 12:05:47.565 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2020-09-09 12:05:47.570 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2020-09-09 12:05:47.578 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2020-09-09 12:05:47.582 -04:00 [INF] Applying migration '20200909154203_Initial'.
2020-09-09 12:05:47.636 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoleClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 12:05:47.641 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetRoles] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 12:05:47.644 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUserClaims] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 12:05:47.649 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE SEQUENCE [seqAspNetUsers] AS int START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE NO CYCLE;
2020-09-09 12:05:47.655 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplicationClaims] (
    [Application] varchar(128) NOT NULL,
    [ClaimTypePrefix] varchar(128) NOT NULL,
    [ClaimValue] varchar(128) NOT NULL,
    [OrgAdminable] bit NOT NULL,
    CONSTRAINT [PK_AspNetApplicationClaims] PRIMARY KEY ([Application], [ClaimTypePrefix], [ClaimValue])
);
2020-09-09 12:05:47.662 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetApplications] (
    [Name] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetApplications] PRIMARY KEY ([Name])
);
2020-09-09 12:05:47.666 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizationApplications] (
    [Organization] varchar(128) NOT NULL,
    [Application] varchar(128) NOT NULL,
    CONSTRAINT [PK_AspNetOrganizationApplications] PRIMARY KEY ([Organization], [Application])
);
2020-09-09 12:05:47.674 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetOrganizations] (
    [Name] varchar(128) NOT NULL,
    [SharedEmail] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetOrganizations] PRIMARY KEY ([Name])
);
2020-09-09 12:05:47.683 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoles] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoles),
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoles] PRIMARY KEY ([Id])
);
2020-09-09 12:05:47.694 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsers] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUsers),
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [AccessFailedCount] int NOT NULL,
    [Organization] varchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [SuperAdmin] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    CONSTRAINT [PK_AspNetUsers] PRIMARY KEY ([Id])
);
2020-09-09 12:05:47.704 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUsersHistory] (
    [Id] int NOT NULL,
    [DateReplaced] datetime2 NOT NULL,
    [ReplacedBy] nvarchar(256) NULL,
    [UserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [LockoutBegin] datetimeoffset NULL,
    [LockoutEnd] datetimeoffset NULL,
    [Organization] nvarchar(128) NULL,
    [OrganizationConfirmed] bit NOT NULL,
    [OrganizationAdmin] bit NOT NULL,
    [UserClaims] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUsersHistory] PRIMARY KEY ([Id], [DateReplaced])
);
2020-09-09 12:05:47.715 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetRoleClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetRoleClaims),
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetRoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetRoleClaims_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.727 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserClaims] (
    [Id] int NOT NULL DEFAULT (NEXT VALUE FOR seqAspNetUserClaims),
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_AspNetUserClaims_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.734 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserLogins] (
    [LoginProvider] nvarchar(128) NOT NULL,
    [ProviderKey] nvarchar(128) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_AspNetUserLogins_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.743 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_AspNetUserRoles_AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [AspNetRoles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_AspNetUserRoles_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.754 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AspNetUserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(128) NOT NULL,
    [Name] nvarchar(128) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_AspNetUserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_AspNetUserTokens_AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [AspNetUsers] ([Id]) ON DELETE CASCADE
);
2020-09-09 12:05:47.762 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetRoleClaims_RoleId] ON [AspNetRoleClaims] ([RoleId]);
2020-09-09 12:05:47.767 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [AspNetRoles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2020-09-09 12:05:47.774 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserClaims_UserId] ON [AspNetUserClaims] ([UserId]);
2020-09-09 12:05:47.779 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserLogins_UserId] ON [AspNetUserLogins] ([UserId]);
2020-09-09 12:05:47.783 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_AspNetUserRoles_RoleId] ON [AspNetUserRoles] ([RoleId]);
2020-09-09 12:05:47.786 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [AspNetUsers] ([NormalizedEmail]);
2020-09-09 12:05:47.793 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [AspNetUsers] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2020-09-09 12:05:47.800 -04:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE AspNetUsers
	ADD CONSTRAINT fk_UsersOrganizations
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE SET NULL

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_App
		FOREIGN KEY (Organization)
			REFERENCES AspNetOrganizations (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetOrganizationApplications
	ADD CONSTRAINT fk_OrganizationApplications_Org
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE

ALTER TABLE AspNetApplicationClaims
	ADD CONSTRAINT fk_ApplicaticationClaims_App
		FOREIGN KEY (Application)
			REFERENCES AspNetApplications (Name)
				ON DELETE CASCADE
2020-09-09 12:05:47.812 -04:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[SearchableDomainUser] AS
SELECT u.Id, u.UserName, u.Email, u.PhoneNumber, u.Organization, u.OrganizationAdmin,
  stuff((SELECT DISTINCT ',' + a.Name 
	FROM AspNetApplications a
	WHERE EXISTS (
		SELECT 0 from 
		AspNetUserClaims uc 
		WHERE uc.UserId = u.Id 
			AND ( 
				( uc.ClaimType = 'app:role' AND uc.ClaimValue like a.Name + ':%' ) OR
				( uc.ClaimType = '*:role' AND uc.ClaimValue = '*:admin' )
			)
	)
	FOR XML PATH('')),1,1,'') Applications
	FROM AspNetUsers u
2020-09-09 12:05:47.818 -04:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
USE [AspNetIdentityServer]
2020-09-09 12:05:47.826 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
/****** Object:  View [dbo].[DbDump]    Script Date: 8/18/2020 1:18:52 PM ******/
SET ANSI_NULLS ON
2020-09-09 12:05:47.830 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SET QUOTED_IDENTIFIER ON
2020-09-09 12:05:47.837 -04:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE OR ALTER VIEW [dbo].[DbView] AS
SELECT('{' + STUFF((
SELECT 
	JSON_QUERY(
		STUFF((
			SELECT ar.Name,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ApiResourceScopes s WHERE s.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + c.Type + '"' FROM ApiResourceClaims c WHERE c.ApiResourceId = ar.Id FOR XML PATH('')),1,1,'') + ']') Claims
				FROM ApiResources ar
				FOR JSON PATH),1,1,'')) ApiResources,
	JSON_QUERY('[' + 
		STUFF((
			SELECT c.ClientId, c.RequireConsent, c.RequirePkce, c.AllowAccessTokensViaBrowser, c.AllowOfflineAccess, c.ClientClaimsPrefix,
				JSON_QUERY('[' + stuff((SELECT ', "' + g.GrantType + '"' FROM ClientGrantTypes g WHERE g.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') GrantTypes,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.RedirectUri + '"' FROM ClientRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') RedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + u.PostLogoutRedirectUri + '"' FROM ClientPostLogoutRedirectUris u WHERE u.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') PostLogoutRedirectUris,	
				JSON_QUERY('[' + stuff((SELECT ', "' + s.Scope + '"' FROM ClientScopes s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Scopes,
				JSON_QUERY('[' + stuff((SELECT ', "' + s.[Key] + '"' FROM ClientProperties s WHERE s.ClientId = c.Id FOR XML PATH('')),1,1,'') + ']') Applications,
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + Type + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT cc2.Type,
									STUFF((
										SELECT ',' + char(34) + cc.Value + char(34) 
											FROM ClientClaims cc
											WHERE cc.ClientId = c.Id
												AND cc.Type = cc2.Type
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM ClientClaims cc2
									GROUP BY cc2.Type
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
				FROM Clients c
				FOR JSON PATH),1,1,'')
				+ ']') Clients,
	JSON_QUERY('[' +
		STUFF((
			SELECT u.Id, u.UserName, u.Email, u.EmailConfirmed, u.PhoneNumber, u.PhoneNumberConfirmed,
				u.LockoutBegin, u.LockoutEnd, u.Organization, u.OrganizationConfirmed, u.OrganizationAdmin, 
				JSON_QUERY('{' 
					+ STUFF((
						SELECT ',' + char(34) + ClaimType + char(34) + ':[' + ClaimValues + ']' 
							FROM (
								SELECT uc2.ClaimType,
									STUFF((
										SELECT ',' + char(34) + uc.ClaimValue + char(34) 
											FROM dbo.AspNetUserClaims uc
											WHERE u.Id = uc.UserId
												and uc.ClaimType = uc2.ClaimType
											FOR XML PATH('')),1,1,'') as ClaimValues
									FROM dbo.AspNetUserClaims uc2
									GROUP BY uc2.ClaimType
									) stf
							FOR XML PATH('')),1,1,'') + '}' ) as Claims
	
				FROM dbo.AspNetUsers u
	
				FOR JSON PATH),1,1,'')
								+ ']') Users
	FOR JSON PATH, WITHOUT_ARRAY_WRAPPER
),1,1,'')) as json
2020-09-09 12:05:47.850 -04:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20200909154203_Initial', N'3.1.7');
2020-09-09 12:05:47.870 -04:00 [INF] Creating DomainIdentityDbContext instance ...
2020-09-09 12:05:47.935 -04:00 [INF] Creating ConfigurationDbContext instance ...
2020-09-09 12:05:48.012 -04:00 [INF] Creating PersistedGrantDbContext instance ...
2020-09-09 12:05:48.075 -04:00 [INF] Loading SeedData\IdentityResources.json ...
2020-09-09 12:05:48.410 -04:00 [INF] 	Adding IdentityResource openid
2020-09-09 12:05:48.823 -04:00 [INF] 	Adding IdentityResource profile
2020-09-09 12:05:48.833 -04:00 [INF] 	Adding IdentityResource role
2020-09-09 12:05:48.999 -04:00 [INF] Loading project configs from SeedData ...
2020-09-09 12:05:49.008 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApi ...
2020-09-09 12:05:49.011 -04:00 [INF] 		Loading EDennis.Samples.ColorApi ...
2020-09-09 12:05:49.131 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApi ...
2020-09-09 12:05:49.138 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApi ...
2020-09-09 12:05:49.146 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApi ...
2020-09-09 12:05:49.154 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApi ...
2020-09-09 12:05:49.170 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 12:05:49.201 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 12:05:49.219 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 12:05:49.233 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApi ...
2020-09-09 12:05:49.236 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 12:05:49.248 -04:00 [INF] 			Adding user record for maria@a.test ...
2020-09-09 12:05:49.303 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 12:05:49.305 -04:00 [INF] 			Checking application role records for maria@a.test ...
2020-09-09 12:05:49.345 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 12:05:49.348 -04:00 [INF] 			Adding user record for john@a.test ...
2020-09-09 12:05:49.353 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 12:05:49.357 -04:00 [INF] 			Checking application role records for john@a.test ...
2020-09-09 12:05:49.370 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 12:05:49.373 -04:00 [INF] 			Adding user record for darius@b.test ...
2020-09-09 12:05:49.380 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 12:05:49.382 -04:00 [INF] 			Checking application role records for darius@b.test ...
2020-09-09 12:05:49.388 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 12:05:49.390 -04:00 [INF] 			Adding user record for linda@b.test ...
2020-09-09 12:05:49.397 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 12:05:49.399 -04:00 [INF] 			Checking application role records for linda@b.test ...
2020-09-09 12:05:49.404 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 12:05:49.407 -04:00 [INF] 			Adding user record for pat@c.test ...
2020-09-09 12:05:49.413 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 12:05:49.415 -04:00 [INF] 			Checking application role records for pat@c.test ...
2020-09-09 12:05:49.420 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 12:05:49.424 -04:00 [INF] 			Adding user record for ebony@c.test ...
2020-09-09 12:05:49.430 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 12:05:49.433 -04:00 [INF] 			Checking application role records for ebony@c.test ...
2020-09-09 12:05:49.438 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 12:05:49.441 -04:00 [INF] 			Adding user record for juan@a.test ...
2020-09-09 12:05:49.447 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 12:05:49.456 -04:00 [INF] 			Checking application role records for juan@a.test ...
2020-09-09 12:05:49.458 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 12:05:49.460 -04:00 [INF] 			Adding user record for james@b.test ...
2020-09-09 12:05:49.467 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 12:05:49.469 -04:00 [INF] 			Checking application role records for james@b.test ...
2020-09-09 12:05:49.478 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Razor ...
2020-09-09 12:05:49.479 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor ...
2020-09-09 12:05:49.514 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Razor ...
2020-09-09 12:05:49.532 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor:API ...
2020-09-09 12:05:49.713 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Razor:ID ...
2020-09-09 12:05:49.834 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Razor ...
2020-09-09 12:05:49.836 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Razor ...
2020-09-09 12:05:49.839 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Razor ...
2020-09-09 12:05:49.841 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 12:05:49.845 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 12:05:49.849 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 12:05:49.853 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Razor ...
2020-09-09 12:05:49.856 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 12:05:49.860 -04:00 [INF] 			User record found for maria@a.test ...
2020-09-09 12:05:49.862 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 12:05:49.865 -04:00 [INF] 			Checking application role records for maria@a.test ...
2020-09-09 12:05:49.873 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 12:05:49.876 -04:00 [INF] 			User record found for john@a.test ...
2020-09-09 12:05:49.878 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 12:05:49.880 -04:00 [INF] 			Checking application role records for john@a.test ...
2020-09-09 12:05:49.886 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 12:05:49.888 -04:00 [INF] 			User record found for darius@b.test ...
2020-09-09 12:05:49.891 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 12:05:49.892 -04:00 [INF] 			Checking application role records for darius@b.test ...
2020-09-09 12:05:49.901 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 12:05:49.904 -04:00 [INF] 			User record found for linda@b.test ...
2020-09-09 12:05:49.906 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 12:05:49.908 -04:00 [INF] 			Checking application role records for linda@b.test ...
2020-09-09 12:05:49.914 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 12:05:49.917 -04:00 [INF] 			User record found for pat@c.test ...
2020-09-09 12:05:49.918 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 12:05:49.922 -04:00 [INF] 			Checking application role records for pat@c.test ...
2020-09-09 12:05:49.931 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 12:05:49.934 -04:00 [INF] 			User record found for ebony@c.test ...
2020-09-09 12:05:49.937 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 12:05:49.939 -04:00 [INF] 			Checking application role records for ebony@c.test ...
2020-09-09 12:05:49.947 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 12:05:49.949 -04:00 [INF] 			User record found for juan@a.test ...
2020-09-09 12:05:49.950 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 12:05:49.958 -04:00 [INF] 			Checking application role records for juan@a.test ...
2020-09-09 12:05:49.959 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 12:05:49.963 -04:00 [INF] 			User record found for james@b.test ...
2020-09-09 12:05:49.964 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 12:05:49.967 -04:00 [INF] 			Checking application role records for james@b.test ...
2020-09-09 12:05:49.975 -04:00 [INF] 	Loading Apis for EDennis.Samples.ColorApp.Server ...
2020-09-09 12:05:49.977 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server ...
2020-09-09 12:05:49.995 -04:00 [INF] 	Loading Clients for EDennis.Samples.ColorApp.Server ...
2020-09-09 12:05:49.998 -04:00 [INF] 		Loading EDennis.Samples.ColorApp.Server:API ...
2020-09-09 12:05:50.014 -04:00 [INF] 	Loading TestUsers for EDennis.Samples.ColorApp.Server ...
2020-09-09 12:05:50.016 -04:00 [INF] 		Checking application record for EDennis.Samples.ColorApp.Server ...
2020-09-09 12:05:50.021 -04:00 [INF] 		Adding application record for EDennis.Samples.ColorApp.Server ...
2020-09-09 12:05:50.025 -04:00 [INF] 		Adding any missing application claim records ...
2020-09-09 12:05:50.029 -04:00 [INF] 			Adding any missing organization records ...
2020-09-09 12:05:50.032 -04:00 [INF] 			Adding any missing organization application records ...
2020-09-09 12:05:50.037 -04:00 [INF] 		Checking test user records for EDennis.Samples.ColorApp.Server ...
2020-09-09 12:05:50.038 -04:00 [INF] 			Checking user record for maria@a.test ...
2020-09-09 12:05:50.043 -04:00 [INF] 			User record found for maria@a.test ...
2020-09-09 12:05:50.044 -04:00 [INF] 			Checking claim records for maria@a.test ...
2020-09-09 12:05:50.047 -04:00 [INF] 			Checking application role records for maria@a.test ...
2020-09-09 12:05:50.053 -04:00 [INF] 			Checking user record for john@a.test ...
2020-09-09 12:05:50.056 -04:00 [INF] 			User record found for john@a.test ...
2020-09-09 12:05:50.059 -04:00 [INF] 			Checking claim records for john@a.test ...
2020-09-09 12:05:50.060 -04:00 [INF] 			Checking application role records for john@a.test ...
2020-09-09 12:05:50.069 -04:00 [INF] 			Checking user record for darius@b.test ...
2020-09-09 12:05:50.076 -04:00 [INF] 			User record found for darius@b.test ...
2020-09-09 12:05:50.078 -04:00 [INF] 			Checking claim records for darius@b.test ...
2020-09-09 12:05:50.080 -04:00 [INF] 			Checking application role records for darius@b.test ...
2020-09-09 12:05:50.098 -04:00 [INF] 			Checking user record for linda@b.test ...
2020-09-09 12:05:50.102 -04:00 [INF] 			User record found for linda@b.test ...
2020-09-09 12:05:50.103 -04:00 [INF] 			Checking claim records for linda@b.test ...
2020-09-09 12:05:50.105 -04:00 [INF] 			Checking application role records for linda@b.test ...
2020-09-09 12:05:50.111 -04:00 [INF] 			Checking user record for pat@c.test ...
2020-09-09 12:05:50.113 -04:00 [INF] 			User record found for pat@c.test ...
2020-09-09 12:05:50.114 -04:00 [INF] 			Checking claim records for pat@c.test ...
2020-09-09 12:05:50.116 -04:00 [INF] 			Checking application role records for pat@c.test ...
2020-09-09 12:05:50.122 -04:00 [INF] 			Checking user record for ebony@c.test ...
2020-09-09 12:05:50.124 -04:00 [INF] 			User record found for ebony@c.test ...
2020-09-09 12:05:50.125 -04:00 [INF] 			Checking claim records for ebony@c.test ...
2020-09-09 12:05:50.126 -04:00 [INF] 			Checking application role records for ebony@c.test ...
2020-09-09 12:05:50.132 -04:00 [INF] 			Checking user record for juan@a.test ...
2020-09-09 12:05:50.134 -04:00 [INF] 			User record found for juan@a.test ...
2020-09-09 12:05:50.135 -04:00 [INF] 			Checking claim records for juan@a.test ...
2020-09-09 12:05:50.138 -04:00 [INF] 			Checking application role records for juan@a.test ...
2020-09-09 12:05:50.140 -04:00 [INF] 			Checking user record for james@b.test ...
2020-09-09 12:05:50.143 -04:00 [INF] 			User record found for james@b.test ...
2020-09-09 12:05:50.144 -04:00 [INF] 			Checking claim records for james@b.test ...
2020-09-09 12:05:50.145 -04:00 [INF] 			Checking application role records for james@b.test ...
2020-09-09 12:05:50.151 -04:00 [INF] **Finished Loading Configurations.
2020-09-09 12:05:50.154 -04:00 [INF] Dumping ApiResources, Clients, and Users to JSON file ...
